{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@agm/core/services/maps-api-loader/maps-api-loader.ts","ng://@agm/core/services/google-maps-api-wrapper.ts","ng://@agm/core/services/managers/layer-manager.ts","ng://@agm/core/directives/bicycling-layer.ts","ng://@agm/core/services/managers/circle-manager.ts","ng://@agm/core/directives/circle.ts","ng://@agm/core/services/managers/data-layer-manager.ts","ng://@agm/core/directives/data-layer.ts","ng://@agm/core/services/fit-bounds.ts","ng://@agm/core/directives/fit-bounds.ts","ng://@agm/core/services/managers/marker-manager.ts","ng://@agm/core/services/managers/info-window-manager.ts","ng://@agm/core/directives/info-window.ts","ng://@agm/core/services/managers/kml-layer-manager.ts","ng://@agm/core/directives/kml-layer.ts","ng://@agm/core/utils/mvcarray-utils.ts","ng://@agm/core/services/google-maps-types.ts","ng://@agm/core/services/managers/polygon-manager.ts","ng://@agm/core/services/managers/polyline-manager.ts","ng://@agm/core/services/managers/rectangle-manager.ts","ng://@agm/core/directives/map.ts","ng://@agm/core/directives/marker.ts","ng://@agm/core/directives/polygon.ts","ng://@agm/core/directives/polyline-icon.ts","ng://@agm/core/directives/polyline-point.ts","ng://@agm/core/directives/polyline.ts","ng://@agm/core/directives/rectangle.ts","ng://@agm/core/directives/transit-layer.ts","ng://@agm/core/services/maps-api-loader/lazy-maps-api-loader.ts","ng://@agm/core/services/geocoder-service.ts","ng://@agm/core/utils/browser-globals.ts","ng://@agm/core/services/maps-api-loader/noop-maps-api-loader.ts","ng://@agm/core/core.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","pop","push","__read","o","m","ar","error","__spread","concat","MapsAPILoader","Injectable","GoogleMapsAPIWrapper","_loader","_zone","_this","_map","_mapResolver","prototype","createMap","el","mapOptions","runOutsideAngular","load","map","google","maps","Map","setMapOptions","options","setOptions","createMarker","addToMap","Marker","createInfoWindow","InfoWindow","createCircle","strokePosition","StrokePosition","Circle","createRectangle","Rectangle","createPolyline","getNativeMap","line","Polyline","setMap","createPolygon","polygon","Polygon","createDataLayer","data","Data","createTransitLayer","newLayer","TransitLayer","visible","createBicyclingLayer","BicyclingLayer","containsLocation","latLng","geometry","poly","subscribeToMapEvent","eventName","Observable","observer","addListener","arg","run","clearInstanceListeners","event","setCenter","getZoom","getBounds","getMapTypeId","setZoom","zoom","getCenter","panTo","panBy","x","fitBounds","padding","panToBounds","triggerMapEvent","trigger","NgZone","LayerManager","_wrapper","_layers","addTransitLayer","layer","set","addBicyclingLayer","deleteLayer","get","currentLayer","delete","toggleLayerVisibility","layerId","AgmBicyclingLayer","_manager","_addedToManager","_id","toString","ngOnInit","ngOnChanges","changes","currentValue","id","ngOnDestroy","tslib_1.__decorate","Input","Directive","selector","CircleManager","_apiWrapper","_circles","addCircle","circle","center","lat","latitude","lng","longitude","clickable","draggable","editable","fillColor","fillOpacity","radius","strokeColor","strokeOpacity","strokeWeight","zIndex","removeCircle","getRadius","setEditable","setDraggable","setVisible","setRadius","getNativeCircle","createEventObservable","listener","remove","AgmCircle","centerChange","EventEmitter","circleClick","circleDblClick","drag","dragEnd","dragStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","radiusChange","rightClick","_circleAddedToManager","_eventSubscriptions","_registerEventListeners","_updateCircleOptionsChanges","optionKeys","keys","filter","k","AgmCircle_1","_mapOptions","indexOf","forEach","events","eventEmitter","subscribe","emit","coords","s","unsubscribe","Output","DataLayerManager","addDataLayer","style","geoJson","getDataFeatures","features","deleteDataLayer","l","updateGeoJson","feature","index","splice","setDataOptions","setControlPosition","controlPosition","setControls","controls","setDrawingMode","drawingMode","setStyle","addGeoJson","loadGeoJson","AgmDataLayer","_subscriptions","layerClick","_addEventListeners","name","handler","ev","obj","os","geoJsonChange","dataOptions","AgmDataLayer_1","_dataOptionsAttributes","FitBoundsAccessor","FitBoundsService","loader","_boundsChangeSampleTime$","BehaviorSubject","_includeInBounds$","bounds$","from","pipe","flatMap","sample","switchMap","time","timer","includeInBounds","_generateBounds","shareReplay","bounds","LatLngBounds","extend","addToBounds","_createIdentifier","has","removeFromBounds","changeFitBoundsChangeSampleTime","timeMs","getBounds$","AgmFitBounds","_fitBoundsAccessor","_fitBoundsService","agmFitBounds","_destroyed$","Subject","_latestFitBoundsDetails","_updateBounds","getFitBoundsDetails$","distinctUntilChanged","takeUntil","details","newFitBoundsDetails","complete","type","Self","tslib_1.__param","MarkerManager","_mapsWrapper","_markers","convertAnimation","uiAnim","Animation","deleteMarker","marker","updateMarkerPosition","setPosition","updateTitle","setTitle","title","updateLabel","setLabel","updateDraggable","updateIcon","setIcon","iconUrl","updateOpacity","setOpacity","opacity","updateVisible","updateZIndex","setZIndex","updateClickable","setClickable","updateAnimation","_c","_b","_a","setAnimation","animation","addMarker","markerPromise","position","icon","_d","getNativeMarker","InfoWindowManager","_markerManager","_infoWindows","deleteInfoWindow","infoWindow","iWindow","close","open","w","hostMarker","addInfoWindow","content","maxWidth","disableAutoPan","infoWindowPromise","infoWindowId","AgmInfoWindow","_infoWindowManager","_el","isOpen","infoWindowClose","_infoWindowAddedToManager","nativeElement","querySelector","_updateOpenState","_setInfoWindowOptions","AgmInfoWindow_1","_infoWindowOptionsInputs","ElementRef","Component","template","KmlLayerManager","addKmlLayer","KmlLayer","preserveViewport","screenOverlays","suppressInfoWindows","url","deleteKmlLayer","AgmKmlLayer","defaultViewportChange","statusChange","_updatePolygonOptions","AgmKmlLayer_1","_kmlLayerOptions","reduce","createMVCEventObservable","array","eventNames","fromEventPattern","evName","previous","newArr","getArray","_handler","evListeners","evListener","MvcArrayMock","vals","listeners","remove_at","insert_at","set_at","clear","removeAt","getAt","getLength","insertAt","elem","deleted","setAt","callback","listenerArr","SymbolPath","ControlPosition","MapTypeId","MapTypeControlStyle","ScaleControlStyle","ZoomControlStyle","GeocoderLocationType","GeocoderStatus","PolygonManager","_polygons","addPolygon","path","polygonPromise","geodesic","paths","updatePolygon","setPaths","setPolygonOptions","deletePolygon","getPath","getPaths","createPathEventObservable","agmPolygon","startWith","parentMVEvent","merge","chMVC","chMVCEvent","pathIndex","skip","retVal","subArr","toJSON","PolylineManager","_polylines","_convertPoints","_getPoints","point","_convertPath","symbolPath","_convertIcons","icons","_getIcons","agmIcon","fixedRotation","offset","repeat","anchor","Point","anchorX","anchorY","PolylineManager_1","rotation","scale","entries","addPolyline","polylinePromise","updatePolylinePoints","setPath","updateIconSequences","setPolylineOptions","deletePolyline","getMVCPath","agmPolyline","RectangleManager","_rectangles","addRectangle","rectangle","north","east","south","west","removeRectangle","setBounds","create","AgmMap","_elem","_platformId","disableDoubleClickZoom","disableDefaultUI","scrollwheel","keyboardShortcuts","styles","usePanning","scaleControl","mapTypeControl","panControl","rotateControl","fullscreenControl","mapTypeId","clickableIcons","showDefaultInfoWindow","gestureHandling","tilt","_observableSubscriptions","mapClick","mapRightClick","mapDblClick","boundsChange","mapTypeIdChange","idle","zoomChange","mapReady","tilesLoaded","isPlatformServer","container","_initMapInstance","minZoom","maxZoom","controlSize","backgroundColor","draggableCursor","draggingCursor","zoomControl","zoomControlOptions","streetViewControl","streetViewControlOptions","scaleControlOptions","mapTypeControlOptions","panControlOptions","rotateControlOptions","fullscreenControlOptions","restriction","_handleMapCenterChange","_handleMapZoomChange","_handleMapMouseEvents","_handleBoundsChange","_handleMapTypeIdChange","_handleTilesLoadedEvent","_handleIdleEvent","_fitBoundsSubscription","_updateMapOptionsChanges","_updatePosition","AgmMap_1","_mapOptionsAttributes","triggerResize","recenter","setTimeout","_fitBounds","_setCenter","newCenter","_subscribeToFitBoundsUpdates","fitBoundsPadding","_isLatLngBoundsLiteral","newBounds","union","undefined","z","emitter","placeId","stop","Inject","args","PLATFORM_ID","providers","host","[class.sebm-google-map-container]","markerId","AgmMarker","openInfoWindow","animationChange","markerClick","markerDblClick","markerRightClick","QueryList","_markerAddedToManger","_fitBoundsDetails$","ReplaySubject","ngAfterContentInit","handleInfoWindowUpdate","Error","Number","_updateFitBoundsDetails","asObservable","cs","dcs","rc","ds","de","mover","mout","anChng","ContentChildren","AgmMarker_1","provide","useExisting","forwardRef","inputs","outputs","AgmPolygon","_polygonManager","polyClick","polyDblClick","polyDrag","polyDragEnd","polyDragStart","polyMouseDown","polyMouseMove","polyMouseOut","polyMouseOver","polyMouseUp","polyRightClick","polyPathsChange","_polygonAddedToManager","_init","paths$","pathEvent","AgmPolygon_1","_polygonOptionsAttributes","AgmPolylineIcon","AgmPolylinePoint","positionChanged","AgmPolylinePoint_1","polylineId","AgmPolyline","_polylineManager","lineClick","lineDblClick","lineDrag","lineDragEnd","lineDragStart","lineMouseDown","lineMouseMove","lineMouseOut","lineMouseOver","lineMouseUp","lineRightClick","polyPathChange","_polylineAddedToManager","points","pointSub","iconSub","iconSequences","AgmPolyline_1","_polylineOptionsAttributes","ob$","toArray","AgmRectangle","rectangleClick","rectangleDblClick","_rectangleAddedToManager","_updateRectangleOptionsChanges","AgmRectangle_1","getNorthEast","getSouthWest","AgmTransitLayer","GoogleMapsScriptProtocol","AgmGeocoder","connectableGeocoder$","subscriber","_createGeocoder","multicast","connect","geocoder$","geocode","request","geocoder","_getGoogleResults","bindCallback","geocodeObservable","results","status","OK","of","throwError","Geocoder","providedIn","WindowRef","getNativeWindow","window","DocumentRef","getNativeDocument","document","BROWSER_GLOBALS_PROVIDERS","LAZY_MAPS_API_CONFIG","InjectionToken","LazyMapsAPILoader","_super","config","localeId","_SCRIPT_ID","callbackName","_config","_windowRef","_documentRef","__","constructor","tslib_1.__extends","_scriptLoadingPromise","scriptOnPage","getElementById","_assignScriptLoadingPromise","script","createElement","async","defer","src","_getScriptSrc","appendChild","scriptElem","onerror","protocol","HTTPS","AUTO","HTTP","hostAndPath","queryParams","apiVersion","apiKey","client","clientId","channel","libraries","region","language","isArray","join","entry","Optional","LOCALE_ID","NoOpMapsAPILoader","coreDirectives","AgmCoreModule","forRoot","lazyMapsAPILoaderConfig","ngModule","AgmCoreModule_1","useClass","useValue","NgModule","declarations","exports"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport abstract class MapsAPILoader {\r\n  abstract load(): Promise<void>;\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport * as mapTypes from './google-maps-types';\r\nimport { Polyline, PolylineOptions } from './google-maps-types';\r\nimport { MapsAPILoader } from './maps-api-loader/maps-api-loader';\r\n\r\n// todo: add types for this\r\ndeclare var google: any;\r\n\r\n/**\r\n * Wrapper class that handles the communication with the Google Maps Javascript\r\n * API v3\r\n */\r\n@Injectable()\r\nexport class GoogleMapsAPIWrapper {\r\n  private _map: Promise<mapTypes.GoogleMap>;\r\n  private _mapResolver: (value?: mapTypes.GoogleMap) => void;\r\n\r\n  constructor(private _loader: MapsAPILoader, private _zone: NgZone) {\r\n    this._map =\r\n        new Promise<mapTypes.GoogleMap>((resolve: () => void) => { this._mapResolver = resolve; });\r\n  }\r\n\r\n  createMap(el: HTMLElement, mapOptions: mapTypes.MapOptions): Promise<void> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._loader.load().then(() => {\r\n        const map = new google.maps.Map(el, mapOptions);\r\n        this._mapResolver(map as mapTypes.GoogleMap);\r\n        return;\r\n      });\r\n    });\r\n  }\r\n\r\n  setMapOptions(options: mapTypes.MapOptions) {\r\n    return this._zone.runOutsideAngular(() => {\r\n      this._map.then((m: mapTypes.GoogleMap) => { m.setOptions(options); });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a google map marker with the map context\r\n   */\r\n  createMarker(options: mapTypes.MarkerOptions = {} as mapTypes.MarkerOptions, addToMap: boolean = true):\r\n      Promise<mapTypes.Marker> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => {\r\n        if (addToMap) {\r\n          options.map = map;\r\n        }\r\n        return new google.maps.Marker(options);\r\n      });\r\n    });\r\n  }\r\n\r\n  createInfoWindow(options?: mapTypes.InfoWindowOptions): Promise<mapTypes.InfoWindow> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then(() => { return new google.maps.InfoWindow(options); });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a google.map.Circle for the current map.\r\n   */\r\n  createCircle(options: mapTypes.CircleOptions): Promise<mapTypes.Circle> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => {\r\n        if (typeof options.strokePosition === 'string') {\r\n          options.strokePosition = google.maps.StrokePosition[options.strokePosition];\r\n        }\r\n        options.map = map;\r\n        return new google.maps.Circle(options);\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a google.map.Rectangle for the current map.\r\n   */\r\n  createRectangle(options: mapTypes.RectangleOptions): Promise<mapTypes.Rectangle> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => {\r\n        options.map = map;\r\n        return new google.maps.Rectangle(options);\r\n      });\r\n    });\r\n  }\r\n\r\n  createPolyline(options: PolylineOptions): Promise<Polyline> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this.getNativeMap().then((map: mapTypes.GoogleMap) => {\r\n        let line = new google.maps.Polyline(options);\r\n        line.setMap(map);\r\n        return line;\r\n      });\r\n    });\r\n  }\r\n\r\n  createPolygon(options: mapTypes.PolygonOptions): Promise<mapTypes.Polygon> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this.getNativeMap().then((map: mapTypes.GoogleMap) => {\r\n        let polygon = new google.maps.Polygon(options);\r\n        polygon.setMap(map);\r\n        return polygon;\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a new google.map.Data layer for the current map\r\n   */\r\n  createDataLayer(options?: mapTypes.DataOptions): Promise<mapTypes.Data> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then(m => {\r\n        let data = new google.maps.Data(options);\r\n        data.setMap(m);\r\n        return data;\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a TransitLayer instance for a map\r\n   * @param {TransitLayerOptions} options - used for setting layer options\r\n   * @returns {Promise<TransitLayer>} a new transit layer object\r\n   */\r\n  createTransitLayer(options: mapTypes.TransitLayerOptions): Promise<mapTypes.TransitLayer>{\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => {\r\n        let newLayer: mapTypes.TransitLayer = new google.maps.TransitLayer();\r\n        newLayer.setMap(options.visible ? map : null);\r\n        return newLayer;\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a BicyclingLayer instance for a map\r\n   * @param {BicyclingLayerOptions} options - used for setting layer options\r\n   * @returns {Promise<BicyclingLayer>} a new bicycling layer object\r\n   */\r\n  createBicyclingLayer(options: mapTypes.BicyclingLayerOptions): Promise<mapTypes.BicyclingLayer>{\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => {\r\n        let newLayer: mapTypes.BicyclingLayer = new google.maps.BicyclingLayer();\r\n        newLayer.setMap(options.visible ? map : null);\r\n        return newLayer;\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Determines if given coordinates are insite a Polygon path.\r\n   */\r\n  containsLocation(latLng: mapTypes.LatLngLiteral, polygon: mapTypes.Polygon): Promise<boolean> {\r\n    return google.maps.geometry.poly.containsLocation(latLng, polygon);\r\n  }\r\n\r\n  subscribeToMapEvent<E>(eventName: string): Observable<E> {\r\n    return new Observable((observer: Observer<E>) => {\r\n      this._map.then((m: mapTypes.GoogleMap) => {\r\n        m.addListener(eventName, (arg: E) => { this._zone.run(() => observer.next(arg)); });\r\n      });\r\n    });\r\n  }\r\n\r\n  clearInstanceListeners() {\r\n    return this._zone.runOutsideAngular(() => {\r\n      this._map.then((map: mapTypes.GoogleMap) => {\r\n        google.maps.event.clearInstanceListeners(map);\r\n      });\r\n    });\r\n  }\r\n\r\n  setCenter(latLng: mapTypes.LatLngLiteral): Promise<void> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => map.setCenter(latLng));\r\n    });\r\n  }\r\n\r\n  getZoom(): Promise<number> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => map.getZoom());\r\n    });\r\n  }\r\n\r\n  getBounds(): Promise<mapTypes.LatLngBounds> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => map.getBounds());\r\n    });\r\n  }\r\n\r\n  getMapTypeId(): Promise<mapTypes.MapTypeId> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => map.getMapTypeId());\r\n    });\r\n  }\r\n\r\n  setZoom(zoom: number): Promise<void> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => map.setZoom(zoom));\r\n    });\r\n  }\r\n\r\n  getCenter(): Promise<mapTypes.LatLng> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map: mapTypes.GoogleMap) => map.getCenter());\r\n    });\r\n  }\r\n\r\n  panTo(latLng: mapTypes.LatLng | mapTypes.LatLngLiteral): Promise<void> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map) => map.panTo(latLng));\r\n    });\r\n  }\r\n\r\n  panBy(x: number, y: number): Promise<void> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map) => map.panBy(x, y));\r\n    });\r\n  }\r\n\r\n  fitBounds(latLng: mapTypes.LatLngBounds | mapTypes.LatLngBoundsLiteral, padding?: number | mapTypes.Padding): Promise<void> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map) => map.fitBounds(latLng, padding));\r\n    });\r\n  }\r\n\r\n  panToBounds(latLng: mapTypes.LatLngBounds | mapTypes.LatLngBoundsLiteral, padding?: number | mapTypes.Padding): Promise<void> {\r\n    return this._zone.runOutsideAngular(() => {\r\n      return this._map.then((map) => map.panToBounds(latLng, padding));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the native Google Maps Map instance. Be careful when using this instance directly.\r\n   */\r\n  getNativeMap(): Promise<mapTypes.GoogleMap> { return this._map; }\r\n\r\n  /**\r\n   * Triggers the given event name on the map instance.\r\n   */\r\n  triggerMapEvent(eventName: string): Promise<void> {\r\n    return this._map.then((m) => google.maps.event.trigger(m, eventName));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AgmBicyclingLayer } from '../../directives/bicycling-layer';\r\nimport { AgmTransitLayer } from '../../directives/transit-layer';\r\nimport { GoogleMapsAPIWrapper } from '../google-maps-api-wrapper';\r\nimport { BicyclingLayer, BicyclingLayerOptions, GoogleMap, TransitLayer, TransitLayerOptions } from '../google-maps-types';\r\n\r\n/**\r\n * This class manages Transit and Bicycling Layers for a Google Map instance.\r\n */\r\n\r\n@Injectable()\r\nexport class LayerManager {\r\n    private _layers: Map<AgmTransitLayer | AgmBicyclingLayer, Promise<TransitLayer | BicyclingLayer>> =\r\n        new Map<AgmTransitLayer | AgmBicyclingLayer, Promise<TransitLayer | BicyclingLayer>>();\r\n\r\n    constructor(private _wrapper: GoogleMapsAPIWrapper) {}\r\n\r\n    /**\r\n     * Adds a transit layer to a map instance.\r\n     * @param {AgmTransitLayer} layer - a TransitLayer object\r\n     * @param {TransitLayerOptions} options - TransitLayerOptions options\r\n     * @returns void\r\n     */\r\n    addTransitLayer(layer: AgmTransitLayer, options: TransitLayerOptions): void {\r\n        const newLayer = this._wrapper.createTransitLayer(options);\r\n        this._layers.set(layer, newLayer);\r\n    }\r\n\r\n    /**\r\n     * Adds a bicycling layer to a map instance.\r\n     * @param {AgmBicyclingLayer} layer - a bicycling layer object\r\n     * @param {BicyclingLayerOptions} options - BicyclingLayer options\r\n     * @returns void\r\n     */\r\n    addBicyclingLayer(layer: AgmBicyclingLayer, options: BicyclingLayerOptions): void {\r\n        const newLayer = this._wrapper.createBicyclingLayer(options);\r\n        this._layers.set(layer, newLayer);\r\n    }\r\n\r\n    /**\r\n     * Deletes a map layer\r\n     * @param {AgmTransitLayer|AgmBicyclingLayer} layer - the layer to delete\r\n     * @returns  Promise<void>\r\n     */\r\n    deleteLayer(layer: AgmTransitLayer | AgmBicyclingLayer): Promise<void> {\r\n        return this._layers.get(layer).then(currentLayer => {\r\n            currentLayer.setMap(null);\r\n            this._layers.delete(layer);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Hide/Show a google map layer\r\n     * @param { AgmTransitLayer|AgmBicyclingLayer} layer - the layer to hide/show\r\n     * @param {TransitLayerOptions|BicyclingLayerOptions} options - used to set visibility of the layer\r\n     * @returns Promise<void>\r\n     */\r\n    toggleLayerVisibility(layer: AgmTransitLayer | AgmBicyclingLayer, options: TransitLayerOptions | BicyclingLayerOptions): Promise<void> {\r\n        return this._layers.get(layer).then(currentLayer => {\r\n            if (!options.visible) {\r\n                currentLayer.setMap(null);\r\n                return;\r\n            } else {\r\n               return this._wrapper.getNativeMap().then( (map: GoogleMap) => {\r\n                   currentLayer.setMap(map);\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { Directive, Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { LayerManager } from '../services/managers/layer-manager';\r\n\r\nlet layerId = 0;\r\n\r\n/*\r\n * This directive adds a bicycling layer to a google map instance\r\n * <agm-bicycling-layer [visible]=\"true|false\"> <agm-bicycling-layer>\r\n * */\r\n@Directive({\r\n    selector: 'agm-bicycling-layer',\r\n})\r\n\r\nexport class AgmBicyclingLayer implements OnInit, OnChanges, OnDestroy{\r\n    private _addedToManager = false;\r\n    private _id: string = (layerId++).toString();\r\n\r\n    /**\r\n     * Hide/show bicycling layer\r\n     */\r\n    @Input() visible = true;\r\n\r\n    constructor( private _manager: LayerManager ) {}\r\n\r\n    ngOnInit() {\r\n        if (this._addedToManager) {\r\n            return;\r\n        }\r\n        this._manager.addBicyclingLayer(this, {visible: this.visible});\r\n        this._addedToManager = true;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (!this._addedToManager) {\r\n            return;\r\n        }\r\n        if (changes['visible'] != null) {\r\n            this._manager.toggleLayerVisibility(this, {visible: changes['visible'].currentValue});\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    id(): string { return this._id; }\r\n\r\n    /** @internal */\r\n    toString(): string { return `AgmBicyclingLayer-${this._id.toString()}`; }\r\n\r\n    /** @internal */\r\n    ngOnDestroy() {\r\n        this._manager.deleteLayer(this);\r\n    }\r\n\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\n\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport { AgmCircle } from '../../directives/circle';\r\nimport { GoogleMapsAPIWrapper } from '../google-maps-api-wrapper';\r\nimport * as mapTypes from '../google-maps-types';\r\n\r\ndeclare var google: any;\r\n\r\n@Injectable()\r\nexport class CircleManager {\r\n  private _circles: Map<AgmCircle, Promise<mapTypes.Circle>> =\r\n      new Map<AgmCircle, Promise<mapTypes.Circle>>();\r\n\r\n  constructor(private _apiWrapper: GoogleMapsAPIWrapper, private _zone: NgZone) {}\r\n\r\n  addCircle(circle: AgmCircle) {\r\n    this._circles.set(circle, this._apiWrapper.createCircle({\r\n      center: {lat: circle.latitude, lng: circle.longitude},\r\n      clickable: circle.clickable,\r\n      draggable: circle.draggable,\r\n      editable: circle.editable,\r\n      fillColor: circle.fillColor,\r\n      fillOpacity: circle.fillOpacity,\r\n      radius: circle.radius,\r\n      strokeColor: circle.strokeColor,\r\n      strokeOpacity: circle.strokeOpacity,\r\n      strokePosition: circle.strokePosition,\r\n      strokeWeight: circle.strokeWeight,\r\n      visible: circle.visible,\r\n      zIndex: circle.zIndex,\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Removes the given circle from the map.\r\n   */\r\n  removeCircle(circle: AgmCircle): Promise<void> {\r\n    return this._circles.get(circle).then((c) => {\r\n      c.setMap(null);\r\n      this._circles.delete(circle);\r\n    });\r\n  }\r\n\r\n  setOptions(circle: AgmCircle, options: mapTypes.CircleOptions): Promise<void> {\r\n    return this._circles.get(circle).then((c) => {\r\n      if (typeof options.strokePosition === 'string') {\r\n        options.strokePosition = google.maps.StrokePosition[options.strokePosition];\r\n      }\r\n      c.setOptions(options);\r\n    });\r\n  }\r\n\r\n  getBounds(circle: AgmCircle): Promise<mapTypes.LatLngBounds> {\r\n    return this._circles.get(circle).then((c) => c.getBounds());\r\n  }\r\n\r\n  getCenter(circle: AgmCircle): Promise<mapTypes.LatLng> {\r\n    return this._circles.get(circle).then((c) => c.getCenter());\r\n  }\r\n\r\n  getRadius(circle: AgmCircle): Promise<number> {\r\n    return this._circles.get(circle).then((c) => c.getRadius());\r\n  }\r\n\r\n  setCenter(circle: AgmCircle): Promise<void> {\r\n    return this._circles.get(circle).then(\r\n        (c) => { return c.setCenter({lat: circle.latitude, lng: circle.longitude}); });\r\n  }\r\n\r\n  setEditable(circle: AgmCircle): Promise<void> {\r\n    return this._circles.get(circle).then((c) => { return c.setEditable(circle.editable); });\r\n  }\r\n\r\n  setDraggable(circle: AgmCircle): Promise<void> {\r\n    return this._circles.get(circle).then((c) => { return c.setDraggable(circle.draggable); });\r\n  }\r\n\r\n  setVisible(circle: AgmCircle): Promise<void> {\r\n    return this._circles.get(circle).then((c) => { return c.setVisible(circle.visible); });\r\n  }\r\n\r\n  setRadius(circle: AgmCircle): Promise<void> {\r\n    return this._circles.get(circle).then((c) => { return c.setRadius(circle.radius); });\r\n  }\r\n\r\n  getNativeCircle(circle: AgmCircle): Promise<mapTypes.Circle> {\r\n    return this._circles.get(circle);\r\n  }\r\n\r\n  createEventObservable<T>(eventName: string, circle: AgmCircle): Observable<T> {\r\n    return new Observable((observer: Observer<T>) => {\r\n      let listener: mapTypes.MapsEventListener = null;\r\n      this._circles.get(circle).then((c) => {\r\n        listener = c.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n\r\n      return () => {\r\n        if (listener !== null) {\r\n          listener.remove();\r\n        }\r\n      };\r\n    });\r\n  }\r\n}\r\n","import { Directive, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChange } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { MouseEvent } from '../map-types';\r\nimport { LatLng, LatLngBounds, LatLngLiteral, MouseEvent as MapMouseEvent } from '../services/google-maps-types';\r\nimport { CircleManager } from '../services/managers/circle-manager';\r\n\r\n@Directive({\r\n  selector: 'agm-circle',\r\n})\r\nexport class AgmCircle implements OnInit, OnChanges, OnDestroy {\r\n  /**\r\n   * The latitude position of the circle (required).\r\n   */\r\n  @Input() latitude: number;\r\n\r\n  /**\r\n   * The clickable position of the circle (required).\r\n   */\r\n  @Input() longitude: number;\r\n\r\n  /**\r\n   * Indicates whether this Circle handles mouse events. Defaults to true.\r\n   */\r\n  @Input() clickable = true;\r\n\r\n  /**\r\n   * If set to true, the user can drag this circle over the map. Defaults to false.\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('circleDraggable') draggable = false;\r\n\r\n  /**\r\n   * If set to true, the user can edit this circle by dragging the control points shown at\r\n   * the center and around the circumference of the circle. Defaults to false.\r\n   */\r\n  @Input() editable = false;\r\n\r\n  /**\r\n   * The fill color. All CSS3 colors are supported except for extended named colors.\r\n   */\r\n  @Input() fillColor: string;\r\n\r\n  /**\r\n   * The fill opacity between 0.0 and 1.0.\r\n   */\r\n  @Input() fillOpacity: number;\r\n\r\n  /**\r\n   * The radius in meters on the Earth's surface.\r\n   */\r\n  @Input() radius = 0;\r\n\r\n  /**\r\n   * The stroke color. All CSS3 colors are supported except for extended named colors.\r\n   */\r\n  @Input() strokeColor: string;\r\n\r\n  /**\r\n   * The stroke opacity between 0.0 and 1.0\r\n   */\r\n  @Input() strokeOpacity: number;\r\n\r\n  /**\r\n   * The stroke position. Defaults to CENTER.\r\n   * This property is not supported on Internet Explorer 8 and earlier.\r\n   */\r\n  @Input() strokePosition: 'CENTER' | 'INSIDE' | 'OUTSIDE' = 'CENTER';\r\n\r\n  /**\r\n   * The stroke width in pixels.\r\n   */\r\n  @Input() strokeWeight = 0;\r\n\r\n  /**\r\n   * Whether this circle is visible on the map. Defaults to true.\r\n   */\r\n  @Input() visible = true;\r\n\r\n  /**\r\n   * The zIndex compared to other polys.\r\n   */\r\n  @Input() zIndex: number;\r\n\r\n  /**\r\n   * This event is fired when the circle's center is changed.\r\n   */\r\n  @Output() centerChange: EventEmitter<LatLngLiteral> = new EventEmitter<LatLngLiteral>();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the circle.\r\n   */\r\n  @Output() circleClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the circle.\r\n   */\r\n  @Output() circleDblClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is repeatedly fired while the user drags the circle.\r\n   */\r\n  @Output() drag: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user stops dragging the circle.\r\n   */\r\n  @Output() dragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user starts dragging the circle.\r\n   */\r\n  @Output() dragStart: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousedown event is fired on the circle.\r\n   */\r\n  @Output() mouseDown: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousemove event is fired on the circle.\r\n   */\r\n  @Output() mouseMove: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on circle mouseout.\r\n   */\r\n  @Output() mouseOut: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on circle mouseover.\r\n   */\r\n  @Output() mouseOver: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mouseup event is fired on the circle.\r\n   */\r\n  @Output() mouseUp: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the circle's radius is changed.\r\n   */\r\n  @Output() radiusChange: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n  /**\r\n   * This event is fired when the circle is right-clicked on.\r\n   */\r\n  @Output() rightClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  private _circleAddedToManager = false;\r\n\r\n  private static _mapOptions: string[] = [\r\n    'fillColor', 'fillOpacity', 'strokeColor', 'strokeOpacity', 'strokePosition', 'strokeWeight',\r\n    'visible', 'zIndex', 'clickable',\r\n  ];\r\n\r\n  private _eventSubscriptions: Subscription[] = [];\r\n\r\n  constructor(private _manager: CircleManager) {}\r\n\r\n  /** @internal */\r\n  ngOnInit() {\r\n    this._manager.addCircle(this);\r\n    this._circleAddedToManager = true;\r\n    this._registerEventListeners();\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnChanges(changes: {[key: string]: SimpleChange}) {\r\n    if (!this._circleAddedToManager) {\r\n      return;\r\n    }\r\n    if (changes['latitude'] || changes['longitude']) {\r\n      this._manager.setCenter(this);\r\n    }\r\n    if (changes['editable']) {\r\n      this._manager.setEditable(this);\r\n    }\r\n    if (changes['draggable']) {\r\n      this._manager.setDraggable(this);\r\n    }\r\n    if (changes['visible']) {\r\n      this._manager.setVisible(this);\r\n    }\r\n    if (changes['radius']) {\r\n      this._manager.setRadius(this);\r\n    }\r\n    this._updateCircleOptionsChanges(changes);\r\n  }\r\n\r\n  private _updateCircleOptionsChanges(changes: {[propName: string]: SimpleChange}) {\r\n    let options: {[propName: string]: any} = {};\r\n    let optionKeys =\r\n        Object.keys(changes).filter(k => AgmCircle._mapOptions.indexOf(k) !== -1);\r\n    optionKeys.forEach((k) => { options[k] = changes[k].currentValue; });\r\n    if (optionKeys.length > 0) {\r\n      this._manager.setOptions(this, options);\r\n    }\r\n  }\r\n\r\n  private _registerEventListeners() {\r\n    let events: Map<string, EventEmitter<any>> = new Map<string, EventEmitter<any>>();\r\n    events.set('center_changed', this.centerChange);\r\n    events.set('click', this.circleClick);\r\n    events.set('dblclick', this.circleDblClick);\r\n    events.set('drag', this.drag);\r\n    events.set('dragend', this.dragEnd);\r\n    events.set('dragstart', this.dragStart);\r\n    events.set('mousedown', this.mouseDown);\r\n    events.set('mousemove', this.mouseMove);\r\n    events.set('mouseout', this.mouseOut);\r\n    events.set('mouseover', this.mouseOver);\r\n    events.set('mouseup', this.mouseUp);\r\n    events.set('radius_changed', this.radiusChange);\r\n    events.set('rightclick', this.rightClick);\r\n\r\n    events.forEach((eventEmitter, eventName) => {\r\n      this._eventSubscriptions.push(\r\n          this._manager.createEventObservable<MapMouseEvent>(eventName, this).subscribe((value) => {\r\n            switch (eventName) {\r\n              case 'radius_changed':\r\n                this._manager.getRadius(this).then((radius) => eventEmitter.emit(radius));\r\n                break;\r\n              case 'center_changed':\r\n                this._manager.getCenter(this).then(\r\n                    (center) =>\r\n                        eventEmitter.emit({lat: center.lat(), lng: center.lng()} as LatLngLiteral));\r\n                break;\r\n              default:\r\n                eventEmitter.emit(\r\n                    {coords: {lat: value.latLng.lat(), lng: value.latLng.lng()}} as MouseEvent);\r\n            }\r\n          }));\r\n    });\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._eventSubscriptions.forEach(function(s: Subscription) { s.unsubscribe(); });\r\n    this._eventSubscriptions = null;\r\n    this._manager.removeCircle(this);\r\n  }\r\n\r\n  /**\r\n   * Gets the LatLngBounds of this Circle.\r\n   */\r\n  getBounds(): Promise<LatLngBounds> { return this._manager.getBounds(this); }\r\n\r\n  getCenter(): Promise<LatLng> { return this._manager.getCenter(this); }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport { AgmDataLayer } from './../../directives/data-layer';\r\nimport { GoogleMapsAPIWrapper } from './../google-maps-api-wrapper';\r\nimport { Data, DataOptions, Feature } from './../google-maps-types';\r\n\r\n/**\r\n * Manages all Data Layers for a Google Map instance.\r\n */\r\n@Injectable()\r\nexport class DataLayerManager {\r\n  private _layers: Map<AgmDataLayer, Promise<Data>> =\r\n  new Map<AgmDataLayer, Promise<Data>>();\r\n\r\n  constructor(private _wrapper: GoogleMapsAPIWrapper, private _zone: NgZone) { }\r\n\r\n  /**\r\n   * Adds a new Data Layer to the map.\r\n   */\r\n  addDataLayer(layer: AgmDataLayer) {\r\n    const newLayer = this._wrapper.createDataLayer({\r\n      style: layer.style,\r\n    } as DataOptions)\r\n    .then(d => {\r\n      if (layer.geoJson) {\r\n        this.getDataFeatures(d, layer.geoJson).then(features => d.features = features);\r\n      }\r\n      return d;\r\n    });\r\n    this._layers.set(layer, newLayer);\r\n  }\r\n\r\n  deleteDataLayer(layer: AgmDataLayer) {\r\n    this._layers.get(layer).then(l => {\r\n      l.setMap(null);\r\n      this._layers.delete(layer);\r\n    });\r\n  }\r\n\r\n  updateGeoJson(layer: AgmDataLayer, geoJson: Object | string) {\r\n    this._layers.get(layer).then(l => {\r\n      l.forEach(function (feature: Feature) {\r\n        l.remove(feature);\r\n\r\n        var index = l.features.indexOf(feature, 0);\r\n        if (index > -1) {\r\n          l.features.splice(index, 1);\r\n        }\r\n      });\r\n      this.getDataFeatures(l, geoJson).then(features => l.features = features);\r\n    });\r\n  }\r\n\r\n  setDataOptions(layer: AgmDataLayer, options: DataOptions)\r\n  {\r\n    this._layers.get(layer).then(l => {\r\n      l.setControlPosition(options.controlPosition);\r\n      l.setControls(options.controls);\r\n      l.setDrawingMode(options.drawingMode);\r\n      l.setStyle(options.style);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a Google Maps event listener for the given DataLayer as an Observable\r\n   */\r\n  createEventObservable<T>(eventName: string, layer: AgmDataLayer): Observable<T> {\r\n    return new Observable((observer: Observer<T>) => {\r\n      this._layers.get(layer).then((d: Data) => {\r\n        d.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Extract features from a geoJson using google.maps Data Class\r\n   * @param d : google.maps.Data class instance\r\n   * @param geoJson : url or geojson object\r\n   */\r\n  getDataFeatures(d: Data, geoJson: Object | string): Promise<Feature[]> {\r\n    return new Promise<Feature[]>((resolve, reject) => {\r\n        if (typeof geoJson === 'object') {\r\n          try {\r\n            const features = d.addGeoJson(geoJson);\r\n            resolve(features);\r\n          } catch (e) {\r\n            reject(e);\r\n          }\r\n        } else if (typeof geoJson === 'string') {\r\n          d.loadGeoJson(geoJson, null, resolve);\r\n        } else {\r\n          reject(`Impossible to extract features from geoJson: wrong argument type`);\r\n        }\r\n      });\r\n  }\r\n}\r\n","import { Directive, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { DataMouseEvent, DataOptions } from './../services/google-maps-types';\r\nimport { DataLayerManager } from './../services/managers/data-layer-manager';\r\n\r\nlet layerId = 0;\r\n\r\n/**\r\n * AgmDataLayer enables the user to add data layers to the map.\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import { Component } from 'angular2/core';\r\n * import { AgmMap, AgmDataLayer } from\r\n * 'angular-google-maps/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  directives: [AgmMap, AgmDataLayer],\r\n *  styles: [`\r\n *    .agm-container {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n * <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n * \t  <agm-data-layer [geoJson]=\"geoJsonObject\" (layerClick)=\"clicked($event)\" [style]=\"styleFunc\">\r\n * \t  </agm-data-layer>\r\n * </agm-map>\r\n *  `\r\n * })\r\n * export class MyMapCmp {\r\n *   lat: number = -25.274449;\r\n *   lng: number = 133.775060;\r\n *   zoom: number = 5;\r\n *\r\n * clicked(clickEvent) {\r\n *    console.log(clickEvent);\r\n *  }\r\n *\r\n *  styleFunc(feature) {\r\n *    return ({\r\n *      clickable: false,\r\n *      fillColor: feature.getProperty('color'),\r\n *      strokeWeight: 1\r\n *    });\r\n *  }\r\n *\r\n *  geoJsonObject: Object = {\r\n *    \"type\": \"FeatureCollection\",\r\n *    \"features\": [\r\n *      {\r\n *        \"type\": \"Feature\",\r\n *        \"properties\": {\r\n *          \"letter\": \"G\",\r\n *          \"color\": \"blue\",\r\n *          \"rank\": \"7\",\r\n *          \"ascii\": \"71\"\r\n *        },\r\n *        \"geometry\": {\r\n *          \"type\": \"Polygon\",\r\n *          \"coordinates\": [\r\n *            [\r\n *              [123.61, -22.14], [122.38, -21.73], [121.06, -21.69], [119.66, -22.22], [119.00, -23.40],\r\n *              [118.65, -24.76], [118.43, -26.07], [118.78, -27.56], [119.22, -28.57], [120.23, -29.49],\r\n *              [121.77, -29.87], [123.57, -29.64], [124.45, -29.03], [124.71, -27.95], [124.80, -26.70],\r\n *              [124.80, -25.60], [123.61, -25.64], [122.56, -25.64], [121.72, -25.72], [121.81, -26.62],\r\n *              [121.86, -26.98], [122.60, -26.90], [123.57, -27.05], [123.57, -27.68], [123.35, -28.18],\r\n *              [122.51, -28.38], [121.77, -28.26], [121.02, -27.91], [120.49, -27.21], [120.14, -26.50],\r\n *              [120.10, -25.64], [120.27, -24.52], [120.67, -23.68], [121.72, -23.32], [122.43, -23.48],\r\n *              [123.04, -24.04], [124.54, -24.28], [124.58, -23.20], [123.61, -22.14]\r\n *            ]\r\n *          ]\r\n *        }\r\n *      },\r\n *      {\r\n *        \"type\": \"Feature\",\r\n *        \"properties\": {\r\n *          \"letter\": \"o\",\r\n *          \"color\": \"red\",\r\n *          \"rank\": \"15\",\r\n *          \"ascii\": \"111\"\r\n *        },\r\n *        \"geometry\": {\r\n *          \"type\": \"Polygon\",\r\n *          \"coordinates\": [\r\n *            [\r\n *              [128.84, -25.76], [128.18, -25.60], [127.96, -25.52], [127.88, -25.52], [127.70, -25.60],\r\n *              [127.26, -25.79], [126.60, -26.11], [126.16, -26.78], [126.12, -27.68], [126.21, -28.42],\r\n *              [126.69, -29.49], [127.74, -29.80], [128.80, -29.72], [129.41, -29.03], [129.72, -27.95],\r\n *              [129.68, -27.21], [129.33, -26.23], [128.84, -25.76]\r\n *            ],\r\n *            [\r\n *              [128.45, -27.44], [128.32, -26.94], [127.70, -26.82], [127.35, -27.05], [127.17, -27.80],\r\n *              [127.57, -28.22], [128.10, -28.42], [128.49, -27.80], [128.45, -27.44]\r\n *            ]\r\n *          ]\r\n *        }\r\n *      },\r\n *      {\r\n *        \"type\": \"Feature\",\r\n *        \"properties\": {\r\n *          \"letter\": \"o\",\r\n *          \"color\": \"yellow\",\r\n *          \"rank\": \"15\",\r\n *          \"ascii\": \"111\"\r\n *        },\r\n *        \"geometry\": {\r\n *          \"type\": \"Polygon\",\r\n *          \"coordinates\": [\r\n *            [\r\n *              [131.87, -25.76], [131.35, -26.07], [130.95, -26.78], [130.82, -27.64], [130.86, -28.53],\r\n *              [131.26, -29.22], [131.92, -29.76], [132.45, -29.87], [133.06, -29.76], [133.72, -29.34],\r\n *              [134.07, -28.80], [134.20, -27.91], [134.07, -27.21], [133.81, -26.31], [133.37, -25.83],\r\n *              [132.71, -25.64], [131.87, -25.76]\r\n *            ],\r\n *            [\r\n *              [133.15, -27.17], [132.71, -26.86], [132.09, -26.90], [131.74, -27.56], [131.79, -28.26],\r\n *              [132.36, -28.45], [132.93, -28.34], [133.15, -27.76], [133.15, -27.17]\r\n *            ]\r\n *          ]\r\n *        }\r\n *      },\r\n *      {\r\n *        \"type\": \"Feature\",\r\n *        \"properties\": {\r\n *          \"letter\": \"g\",\r\n *          \"color\": \"blue\",\r\n *          \"rank\": \"7\",\r\n *          \"ascii\": \"103\"\r\n *        },\r\n *        \"geometry\": {\r\n *          \"type\": \"Polygon\",\r\n *          \"coordinates\": [\r\n *            [\r\n *              [138.12, -25.04], [136.84, -25.16], [135.96, -25.36], [135.26, -25.99], [135, -26.90],\r\n *              [135.04, -27.91], [135.26, -28.88], [136.05, -29.45], [137.02, -29.49], [137.81, -29.49],\r\n *              [137.94, -29.99], [137.90, -31.20], [137.85, -32.24], [136.88, -32.69], [136.45, -32.36],\r\n *              [136.27, -31.80], [134.95, -31.84], [135.17, -32.99], [135.52, -33.43], [136.14, -33.76],\r\n *              [137.06, -33.83], [138.12, -33.65], [138.86, -33.21], [139.30, -32.28], [139.30, -31.24],\r\n *              [139.30, -30.14], [139.21, -28.96], [139.17, -28.22], [139.08, -27.41], [139.08, -26.47],\r\n *              [138.99, -25.40], [138.73, -25.00], [138.12, -25.04]\r\n *            ],\r\n *            [\r\n *              [137.50, -26.54], [136.97, -26.47], [136.49, -26.58], [136.31, -27.13], [136.31, -27.72],\r\n *              [136.58, -27.99], [137.50, -28.03], [137.68, -27.68], [137.59, -26.78], [137.50, -26.54]\r\n *            ]\r\n *          ]\r\n *        }\r\n *      },\r\n *      {\r\n *        \"type\": \"Feature\",\r\n *        \"properties\": {\r\n *          \"letter\": \"l\",\r\n *          \"color\": \"green\",\r\n *          \"rank\": \"12\",\r\n *          \"ascii\": \"108\"\r\n *        },\r\n *        \"geometry\": {\r\n *          \"type\": \"Polygon\",\r\n *          \"coordinates\": [\r\n *            [\r\n *              [140.14, -21.04], [140.31, -29.42], [141.67, -29.49], [141.59, -20.92], [140.14, -21.04]\r\n *            ]\r\n *          ]\r\n *        }\r\n *      },\r\n *      {\r\n *        \"type\": \"Feature\",\r\n *        \"properties\": {\r\n *          \"letter\": \"e\",\r\n *          \"color\": \"red\",\r\n *          \"rank\": \"5\",\r\n *          \"ascii\": \"101\"\r\n *        },\r\n *        \"geometry\": {\r\n *          \"type\": \"Polygon\",\r\n *          \"coordinates\": [\r\n *            [\r\n *              [144.14, -27.41], [145.67, -27.52], [146.86, -27.09], [146.82, -25.64], [146.25, -25.04],\r\n *              [145.45, -24.68], [144.66, -24.60], [144.09, -24.76], [143.43, -25.08], [142.99, -25.40],\r\n *              [142.64, -26.03], [142.64, -27.05], [142.64, -28.26], [143.30, -29.11], [144.18, -29.57],\r\n *              [145.41, -29.64], [146.46, -29.19], [146.64, -28.72], [146.82, -28.14], [144.84, -28.42],\r\n *              [144.31, -28.26], [144.14, -27.41]\r\n *            ],\r\n *            [\r\n *              [144.18, -26.39], [144.53, -26.58], [145.19, -26.62], [145.72, -26.35], [145.81, -25.91],\r\n *              [145.41, -25.68], [144.97, -25.68], [144.49, -25.64], [144, -25.99], [144.18, -26.39]\r\n *            ]\r\n *          ]\r\n *        }\r\n *      }\r\n *    ]\r\n *  };\r\n * }\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'agm-data-layer',\r\n})\r\nexport class AgmDataLayer implements OnInit, OnDestroy, OnChanges {\r\n  private static _dataOptionsAttributes: Array<string> = ['style'];\r\n\r\n  private _addedToManager = false;\r\n  private _id: string = (layerId++).toString();\r\n  private _subscriptions: Subscription[] = [];\r\n\r\n  /**\r\n   * This event is fired when a feature in the layer is clicked.\r\n   */\r\n  @Output() layerClick: EventEmitter<DataMouseEvent> = new EventEmitter<DataMouseEvent>();\r\n\r\n  /**\r\n   * The geoJson to be displayed\r\n   */\r\n  @Input() geoJson: Object | string | null = null;\r\n\r\n  /**\r\n   * The layer's style function.\r\n   */\r\n  @Input() style: () => void;\r\n\r\n  constructor(private _manager: DataLayerManager) { }\r\n\r\n  ngOnInit() {\r\n    if (this._addedToManager) {\r\n      return;\r\n    }\r\n    this._manager.addDataLayer(this);\r\n    this._addedToManager = true;\r\n    this._addEventListeners();\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    const listeners = [\r\n      { name: 'click', handler: (ev: DataMouseEvent) => this.layerClick.emit(ev) },\r\n    ];\r\n    listeners.forEach((obj) => {\r\n      const os = this._manager.createEventObservable(obj.name, this).subscribe(obj.handler);\r\n      this._subscriptions.push(os);\r\n    });\r\n  }\r\n\r\n  /** @internal */\r\n  id(): string { return this._id; }\r\n\r\n  /** @internal */\r\n  toString(): string { return `AgmDataLayer-${this._id.toString()}`; }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._manager.deleteDataLayer(this);\r\n    // unsubscribe all registered observable subscriptions\r\n    this._subscriptions.forEach(s => s.unsubscribe());\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (!this._addedToManager) {\r\n      return;\r\n    }\r\n\r\n    var geoJsonChange = changes['geoJson'];\r\n    if (geoJsonChange) {\r\n      this._manager.updateGeoJson(this, geoJsonChange.currentValue);\r\n    }\r\n\r\n    let dataOptions: DataOptions = {};\r\n\r\n    AgmDataLayer._dataOptionsAttributes.forEach(k => (dataOptions as any)[k] = changes.hasOwnProperty(k) ? changes[k].currentValue : (this as any)[k]);\r\n\r\n    this._manager.setDataOptions(this, dataOptions);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, from, Observable, timer } from 'rxjs';\r\nimport {\r\n  flatMap,\r\n  map,\r\n  sample,\r\n  shareReplay,\r\n  switchMap,\r\n} from 'rxjs/operators';\r\nimport { LatLng, LatLngBounds, LatLngLiteral } from './google-maps-types';\r\nimport { MapsAPILoader } from './maps-api-loader/maps-api-loader';\r\n\r\ndeclare var google: any;\r\n\r\nexport interface FitBoundsDetails {\r\n  latLng: LatLng | LatLngLiteral;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type BoundsMap = Map<string, LatLng | LatLngLiteral>;\r\n\r\n/**\r\n * Class to implement when you what to be able to make it work with the auto fit bounds feature\r\n * of AGM.\r\n */\r\nexport abstract class FitBoundsAccessor {\r\n  abstract getFitBoundsDetails$(): Observable<FitBoundsDetails>;\r\n}\r\n\r\n/**\r\n * The FitBoundsService is responsible for computing the bounds of the a single map.\r\n */\r\n@Injectable()\r\nexport class FitBoundsService {\r\n  protected readonly bounds$: Observable<LatLngBounds>;\r\n  protected readonly _boundsChangeSampleTime$ = new BehaviorSubject<number>(200);\r\n  protected readonly _includeInBounds$ = new BehaviorSubject<BoundsMap>(new Map<string, LatLng | LatLngLiteral>());\r\n\r\n  constructor(loader: MapsAPILoader) {\r\n    this.bounds$ = from(loader.load()).pipe(\r\n      flatMap(() => this._includeInBounds$),\r\n      sample(\r\n        this._boundsChangeSampleTime$.pipe(switchMap(time => timer(0, time))),\r\n      ),\r\n      map(includeInBounds => this._generateBounds(includeInBounds)),\r\n      shareReplay(1),\r\n    );\r\n  }\r\n\r\n  private _generateBounds(\r\n    includeInBounds: Map<string, LatLng | LatLngLiteral>,\r\n  ) {\r\n    const bounds = new google.maps.LatLngBounds() as LatLngBounds;\r\n    includeInBounds.forEach(b => bounds.extend(b));\r\n    return bounds;\r\n  }\r\n\r\n  addToBounds(latLng: LatLng | LatLngLiteral) {\r\n    const id = this._createIdentifier(latLng);\r\n    if (this._includeInBounds$.value.has(id)) {\r\n      return;\r\n    }\r\n    const map = this._includeInBounds$.value;\r\n    map.set(id, latLng);\r\n    this._includeInBounds$.next(map);\r\n  }\r\n\r\n  removeFromBounds(latLng: LatLng | LatLngLiteral) {\r\n    const map = this._includeInBounds$.value;\r\n    map.delete(this._createIdentifier(latLng));\r\n    this._includeInBounds$.next(map);\r\n  }\r\n\r\n  changeFitBoundsChangeSampleTime(timeMs: number) {\r\n    this._boundsChangeSampleTime$.next(timeMs);\r\n  }\r\n\r\n  getBounds$(): Observable<LatLngBounds> {\r\n    return this.bounds$;\r\n  }\r\n\r\n  protected _createIdentifier(latLng: LatLng | LatLngLiteral): string {\r\n    return `${latLng.lat}+${latLng.lng}`;\r\n  }\r\n}\r\n","import { Directive, Input, OnChanges, OnDestroy, OnInit, Self } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { distinctUntilChanged, takeUntil } from 'rxjs/operators';\r\n\r\nimport { FitBoundsAccessor, FitBoundsDetails, FitBoundsService } from '../services/fit-bounds';\r\n\r\n/**\r\n * Adds the given directive to the auto fit bounds feature when the value is true.\r\n * To make it work with you custom AGM component, you also have to implement the {@link FitBoundsAccessor} abstract class.\r\n * @example\r\n * <agm-marker [agmFitBounds]=\"true\"></agm-marker>\r\n */\r\n@Directive({\r\n  selector: '[agmFitBounds]',\r\n})\r\nexport class AgmFitBounds implements OnInit, OnDestroy, OnChanges {\r\n  /**\r\n   * If the value is true, the element gets added to the bounds of the map.\r\n   * Default: true.\r\n   */\r\n  @Input() agmFitBounds = true;\r\n\r\n  private _destroyed$: Subject<void> = new Subject<void>();\r\n  private _latestFitBoundsDetails: FitBoundsDetails | null = null;\r\n\r\n  constructor(\r\n    @Self() private readonly _fitBoundsAccessor: FitBoundsAccessor,\r\n    private readonly _fitBoundsService: FitBoundsService,\r\n  ) {}\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  ngOnChanges() {\r\n    this._updateBounds();\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  ngOnInit() {\r\n    this._fitBoundsAccessor\r\n      .getFitBoundsDetails$()\r\n      .pipe(\r\n        distinctUntilChanged(\r\n          (x: FitBoundsDetails, y: FitBoundsDetails) =>\r\n            x.latLng.lat === y.latLng.lat && x.latLng.lng === y.latLng.lng,\r\n        ),\r\n        takeUntil(this._destroyed$),\r\n      )\r\n      .subscribe(details => this._updateBounds(details));\r\n  }\r\n\r\n  /*\r\n   Either the location changed, or visible status changed.\r\n   Possible state changes are\r\n   invisible -> visible\r\n   visible -> invisible\r\n   visible -> visible (new location)\r\n  */\r\n  private _updateBounds(newFitBoundsDetails?: FitBoundsDetails) {\r\n    // either visibility will change, or location, so remove the old one anyway\r\n    if (this._latestFitBoundsDetails) {\r\n      this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng);\r\n      // don't set latestFitBoundsDetails to null, because we can toggle visibility from\r\n      // true -> false -> true, in which case we still need old value cached here\r\n    }\r\n\r\n    if (newFitBoundsDetails) {\r\n      this._latestFitBoundsDetails = newFitBoundsDetails;\r\n    }\r\n    if (!this._latestFitBoundsDetails) {\r\n      return;\r\n    }\r\n    if (this.agmFitBounds === true) {\r\n      this._fitBoundsService.addToBounds(this._latestFitBoundsDetails.latLng);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  ngOnDestroy() {\r\n    this._destroyed$.next();\r\n    this._destroyed$.complete();\r\n    if (this._latestFitBoundsDetails !== null) {\r\n      this._fitBoundsService.removeFromBounds(this._latestFitBoundsDetails.latLng);\r\n    }\r\n  }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport { AgmMarker } from './../../directives/marker';\r\n\r\nimport { GoogleMapsAPIWrapper } from './../google-maps-api-wrapper';\r\nimport { Marker } from './../google-maps-types';\r\n\r\ndeclare var google: any;\r\n\r\n@Injectable()\r\nexport class MarkerManager {\r\n  protected _markers: Map<AgmMarker, Promise<Marker>> =\r\n      new Map<AgmMarker, Promise<Marker>>();\r\n\r\n  constructor(protected _mapsWrapper: GoogleMapsAPIWrapper, protected _zone: NgZone) {}\r\n\r\n  async convertAnimation(uiAnim: 'BOUNCE' | 'DROP' | null): Promise<any>{\r\n    if (uiAnim === null) {\r\n      return null;\r\n    } else {\r\n      return this._mapsWrapper.getNativeMap().then(() => google.maps.Animation[uiAnim]);\r\n    }\r\n  }\r\n\r\n  deleteMarker(marker: AgmMarker): Promise<void> {\r\n    const m = this._markers.get(marker);\r\n    if (m == null) {\r\n      // marker already deleted\r\n      return Promise.resolve();\r\n    }\r\n    return m.then((m: Marker) => {\r\n      return this._zone.run(() => {\r\n        m.setMap(null);\r\n        this._markers.delete(marker);\r\n      });\r\n    });\r\n  }\r\n\r\n  updateMarkerPosition(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then(\r\n        (m: Marker) => m.setPosition({lat: marker.latitude, lng: marker.longitude}));\r\n  }\r\n\r\n  updateTitle(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setTitle(marker.title));\r\n  }\r\n\r\n  updateLabel(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => { m.setLabel(marker.label); });\r\n  }\r\n\r\n  updateDraggable(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setDraggable(marker.draggable));\r\n  }\r\n\r\n  updateIcon(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setIcon(marker.iconUrl));\r\n  }\r\n\r\n  updateOpacity(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setOpacity(marker.opacity));\r\n  }\r\n\r\n  updateVisible(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setVisible(marker.visible));\r\n  }\r\n\r\n  updateZIndex(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setZIndex(marker.zIndex));\r\n  }\r\n\r\n  updateClickable(marker: AgmMarker): Promise<void> {\r\n    return this._markers.get(marker).then((m: Marker) => m.setClickable(marker.clickable));\r\n  }\r\n\r\n  async updateAnimation(marker: AgmMarker) {\r\n    const m = await this._markers.get(marker);\r\n    m.setAnimation(await this.convertAnimation(marker.animation));\r\n  }\r\n\r\n  addMarker(marker: AgmMarker) {\r\n    const markerPromise = new Promise<Marker>(async (resolve) =>\r\n     this._mapsWrapper.createMarker({\r\n        position: {lat: marker.latitude, lng: marker.longitude},\r\n        label: marker.label,\r\n        draggable: marker.draggable,\r\n        icon: marker.iconUrl,\r\n        opacity: marker.opacity,\r\n        visible: marker.visible,\r\n        zIndex: marker.zIndex,\r\n        title: marker.title,\r\n        clickable: marker.clickable,\r\n        animation: await this.convertAnimation(marker.animation),\r\n      }).then(resolve));\r\n    this._markers.set(marker, markerPromise);\r\n  }\r\n\r\n  getNativeMarker(marker: AgmMarker): Promise<Marker> {\r\n    return this._markers.get(marker);\r\n  }\r\n\r\n  createEventObservable<T>(eventName: string, marker: AgmMarker): Observable<T> {\r\n    return new Observable((observer: Observer<T>) => {\r\n      this._markers.get(marker).then((m: Marker) => {\r\n        m.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport { AgmInfoWindow } from '../../directives/info-window';\r\n\r\nimport { GoogleMapsAPIWrapper } from '../google-maps-api-wrapper';\r\nimport { InfoWindow, InfoWindowOptions } from '../google-maps-types';\r\nimport { MarkerManager } from './marker-manager';\r\n\r\n@Injectable()\r\nexport class InfoWindowManager {\r\n  private _infoWindows: Map<AgmInfoWindow, Promise<InfoWindow>> =\r\n      new Map<AgmInfoWindow, Promise<InfoWindow>>();\r\n\r\n  constructor(\r\n      private _mapsWrapper: GoogleMapsAPIWrapper, private _zone: NgZone,\r\n      private _markerManager: MarkerManager) {}\r\n\r\n  deleteInfoWindow(infoWindow: AgmInfoWindow): Promise<void> {\r\n    const iWindow = this._infoWindows.get(infoWindow);\r\n    if (iWindow == null) {\r\n      // info window already deleted\r\n      return Promise.resolve();\r\n    }\r\n    return iWindow.then((i: InfoWindow) => {\r\n      return this._zone.run(() => {\r\n        i.close();\r\n        this._infoWindows.delete(infoWindow);\r\n      });\r\n    });\r\n  }\r\n\r\n  setPosition(infoWindow: AgmInfoWindow): Promise<void> {\r\n    return this._infoWindows.get(infoWindow).then((i: InfoWindow) => i.setPosition({\r\n      lat: infoWindow.latitude,\r\n      lng: infoWindow.longitude,\r\n    }));\r\n  }\r\n\r\n  setZIndex(infoWindow: AgmInfoWindow): Promise<void> {\r\n    return this._infoWindows.get(infoWindow)\r\n        .then((i: InfoWindow) => i.setZIndex(infoWindow.zIndex));\r\n  }\r\n\r\n  open(infoWindow: AgmInfoWindow): Promise<void> {\r\n    return this._infoWindows.get(infoWindow).then((w) => {\r\n      if (infoWindow.hostMarker != null) {\r\n        return this._markerManager.getNativeMarker(infoWindow.hostMarker).then((marker) => {\r\n          return this._mapsWrapper.getNativeMap().then((map) => w.open(map, marker));\r\n        });\r\n      }\r\n      return this._mapsWrapper.getNativeMap().then((map) => w.open(map));\r\n    });\r\n  }\r\n\r\n  close(infoWindow: AgmInfoWindow): Promise<void> {\r\n    return this._infoWindows.get(infoWindow).then((w) => w.close());\r\n  }\r\n\r\n  setOptions(infoWindow: AgmInfoWindow, options: InfoWindowOptions) {\r\n    return this._infoWindows.get(infoWindow).then((i: InfoWindow) => i.setOptions(options));\r\n  }\r\n\r\n  addInfoWindow(infoWindow: AgmInfoWindow) {\r\n    const options: InfoWindowOptions = {\r\n      content: infoWindow.content,\r\n      maxWidth: infoWindow.maxWidth,\r\n      zIndex: infoWindow.zIndex,\r\n      disableAutoPan: infoWindow.disableAutoPan,\r\n    };\r\n    if (typeof infoWindow.latitude === 'number' && typeof infoWindow.longitude === 'number') {\r\n      options.position = {lat: infoWindow.latitude, lng: infoWindow.longitude};\r\n    }\r\n    const infoWindowPromise = this._mapsWrapper.createInfoWindow(options);\r\n    this._infoWindows.set(infoWindow, infoWindowPromise);\r\n  }\r\n\r\n   /**\r\n    * Creates a Google Maps event listener for the given InfoWindow as an Observable\r\n    */\r\n  createEventObservable<T>(eventName: string, infoWindow: AgmInfoWindow): Observable<T> {\r\n    return new Observable((observer: Observer<T>) => {\r\n      this._infoWindows.get(infoWindow).then((i: InfoWindow) => {\r\n        i.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { Component, ElementRef, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChange } from '@angular/core';\r\n\r\nimport { InfoWindowManager } from '../services/managers/info-window-manager';\r\n\r\nimport { AgmMarker } from './marker';\r\n\r\nlet infoWindowId = 0;\r\n\r\n/**\r\n * AgmInfoWindow renders a info window inside a {@link AgmMarker} or standalone.\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import { Component } from '@angular/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  styles: [`\r\n *    .agm-map-container {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n *    <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *      <agm-marker [latitude]=\"lat\" [longitude]=\"lng\" [label]=\"'M'\">\r\n *        <agm-info-window [disableAutoPan]=\"true\">\r\n *          Hi, this is the content of the <strong>info window</strong>\r\n *        </agm-info-window>\r\n *      </agm-marker>\r\n *    </agm-map>\r\n *  `\r\n * })\r\n * ```\r\n */\r\n@Component({\r\n  selector: 'agm-info-window',\r\n  template: `<div class='agm-info-window-content'>\r\n      <ng-content></ng-content>\r\n    </div>\r\n  `,\r\n})\r\nexport class AgmInfoWindow implements OnDestroy, OnChanges, OnInit {\r\n  /**\r\n   * The latitude position of the info window (only usefull if you use it ouside of a {@link\r\n   * AgmMarker}).\r\n   */\r\n  @Input() latitude: number;\r\n\r\n  /**\r\n   * The longitude position of the info window (only usefull if you use it ouside of a {@link\r\n   * AgmMarker}).\r\n   */\r\n  @Input() longitude: number;\r\n\r\n  /**\r\n   * Disable auto-pan on open. By default, the info window will pan the map so that it is fully\r\n   * visible when it opens.\r\n   */\r\n  @Input() disableAutoPan: boolean;\r\n\r\n  /**\r\n   * All InfoWindows are displayed on the map in order of their zIndex, with higher values\r\n   * displaying in front of InfoWindows with lower values. By default, InfoWindows are displayed\r\n   * according to their latitude, with InfoWindows of lower latitudes appearing in front of\r\n   * InfoWindows at higher latitudes. InfoWindows are always displayed in front of markers.\r\n   */\r\n  @Input() zIndex: number;\r\n\r\n  /**\r\n   * Maximum width of the infowindow, regardless of content's width. This value is only considered\r\n   * if it is set before a call to open. To change the maximum width when changing content, call\r\n   * close, update maxWidth, and then open.\r\n   */\r\n  @Input() maxWidth: number;\r\n\r\n  /**\r\n   * Holds the marker that is the host of the info window (if available)\r\n   */\r\n  hostMarker: AgmMarker;\r\n\r\n  /**\r\n   * Holds the native element that is used for the info window content.\r\n   */\r\n  content: Node;\r\n\r\n  /**\r\n   * Sets the open state for the InfoWindow. You can also call the open() and close() methods.\r\n   */\r\n  @Input() isOpen = false;\r\n\r\n  /**\r\n   * Emits an event when the info window is closed.\r\n   */\r\n  @Output() infoWindowClose: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  private static _infoWindowOptionsInputs: string[] = ['disableAutoPan', 'maxWidth'];\r\n  private _infoWindowAddedToManager = false;\r\n  private _id: string = (infoWindowId++).toString();\r\n\r\n  constructor(private _infoWindowManager: InfoWindowManager, private _el: ElementRef) {}\r\n\r\n  ngOnInit() {\r\n    this.content = this._el.nativeElement.querySelector('.agm-info-window-content');\r\n    this._infoWindowManager.addInfoWindow(this);\r\n    this._infoWindowAddedToManager = true;\r\n    this._updateOpenState();\r\n    this._registerEventListeners();\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnChanges(changes: {[key: string]: SimpleChange}) {\r\n    if (!this._infoWindowAddedToManager) {\r\n      return;\r\n    }\r\n    if ((changes['latitude'] || changes['longitude']) && typeof this.latitude === 'number' &&\r\n        typeof this.longitude === 'number') {\r\n      this._infoWindowManager.setPosition(this);\r\n    }\r\n    if (changes['zIndex']) {\r\n      this._infoWindowManager.setZIndex(this);\r\n    }\r\n    if (changes['isOpen']) {\r\n      this._updateOpenState();\r\n    }\r\n    this._setInfoWindowOptions(changes);\r\n  }\r\n\r\n  private _registerEventListeners() {\r\n    this._infoWindowManager.createEventObservable('closeclick', this).subscribe(() => {\r\n      this.isOpen = false;\r\n      this.infoWindowClose.emit();\r\n    });\r\n  }\r\n\r\n  private _updateOpenState() {\r\n    this.isOpen ? this.open() : this.close();\r\n  }\r\n\r\n  private _setInfoWindowOptions(changes: {[key: string]: SimpleChange}) {\r\n    let options: {[propName: string]: any} = {};\r\n    let optionKeys = Object.keys(changes).filter(\r\n        k => AgmInfoWindow._infoWindowOptionsInputs.indexOf(k) !== -1);\r\n    optionKeys.forEach((k) => { options[k] = changes[k].currentValue; });\r\n    this._infoWindowManager.setOptions(this, options);\r\n  }\r\n\r\n  /**\r\n   * Opens the info window.\r\n   */\r\n  open(): Promise<void> { return this._infoWindowManager.open(this); }\r\n\r\n  /**\r\n   * Closes the info window.\r\n   */\r\n  close(): Promise<void> {\r\n    return this._infoWindowManager.close(this).then(() => { this.infoWindowClose.emit(); });\r\n  }\r\n\r\n  /** @internal */\r\n  id(): string { return this._id; }\r\n\r\n  /** @internal */\r\n  toString(): string { return 'AgmInfoWindow-' + this._id.toString(); }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() { this._infoWindowManager.deleteInfoWindow(this); }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport { AgmKmlLayer } from './../../directives/kml-layer';\r\nimport { GoogleMapsAPIWrapper } from './../google-maps-api-wrapper';\r\nimport { KmlLayer, KmlLayerOptions } from './../google-maps-types';\r\n\r\ndeclare var google: any;\r\n\r\n/**\r\n * Manages all KML Layers for a Google Map instance.\r\n */\r\n@Injectable()\r\nexport class KmlLayerManager {\r\n  private _layers: Map<AgmKmlLayer, Promise<KmlLayer>> =\r\n      new Map<AgmKmlLayer, Promise<KmlLayer>>();\r\n\r\n  constructor(private _wrapper: GoogleMapsAPIWrapper, private _zone: NgZone) {}\r\n\r\n  /**\r\n   * Adds a new KML Layer to the map.\r\n   */\r\n  addKmlLayer(layer: AgmKmlLayer) {\r\n    const newLayer = this._wrapper.getNativeMap().then(m => {\r\n      return new google.maps.KmlLayer({\r\n        clickable: layer.clickable,\r\n        map: m,\r\n        preserveViewport: layer.preserveViewport,\r\n        screenOverlays: layer.screenOverlays,\r\n        suppressInfoWindows: layer.suppressInfoWindows,\r\n        url: layer.url,\r\n        zIndex: layer.zIndex,\r\n      } as KmlLayerOptions);\r\n    });\r\n    this._layers.set(layer, newLayer);\r\n  }\r\n\r\n  setOptions(layer: AgmKmlLayer, options: KmlLayerOptions) {\r\n    this._layers.get(layer).then(l => l.setOptions(options));\r\n  }\r\n\r\n  deleteKmlLayer(layer: AgmKmlLayer) {\r\n    this._layers.get(layer).then(l => {\r\n      l.setMap(null);\r\n      this._layers.delete(layer);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a Google Maps event listener for the given KmlLayer as an Observable\r\n   */\r\n  createEventObservable<T>(eventName: string, layer: AgmKmlLayer): Observable<T> {\r\n    return new Observable((observer: Observer<T>) => {\r\n      this._layers.get(layer).then((m: KmlLayer) => {\r\n        m.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { Directive, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { KmlMouseEvent } from './../services/google-maps-types';\r\nimport { KmlLayerManager } from './../services/managers/kml-layer-manager';\r\n\r\nlet layerId = 0;\r\n\r\n@Directive({\r\n  selector: 'agm-kml-layer',\r\n})\r\nexport class AgmKmlLayer implements OnInit, OnDestroy, OnChanges {\r\n  private _addedToManager = false;\r\n  private _id: string = (layerId++).toString();\r\n  private _subscriptions: Subscription[] = [];\r\n  private static _kmlLayerOptions: string[] =\r\n      ['clickable', 'preserveViewport', 'screenOverlays', 'suppressInfoWindows', 'url', 'zIndex'];\r\n\r\n  /**\r\n   * If true, the layer receives mouse events. Default value is true.\r\n   */\r\n  @Input() clickable = true;\r\n\r\n  /**\r\n   * By default, the input map is centered and zoomed to the bounding box of the contents of the\r\n   * layer.\r\n   * If this option is set to true, the viewport is left unchanged, unless the map's center and zoom\r\n   * were never set.\r\n   */\r\n  @Input() preserveViewport = false;\r\n\r\n  /**\r\n   * Whether to render the screen overlays. Default true.\r\n   */\r\n  @Input() screenOverlays = true;\r\n\r\n  /**\r\n   * Suppress the rendering of info windows when layer features are clicked.\r\n   */\r\n  @Input() suppressInfoWindows = false;\r\n\r\n  /**\r\n   * The URL of the KML document to display.\r\n   */\r\n  @Input() url: string = null;\r\n\r\n  /**\r\n   * The z-index of the layer.\r\n   */\r\n  @Input() zIndex: number | null = null;\r\n\r\n  /**\r\n   * This event is fired when a feature in the layer is clicked.\r\n   */\r\n  @Output() layerClick: EventEmitter<KmlMouseEvent> = new EventEmitter<KmlMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the KML layers default viewport has changed.\r\n   */\r\n  @Output() defaultViewportChange: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  /**\r\n   * This event is fired when the KML layer has finished loading.\r\n   * At this point it is safe to read the status property to determine if the layer loaded\r\n   * successfully.\r\n   */\r\n  @Output() statusChange: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  constructor(private _manager: KmlLayerManager) {}\r\n\r\n  ngOnInit() {\r\n    if (this._addedToManager) {\r\n      return;\r\n    }\r\n    this._manager.addKmlLayer(this);\r\n    this._addedToManager = true;\r\n    this._addEventListeners();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (!this._addedToManager) {\r\n      return;\r\n    }\r\n    this._updatePolygonOptions(changes);\r\n  }\r\n\r\n  private _updatePolygonOptions(changes: SimpleChanges) {\r\n    const options = Object.keys(changes)\r\n                        .filter(k => AgmKmlLayer._kmlLayerOptions.indexOf(k) !== -1)\r\n                        .reduce((obj: any, k: string) => {\r\n                          obj[k] = changes[k].currentValue;\r\n                          return obj;\r\n                        }, {});\r\n    if (Object.keys(options).length > 0) {\r\n      this._manager.setOptions(this, options);\r\n    }\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    const listeners = [\r\n      {name: 'click', handler: (ev: KmlMouseEvent) => this.layerClick.emit(ev)},\r\n      {name: 'defaultviewport_changed', handler: () => this.defaultViewportChange.emit()},\r\n      {name: 'status_changed', handler: () => this.statusChange.emit()},\r\n    ];\r\n    listeners.forEach((obj) => {\r\n      const os = this._manager.createEventObservable(obj.name, this).subscribe(obj.handler);\r\n      this._subscriptions.push(os);\r\n    });\r\n  }\r\n\r\n  /** @internal */\r\n  id(): string { return this._id; }\r\n\r\n  /** @internal */\r\n  toString(): string { return `AgmKmlLayer-${this._id.toString()}`; }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._manager.deleteKmlLayer(this);\r\n    // unsubscribe all registered observable subscriptions\r\n    this._subscriptions.forEach(s => s.unsubscribe());\r\n  }\r\n}\r\n","import { fromEventPattern, Observable } from 'rxjs';\r\nimport { MapsEventListener, MVCArray } from '../services/google-maps-types';\r\n\r\nexport function createMVCEventObservable<T>(array: MVCArray<T>): Observable<MVCEvent<T>>{\r\n  const eventNames = ['insert_at', 'remove_at', 'set_at'];\r\n  return fromEventPattern(\r\n    (handler: Function) => eventNames.map(evName => array.addListener(evName,\r\n      (index: number, previous?: T) => handler.apply(array, [ {'newArr': array.getArray(), evName, index, previous} as MVCEvent<T>]))),\r\n    (_handler: Function, evListeners: MapsEventListener[]) => evListeners.forEach(evListener => evListener.remove()));\r\n}\r\n\r\nexport interface MVCEvent<T> {\r\n  newArr: T[];\r\n  evName: MvcEventType;\r\n  index: number;\r\n  previous?: T;\r\n}\r\n\r\nexport type MvcEventType = 'insert_at' | 'remove_at' | 'set_at';\r\n\r\nexport class MvcArrayMock<T> implements MVCArray<T> {\r\n  private vals: T[] = [];\r\n  private listeners: {\r\n    'remove_at': Function[];\r\n    'insert_at': Function[];\r\n    'set_at': Function[];\r\n    [key: string]: Function[];\r\n  } = {\r\n    'remove_at': [] as Function[],\r\n    'insert_at': [] as Function[],\r\n    'set_at': [] as Function[],\r\n  };\r\n  clear(): void {\r\n    for (let i = this.vals.length - 1; i >= 0; i--) {\r\n        this.removeAt(i);\r\n    }\r\n  }\r\n  getArray(): T[] {\r\n    return [...this.vals];\r\n  }\r\n  getAt(i: number): T {\r\n    return this.vals[i];\r\n  }\r\n  getLength(): number {\r\n    return this.vals.length;\r\n  }\r\n  insertAt(i: number, elem: T): void {\r\n    this.vals.splice(i, 0, elem);\r\n    this.listeners.insert_at.map(listener => listener(i));\r\n  }\r\n  pop(): T {\r\n    const deleted = this.vals.pop();\r\n    this.listeners.remove_at.map(listener => listener(this.vals.length, deleted));\r\n    return deleted;\r\n  }\r\n  push(elem: T): number {\r\n    this.vals.push(elem);\r\n    this.listeners.insert_at.map(listener => listener(this.vals.length - 1));\r\n    return this.vals.length;\r\n  }\r\n  removeAt(i: number): T {\r\n    const deleted = this.vals.splice(i, 1)[0];\r\n    this.listeners.remove_at.map(listener => listener(i, deleted));\r\n    return deleted;\r\n  }\r\n  setAt(i: number, elem: T): void {\r\n    const deleted = this.vals[i];\r\n    this.vals[i] = elem;\r\n    this.listeners.set_at.map(listener => listener(i, deleted));\r\n  }\r\n  forEach(callback: (elem: T, i: number) => void): void {\r\n    this.vals.forEach(callback);\r\n  }\r\n  addListener(eventName: string, handler: Function): MapsEventListener {\r\n    const listenerArr = this.listeners[eventName];\r\n    listenerArr.push(handler);\r\n    return {\r\n        remove: () => {\r\n            listenerArr.splice(listenerArr.indexOf(handler), 1);\r\n        },\r\n    };\r\n  }\r\n}\r\n","export var google: any;\r\n\r\nexport interface MVCObject {\r\n  addListener(eventName: string, handler: Function): MapsEventListener;\r\n}\r\n\r\nexport interface MVCArray<T> extends MVCObject {\r\n  clear(): void;\r\n  getArray(): Array<T>;\r\n  getAt(i: number): T;\r\n  getLength(): number;\r\n  insertAt(i: number, elem: T): void;\r\n  pop(): T;\r\n  push(elem: T): number;\r\n  removeAt(i: number): T;\r\n  setAt(i: number, elem: T): void;\r\n  /* tslint:disable */\r\n  /*\r\n  * Tslint configuration check-parameters will prompt errors for these lines of code.\r\n  * https://palantir.github.io/tslint/rules/no-unused-variable/\r\n  */\r\n  forEach(callback: (elem: T, i: number) => void): void;\r\n  /* tslint:enable */\r\n}\r\n\r\nexport interface GoogleMap extends MVCObject {\r\n  data?: Data;\r\n  panTo(latLng: LatLng | LatLngLiteral): void;\r\n  panBy(x: number, y: number): void;\r\n  setZoom(zoom: number): void;\r\n  getCenter(): LatLng;\r\n  setCenter(latLng: LatLng | LatLngLiteral): void;\r\n  getBounds(): LatLngBounds;\r\n  getMapTypeId(): MapTypeId;\r\n  getZoom(): number;\r\n  setOptions(options: MapOptions): void;\r\n  panToBounds(latLngBounds: LatLngBounds | LatLngBoundsLiteral, padding?: number | Padding): void;\r\n  fitBounds(bounds: LatLngBounds | LatLngBoundsLiteral, padding?: number | Padding): void;\r\n}\r\n\r\nexport interface LatLng {\r\n  lat(): number;\r\n  lng(): number;\r\n  toJSON(): any;\r\n  toString(): string;\r\n}\r\n\r\nexport interface Marker extends MVCObject {\r\n  setMap(map: GoogleMap): void;\r\n  setPosition(latLng: LatLng | LatLngLiteral): void;\r\n  setTitle(title: string): void;\r\n  setLabel(label: string | MarkerLabel): void;\r\n  setDraggable(draggable: boolean): void;\r\n  setIcon(icon: string): void;\r\n  setOpacity(opacity: number): void;\r\n  setVisible(visible: boolean): void;\r\n  setZIndex(zIndex: number): void;\r\n  setAnimation(animation: any): void;\r\n  getLabel(): MarkerLabel;\r\n  setClickable(clickable: boolean): void;\r\n}\r\n\r\nexport interface MarkerOptions {\r\n  position: LatLng | LatLngLiteral;\r\n  title?: string;\r\n  map?: GoogleMap;\r\n  label?: string | MarkerLabel;\r\n  draggable?: boolean;\r\n  icon?: string;\r\n  opacity?: number;\r\n  visible?: boolean;\r\n  zIndex?: number;\r\n  clickable: boolean;\r\n  animation?: any;\r\n}\r\n\r\nexport interface MarkerLabel {\r\n  color: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  fontWeight: string;\r\n  text: string;\r\n}\r\n\r\nexport interface Circle extends MVCObject {\r\n  getBounds(): LatLngBounds;\r\n  getCenter(): LatLng;\r\n  getDraggable(): boolean;\r\n  getEditable(): boolean;\r\n  getMap(): GoogleMap;\r\n  getRadius(): number;\r\n  getVisible(): boolean;\r\n  setCenter(center: LatLng | LatLngLiteral): void;\r\n  setDraggable(draggable: boolean): void;\r\n  setEditable(editable: boolean): void;\r\n  setMap(map: GoogleMap): void;\r\n  setOptions(options: CircleOptions): void;\r\n  setRadius(radius: number): void;\r\n  setVisible(visible: boolean): void;\r\n}\r\n\r\nexport interface CircleOptions {\r\n  center?: LatLng | LatLngLiteral;\r\n  clickable?: boolean;\r\n  draggable?: boolean;\r\n  editable?: boolean;\r\n  fillColor?: string;\r\n  fillOpacity?: number;\r\n  map?: GoogleMap;\r\n  radius?: number;\r\n  strokeColor?: string;\r\n  strokeOpacity?: number;\r\n  strokePosition?: 'CENTER' | 'INSIDE' | 'OUTSIDE';\r\n  strokeWeight?: number;\r\n  visible?: boolean;\r\n  zIndex?: number;\r\n}\r\n\r\nexport interface Rectangle extends MVCObject {\r\n  getBounds(): LatLngBounds;\r\n  getDraggable(): boolean;\r\n  getEditable(): boolean;\r\n  getMap(): GoogleMap;\r\n  getVisible(): boolean;\r\n  setBounds(bounds: LatLngBounds | LatLngBoundsLiteral): void;\r\n  setDraggable(draggable: boolean): void;\r\n  setEditable(editable: boolean): void;\r\n  setMap(map: GoogleMap): void;\r\n  setOptions(options: RectangleOptions): void;\r\n  setVisible(visible: boolean): void;\r\n}\r\n\r\nexport interface RectangleOptions {\r\n  bounds?: LatLngBounds | LatLngBoundsLiteral;\r\n  clickable?: boolean;\r\n  draggable?: boolean;\r\n  editable?: boolean;\r\n  fillColor?: string;\r\n  fillOpacity?: number;\r\n  map?: GoogleMap;\r\n  strokeColor?: string;\r\n  strokeOpacity?: number;\r\n  strokePosition?: 'CENTER' | 'INSIDE' | 'OUTSIDE';\r\n  strokeWeight?: number;\r\n  visible?: boolean;\r\n  zIndex?: number;\r\n}\r\n\r\nexport interface LatLngBounds {\r\n  contains(latLng: LatLng): boolean;\r\n  equals(other: LatLngBounds | LatLngBoundsLiteral): boolean;\r\n  extend(point: LatLng | LatLngLiteral): void;\r\n  getCenter(): LatLng;\r\n  getNorthEast(): LatLng;\r\n  getSouthWest(): LatLng;\r\n  intersects(other: LatLngBounds | LatLngBoundsLiteral): boolean;\r\n  isEmpty(): boolean;\r\n  toJSON(): LatLngBoundsLiteral;\r\n  toSpan(): LatLng;\r\n  toString(): string;\r\n  toUrlValue(precision?: number): string;\r\n  union(other: LatLngBounds | LatLngBoundsLiteral): LatLngBounds;\r\n}\r\n\r\nexport interface Padding {\r\n  top: number;\r\n  left: number;\r\n  right: number;\r\n  bottom: number;\r\n}\r\n\r\nexport interface LatLngBoundsLiteral {\r\n  east: number;\r\n  north: number;\r\n  south: number;\r\n  west: number;\r\n}\r\n\r\nexport interface LatLngLiteral {\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\nexport interface MouseEvent { latLng: LatLng; }\r\n\r\nexport interface MapOptions {\r\n  center?: LatLng | LatLngLiteral;\r\n  zoom?: number;\r\n  minZoom?: number;\r\n  maxZoom?: number;\r\n  controlSize?: number;\r\n  disableDoubleClickZoom?: boolean;\r\n  disableDefaultUI?: boolean;\r\n  scrollwheel?: boolean;\r\n  backgroundColor?: string;\r\n  draggable?: boolean;\r\n  draggableCursor?: string;\r\n  draggingCursor?: string;\r\n  keyboardShortcuts?: boolean;\r\n  styles?: MapTypeStyle[];\r\n  zoomControl?: boolean;\r\n  zoomControlOptions?: ZoomControlOptions;\r\n  streetViewControl?: boolean;\r\n  streetViewControlOptions?: StreetViewControlOptions;\r\n  scaleControl?: boolean;\r\n  scaleControlOptions?: ScaleControlOptions;\r\n  mapTypeControl?: boolean;\r\n  mapTypeControlOptions?: MapTypeControlOptions;\r\n  panControl?: boolean;\r\n  panControlOptions?: PanControlOptions;\r\n  rotateControl?: boolean;\r\n  rotateControlOptions?: RotateControlOptions;\r\n  fullscreenControl?: boolean;\r\n  fullscreenControlOptions?: FullscreenControlOptions;\r\n  mapTypeId?: string | MapTypeId;\r\n  clickableIcons?: boolean;\r\n  gestureHandling?: 'cooperative' | 'greedy' | 'none' | 'auto';\r\n  tilt?: number;\r\n  restriction?: MapRestriction;\r\n}\r\n\r\nexport interface MapTypeStyle {\r\n  elementType?: 'all' | 'geometry' | 'geometry.fill' | 'geometry.stroke' | 'labels' | 'labels.icon' |\r\n  'labels.text' | 'labels.text.fill' | 'labels.text.stroke';\r\n  featureType?: 'administrative' | 'administrative.country' | 'administrative.land_parcel' |\r\n  'administrative.locality' | 'administrative.neighborhood' | 'administrative.province' | 'all' |\r\n  'landscape' | 'landscape.man_made' | 'landscape.natural' | 'landscape.natural.landcover' |\r\n  'landscape.natural.terrain' | 'poi' | 'poi.attraction' | 'poi.business' | 'poi.government' |\r\n  'poi.medical' | 'poi.park' | 'poi.place_of_worship' | 'poi.school' | 'poi.sports_complex' | 'road' |\r\n  'road.arterial' | 'road.highway' | 'road.highway.controlled_access' | 'road.local' | 'transit' |\r\n  'transit.line' | 'transit.station' | 'transit.station.airport' | 'transit.station.bus' |\r\n  'transit.station.rail' | 'water';\r\n  stylers: MapTypeStyler[];\r\n}\r\n\r\n/**\r\n *  If more than one key is specified in a single MapTypeStyler, all but one will be ignored.\r\n */\r\nexport interface MapTypeStyler {\r\n  color?: string;\r\n  gamma?: number;\r\n  hue?: string;\r\n  invert_lightness?: boolean;\r\n  lightness?: number;\r\n  saturation?: number;\r\n  visibility?: string;\r\n  weight?: number;\r\n}\r\n\r\nexport interface InfoWindow extends MVCObject {\r\n  close(): void;\r\n  getContent(): string | Node;\r\n  getPosition(): LatLng;\r\n  getZIndex(): number;\r\n  open(map?: GoogleMap, anchor?: MVCObject): void;\r\n  setContent(content: string | Node): void;\r\n  setOptions(options: InfoWindowOptions): void;\r\n  setPosition(position: LatLng | LatLngLiteral): void;\r\n  setZIndex(zIndex: number): void;\r\n}\r\n\r\nexport interface MapsEventListener { remove(): void; }\r\n\r\nexport interface Size {\r\n  height: number;\r\n  width: number;\r\n  equals(other: Size): boolean;\r\n  toString(): string;\r\n}\r\n\r\nexport interface InfoWindowOptions {\r\n  content?: string | Node;\r\n  disableAutoPan?: boolean;\r\n  maxWidth?: number;\r\n  pixelOffset?: Size;\r\n  position?: LatLng | LatLngLiteral;\r\n  zIndex?: number;\r\n}\r\n\r\nexport interface Point {\r\n  x: number;\r\n  y: number;\r\n  equals(other: Point): boolean;\r\n  toString(): string;\r\n}\r\n\r\nexport interface GoogleSymbol {\r\n  anchor?: Point;\r\n  fillColor?: string;\r\n  fillOpacity?: number;\r\n  labelOrigin?: Point;\r\n  path?: string | SymbolPath;\r\n  rotation?: number;\r\n  scale?: number;\r\n  strokeColor?: string;\r\n  strokeOpacity?: number;\r\n  strokeWeight?: number;\r\n}\r\n\r\nexport interface IconSequence {\r\n  fixedRotation?: boolean;\r\n  icon?: GoogleSymbol;\r\n  offset?: string;\r\n  repeat?: string;\r\n}\r\n\r\nexport enum SymbolPath {\r\n  BACKWARD_CLOSED_ARROW = 3,\r\n  BACKWARD_OPEN_ARROW = 4,\r\n  CIRCLE = 0,\r\n  FORWARD_CLOSED_ARROW = 1,\r\n  FORWARD_OPEN_ARROW = 2,\r\n}\r\n\r\nexport interface PolylineOptions {\r\n  clickable?: boolean;\r\n  draggable?: boolean;\r\n  editable?: boolean;\r\n  geodesic?: boolean;\r\n  icons?: Array<IconSequence>;\r\n  map?: GoogleMap;\r\n  path?: Array<LatLng> | Array<LatLng | LatLngLiteral>;\r\n  strokeColor?: string;\r\n  strokeOpacity?: number;\r\n  strokeWeight?: number;\r\n  visible?: boolean;\r\n  zIndex?: number;\r\n}\r\n\r\nexport interface Polyline extends MVCObject {\r\n  getDraggable(): boolean;\r\n  getEditable(): boolean;\r\n  getMap(): GoogleMap;\r\n  getPath(): MVCArray<LatLng>;\r\n  getVisible(): boolean;\r\n  setDraggable(draggable: boolean): void;\r\n  setEditable(editable: boolean): void;\r\n  setMap(map: GoogleMap): void;\r\n  setOptions(options: PolylineOptions): void;\r\n  setPath(path: Array<LatLng | LatLngLiteral>): void;\r\n  setVisible(visible: boolean): void;\r\n}\r\n\r\n/**\r\n * PolyMouseEvent gets emitted when the user triggers mouse events on a polyline.\r\n */\r\nexport interface PolyMouseEvent extends MouseEvent {\r\n  edge: number;\r\n  path: number;\r\n  vertex: number;\r\n}\r\n\r\nexport interface PolygonOptions {\r\n  clickable?: boolean;\r\n  draggable?: boolean;\r\n  editable?: boolean;\r\n  fillColor?: string;\r\n  fillOpacity?: number;\r\n  geodesic?: boolean;\r\n  icon?: Array<IconSequence>;\r\n  map?: GoogleMap;\r\n  paths?: Array<LatLng | LatLngLiteral> | Array<Array<LatLng | LatLngLiteral>>;\r\n  strokeColor?: string;\r\n  strokeOpacity?: number;\r\n  strokeWeight?: number;\r\n  visible?: boolean;\r\n  zIndex?: number;\r\n}\r\n\r\nexport interface Polygon extends MVCObject {\r\n  getDraggable(): boolean;\r\n  getEditable(): boolean;\r\n  getMap(): GoogleMap;\r\n  getPath(): MVCArray<LatLng>;\r\n  getPaths(): MVCArray<MVCArray<LatLng>>;\r\n  getVisible(): boolean;\r\n  setDraggable(draggable: boolean): void;\r\n  setEditable(editable: boolean): void;\r\n  setMap(map: GoogleMap): void;\r\n  setPath(path: Array<LatLng> | Array<LatLng | LatLngLiteral>): void;\r\n  setOptions(options: PolygonOptions): void;\r\n  setPaths(paths: Array<Array<LatLng | LatLngLiteral>> | Array<LatLng | LatLngLiteral>): void;\r\n  setVisible(visible: boolean): void;\r\n}\r\n\r\nexport interface KmlLayer extends MVCObject {\r\n  getDefaultViewport(): LatLngBounds;\r\n  getMap(): GoogleMap;\r\n  getMetadata(): KmlLayerMetadata;\r\n  getStatus(): KmlLayerStatus;\r\n  getUrl(): string;\r\n  getZIndex(): number;\r\n  setMap(map: GoogleMap): void;\r\n  setOptions(options: KmlLayerOptions): void;\r\n  setUrl(url: string): void;\r\n  setZIndex(zIndex: number): void;\r\n}\r\n\r\n/**\r\n * See: https://developers.google.com/maps/documentation/javascript/reference?hl=de#KmlLayerStatus\r\n */\r\nexport type KmlLayerStatus = 'DOCUMENT_NOT_FOUND' |\r\n  'DOCUMENT_TOO_LARGE' | 'FETCH_ERROR' | 'INVALID_DOCUMENT' | 'INVALID_REQUEST' |\r\n  'LIMITS_EXCEEDED' | 'OK' | 'TIMED_OUT' | 'UNKNOWN';\r\n\r\n/**\r\n * See: https://developers.google.com/maps/documentation/javascript/reference?hl=de#KmlLayerMetadata\r\n */\r\nexport interface KmlLayerMetadata {\r\n  author: KmlAuthor;\r\n  description: string;\r\n  hasScreenOverlays: boolean;\r\n  name: string;\r\n  snippet: string;\r\n}\r\n\r\nexport interface KmlAuthor {\r\n  email: string;\r\n  name: string;\r\n  uri: string;\r\n}\r\n\r\nexport interface KmlLayerOptions {\r\n  clickable?: boolean;\r\n  map?: GoogleMap;\r\n  preserveViewport?: boolean;\r\n  screenOverlays?: boolean;\r\n  suppressInfoWindows?: boolean;\r\n  url?: string;\r\n  zIndex?: number;\r\n}\r\n\r\nexport interface KmlFeatureData {\r\n  author: KmlAuthor;\r\n  description: string;\r\n  id: string;\r\n  infoWindowHtml: string;\r\n  name: string;\r\n  snippet: string;\r\n}\r\n\r\nexport interface KmlMouseEvent extends MouseEvent {\r\n  featureData: KmlFeatureData;\r\n  pixelOffset: Size;\r\n}\r\n\r\nexport interface TransitLayer extends MVCObject {\r\n  getMap(): GoogleMap;\r\n  setMap(map: GoogleMap): void;\r\n}\r\n\r\nexport interface TransitLayerOptions {\r\n  visible: boolean;\r\n}\r\n\r\nexport interface BicyclingLayer extends MVCObject {\r\n  getMap(): GoogleMap;\r\n  setMap(map: GoogleMap): void;\r\n}\r\n\r\nexport interface BicyclingLayerOptions {\r\n  visible: boolean;\r\n}\r\n\r\nexport interface Data extends MVCObject {\r\n  features: Feature[];\r\n  addGeoJson(geoJson: Object, options?: GeoJsonOptions): Feature[];\r\n  remove(feature: Feature): void;\r\n  setControlPosition(controlPosition: ControlPosition): void;\r\n  setControls(controls: string[]): void;\r\n  setDrawingMode(drawingMode: string): void;\r\n  setMap(map: GoogleMap): void;\r\n  /* tslint:disable */\r\n  /*\r\n  * Tslint configuration check-parameters will prompt errors for these lines of code.\r\n  * https://palantir.github.io/tslint/rules/no-unused-variable/\r\n  */\r\n  setStyle(style: () => void): void;\r\n  forEach(callback: (feature: Feature) => void): void;\r\n  loadGeoJson(url: string, options?: GeoJsonOptions, callback?: (feats: Feature[]) => void): void;\r\n  /* tslint:enable */\r\n}\r\n\r\nexport interface Feature extends MVCObject {\r\n  id?: number | string | undefined;\r\n  geometry: Geometry;\r\n  properties: any;\r\n}\r\n\r\nexport interface DataOptions {\r\n  controlPosition?: ControlPosition;\r\n  controls?: string[];\r\n  drawingMode?: string;\r\n  featureFactory?: (geometry: Geometry) => Feature;\r\n  map?: GoogleMap;\r\n  style?: () => void;\r\n}\r\n\r\nexport interface DataMouseEvent extends MouseEvent {\r\n  feature: Feature;\r\n}\r\n\r\nexport interface GeoJsonOptions {\r\n  idPropertyName: string;\r\n}\r\n\r\nexport interface Geometry {\r\n  type: string;\r\n}\r\n\r\n/**\r\n * Identifiers used to specify the placement of controls on the map. Controls are\r\n * positioned relative to other controls in the same layout position. Controls that\r\n * are added first are positioned closer to the edge of the map.\r\n */\r\nexport enum ControlPosition {\r\n  RIGHT_BOTTOM,\r\n  TOP_LEFT,\r\n  TOP_CENTER,\r\n  TOP_RIGHT,\r\n  LEFT_CENTER,\r\n  LEFT_TOP,\r\n  LEFT_BOTTOM,\r\n  RIGHT_TOP,\r\n  RIGHT_CENTER,\r\n  BOTTOM_RIGHT,\r\n  BOTTOM_LEFT,\r\n  BOTTOM_CENTER,\r\n}\r\n\r\nexport enum MapTypeId {\r\n  /** This map type displays a transparent layer of major streets on satellite images. */\r\n  HYBRID,\r\n  /** This map type displays a normal street map. */\r\n  ROADMAP,\r\n  /** This map type displays satellite images. */\r\n  SATELLITE,\r\n  /** This map type displays maps with physical features such as terrain and vegetation. */\r\n  TERRAIN,\r\n}\r\n\r\n/***** Controls *****/\r\n/** Options for the rendering of the map type control. */\r\nexport interface MapTypeControlOptions {\r\n  /** IDs of map types to show in the control. */\r\n  mapTypeIds?: (MapTypeId | string)[];\r\n  /**\r\n   * Position id. Used to specify the position of the control on the map.\r\n   * The default position is TOP_RIGHT.\r\n   */\r\n  position?: ControlPosition;\r\n  /** Style id. Used to select what style of map type control to display. */\r\n  style?: MapTypeControlStyle;\r\n}\r\n\r\nexport enum MapTypeControlStyle {\r\n  DEFAULT = 0,\r\n  DROPDOWN_MENU = 2,\r\n  HORIZONTAL_BAR = 1,\r\n}\r\n\r\nexport interface OverviewMapControlOptions {\r\n  opened?: boolean;\r\n}\r\n\r\n/** Options for the rendering of the pan control. */\r\nexport interface PanControlOptions {\r\n  /**\r\n   * Position id. Used to specify the position of the control on the map.\r\n   * The default position is TOP_LEFT.\r\n   */\r\n  position?: ControlPosition;\r\n}\r\n\r\n/** Options for the rendering of the rotate control. */\r\nexport interface RotateControlOptions {\r\n  /**\r\n   * Position id. Used to specify the position of the control on the map.\r\n   * The default position is TOP_LEFT.\r\n   */\r\n  position?: ControlPosition;\r\n}\r\n\r\n/** Options for the rendering of the scale control. */\r\nexport interface ScaleControlOptions {\r\n  /** Style id. Used to select what style of scale control to display. */\r\n  style?: ScaleControlStyle;\r\n}\r\n\r\nexport enum ScaleControlStyle {\r\n  DEFAULT,\r\n}\r\n\r\n/** Options for the rendering of the Street View pegman control on the map. */\r\nexport interface StreetViewControlOptions {\r\n  /**\r\n   * Position id. Used to specify the position of the control on the map. The\r\n   * default position is embedded within the navigation (zoom and pan) controls.\r\n   * If this position is empty or the same as that specified in the\r\n   * zoomControlOptions or panControlOptions, the Street View control will be\r\n   * displayed as part of the navigation controls. Otherwise, it will be displayed\r\n   * separately.\r\n   */\r\n  position?: ControlPosition;\r\n}\r\n\r\n/** Options for the rendering of the zoom control. */\r\nexport interface ZoomControlOptions {\r\n  /**\r\n   * Position id. Used to specify the position of the control on the map.\r\n   * The default position is TOP_LEFT.\r\n   */\r\n  position?: ControlPosition;\r\n  style?: ZoomControlStyle;\r\n}\r\n\r\nexport enum ZoomControlStyle {\r\n  DEFAULT,\r\n  LARGE,\r\n  SMALL,\r\n}\r\n\r\n/** Options for the rendering of the fullscreen control. */\r\nexport interface FullscreenControlOptions {\r\n  /**\r\n   * Position id. Used to specify the position of the control on the map.\r\n   * The default position is RIGHT_TOP.\r\n   */\r\n  position?: ControlPosition;\r\n}\r\n\r\n/** Options for the restricting the bounds of the map. */\r\nexport interface MapRestriction {\r\n  latLngBounds: LatLngBounds | LatLngBoundsLiteral;\r\n  strictBounds?: boolean;\r\n}\r\n\r\nexport interface Geocoder {\r\n  geocode: (request: GeocoderRequest, googleCallback: (results: GeocoderResult[], status: GeocoderStatus) => void) => void;\r\n}\r\n\r\nexport interface GeocoderAddressComponent {\r\n  long_name: string;\r\n  short_name: string;\r\n  types: string[];\r\n}\r\n\r\n/** Options for restricting the geocoder results */\r\nexport interface GeocoderComponentRestrictions {\r\n  administrativeArea?: string;\r\n  country?: string;\r\n  locality?: string;\r\n  postalCode?: string;\r\n  route?: string;\r\n}\r\n\r\nexport interface GeocoderGeometry {\r\n  bounds: LatLngBounds;\r\n  location: LatLng;\r\n  location_type: GeocoderLocationType;\r\n  viewport: LatLngBounds;\r\n}\r\n\r\nexport enum GeocoderLocationType {\r\n  APPROXIMATE = 'APPROXIMATE',\r\n  GEOMETRIC_CENTER = 'GEOMETRIC_CENTER',\r\n  RANGE_INTERPOLATED = 'RANGE_INTERPOLATED',\r\n  ROOFTOP = 'ROOFTOP',\r\n}\r\n\r\nexport interface GeocoderRequest {\r\n  address?: string;\r\n  bounds?: LatLngBounds | LatLngBoundsLiteral;\r\n  componentRestrictions?: GeocoderComponentRestrictions;\r\n  location?: LatLng | LatLngLiteral;\r\n  placeId?: string;\r\n  region?: string;\r\n}\r\n\r\nexport interface GeocoderResult {\r\n  address_components: GeocoderAddressComponent[];\r\n  formatted_address: string;\r\n  geometry: GeocoderGeometry;\r\n  partial_match: boolean;\r\n  place_id: string;\r\n  postcode_localities: string[];\r\n  types: string[];\r\n}\r\n\r\nexport enum GeocoderStatus {\r\n  ERROR = 'ERROR',\r\n  INVALID_REQUEST = 'INVALID_REQUEST',\r\n  OK = 'OK',\r\n  OVER_QUERY_LIMIT = 'OVER_QUERY_LIMIT',\r\n  REQUEST_DENIED = 'REQUEST_DENIED',\r\n  UNKNOWN_ERROR = 'UNKNOWN_ERROR',\r\n  ZERO_RESULTS = 'ZERO_RESULTS',\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { merge, Observable, Observer } from 'rxjs';\r\nimport { map, skip, startWith, switchMap } from 'rxjs/operators';\r\n\r\nimport { AgmPolygon, PathChangePolygonPathEvent, PathCollectionChangePolygonPathEvent, PolygonPathEvent } from '../../directives/polygon';\r\nimport { createMVCEventObservable, MVCEvent } from '../../utils/mvcarray-utils';\r\nimport { GoogleMapsAPIWrapper } from '../google-maps-api-wrapper';\r\nimport { LatLng, MVCArray, Polygon } from '../google-maps-types';\r\n\r\n@Injectable()\r\nexport class PolygonManager {\r\n  private _polygons: Map<AgmPolygon, Promise<Polygon>> =\r\n    new Map<AgmPolygon, Promise<Polygon>>();\r\n\r\n  constructor(private _mapsWrapper: GoogleMapsAPIWrapper, private _zone: NgZone) { }\r\n\r\n  addPolygon(path: AgmPolygon) {\r\n    const polygonPromise = this._mapsWrapper.createPolygon({\r\n      clickable: path.clickable,\r\n      draggable: path.draggable,\r\n      editable: path.editable,\r\n      fillColor: path.fillColor,\r\n      fillOpacity: path.fillOpacity,\r\n      geodesic: path.geodesic,\r\n      paths: path.paths,\r\n      strokeColor: path.strokeColor,\r\n      strokeOpacity: path.strokeOpacity,\r\n      strokeWeight: path.strokeWeight,\r\n      visible: path.visible,\r\n      zIndex: path.zIndex,\r\n    });\r\n    this._polygons.set(path, polygonPromise);\r\n  }\r\n\r\n  updatePolygon(polygon: AgmPolygon): Promise<void> {\r\n    const m = this._polygons.get(polygon);\r\n    if (m == null) {\r\n      return Promise.resolve();\r\n    }\r\n    return m.then((l: Polygon) => this._zone.run(() => { l.setPaths(polygon.paths); }));\r\n  }\r\n\r\n  setPolygonOptions(path: AgmPolygon, options: { [propName: string]: any }): Promise<void> {\r\n    return this._polygons.get(path).then((l: Polygon) => { l.setOptions(options); });\r\n  }\r\n\r\n  deletePolygon(paths: AgmPolygon): Promise<void> {\r\n    const m = this._polygons.get(paths);\r\n    if (m == null) {\r\n      return Promise.resolve();\r\n    }\r\n    return m.then((l: Polygon) => {\r\n      return this._zone.run(() => {\r\n        l.setMap(null);\r\n        this._polygons.delete(paths);\r\n      });\r\n    });\r\n  }\r\n\r\n  getPath(polygon: AgmPolygon): Promise<Array<LatLng>> {\r\n    return this._polygons.get(polygon)\r\n      .then((polygon) => polygon.getPath().getArray());\r\n  }\r\n\r\n  getPaths(polygon: AgmPolygon): Promise<Array<Array<LatLng>>> {\r\n    return this._polygons.get(polygon)\r\n      .then((polygon) => polygon.getPaths().getArray().map((p) => p.getArray()));\r\n  }\r\n\r\n  createEventObservable<T>(eventName: string, path: AgmPolygon): Observable<T> {\r\n    return new Observable((observer: Observer<T>) => {\r\n      this._polygons.get(path).then((l: Polygon) => {\r\n        l.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\n\r\n  async createPathEventObservable(agmPolygon: AgmPolygon): Promise<Observable<PolygonPathEvent<any>>> {\r\n    const polygon = await this._polygons.get(agmPolygon);\r\n    const paths = polygon.getPaths();\r\n    const pathsChanges$ = createMVCEventObservable(paths);\r\n    return pathsChanges$.pipe(startWith(({ newArr: paths.getArray() } as MVCEvent<MVCArray<LatLng>>)), // in order to subscribe to them all\r\n      switchMap(parentMVEvent => merge(...// rest parameter\r\n        parentMVEvent.newArr.map((chMVC, index) =>\r\n          createMVCEventObservable(chMVC)\r\n          .pipe(map(chMVCEvent => ({ parentMVEvent, chMVCEvent, pathIndex: index })))))\r\n        .pipe(startWith({ parentMVEvent, chMVCEvent: null, pathIndex: null }))), // start the merged ob with an event signinifing change to parent\r\n      skip(1), // skip the manually added event\r\n      map(({ parentMVEvent, chMVCEvent, pathIndex }) => {\r\n        let retVal;\r\n        if (!chMVCEvent) {\r\n          retVal = {\r\n            newArr: parentMVEvent.newArr.map(subArr => subArr.getArray().map(latLng => latLng.toJSON())),\r\n            eventName: parentMVEvent.evName,\r\n            index: parentMVEvent.index,\r\n          } as PathCollectionChangePolygonPathEvent;\r\n          if (parentMVEvent.previous) {\r\n            retVal.previous =  parentMVEvent.previous.getArray();\r\n          }\r\n        } else {\r\n          retVal = {\r\n            newArr: parentMVEvent.newArr.map(subArr => subArr.getArray().map(latLng => latLng.toJSON())),\r\n            pathIndex,\r\n            eventName: chMVCEvent.evName,\r\n            index: chMVCEvent.index,\r\n          } as PathChangePolygonPathEvent;\r\n          if (chMVCEvent.previous) {\r\n            retVal.previous = chMVCEvent.previous;\r\n          }\r\n        }\r\n        return retVal;\r\n      }));\r\n  }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport { AgmPolyline, PathEvent } from '../../directives/polyline';\r\nimport { AgmPolylinePoint } from '../../directives/polyline-point';\r\nimport { createMVCEventObservable } from '../../utils/mvcarray-utils';\r\nimport { GoogleMapsAPIWrapper } from '../google-maps-api-wrapper';\r\nimport { IconSequence, LatLng, LatLngLiteral, MVCArray, Polyline } from '../google-maps-types';\r\n\r\ndeclare var google: any;\r\n\r\n@Injectable()\r\nexport class PolylineManager {\r\n  private _polylines: Map<AgmPolyline, Promise<Polyline>> =\r\n      new Map<AgmPolyline, Promise<Polyline>>();\r\n\r\n  constructor(private _mapsWrapper: GoogleMapsAPIWrapper, private _zone: NgZone) {}\r\n\r\n  private static _convertPoints(line: AgmPolyline): Array<LatLngLiteral> {\r\n    const path = line._getPoints().map((point: AgmPolylinePoint) => {\r\n      return {lat: point.latitude, lng: point.longitude} as LatLngLiteral;\r\n    });\r\n    return path;\r\n  }\r\n\r\n  private static _convertPath(path: 'CIRCLE' | 'BACKWARD_CLOSED_ARROW' | 'BACKWARD_OPEN_ARROW' | 'FORWARD_CLOSED_ARROW' |\r\n  'FORWARD_CLOSED_ARROW' | string): number | string{\r\n    const symbolPath = google.maps.SymbolPath[path];\r\n    if (typeof symbolPath === 'number') {\r\n      return symbolPath;\r\n    } else{\r\n      return path;\r\n    }\r\n  }\r\n\r\n  private static _convertIcons(line: AgmPolyline): Array<IconSequence> {\r\n    const icons = line._getIcons().map(agmIcon => ({\r\n      fixedRotation: agmIcon.fixedRotation,\r\n      offset: agmIcon.offset,\r\n      repeat: agmIcon.repeat,\r\n      icon: {\r\n        anchor: new google.maps.Point(agmIcon.anchorX, agmIcon.anchorY),\r\n        fillColor: agmIcon.fillColor,\r\n        fillOpacity: agmIcon.fillOpacity,\r\n        path: PolylineManager._convertPath(agmIcon.path),\r\n        rotation: agmIcon.rotation,\r\n        scale: agmIcon.scale,\r\n        strokeColor: agmIcon.strokeColor,\r\n        strokeOpacity: agmIcon.strokeOpacity,\r\n        strokeWeight: agmIcon.strokeWeight,\r\n      },\r\n    } as IconSequence));\r\n    // prune undefineds;\r\n    icons.forEach(icon => {\r\n      Object.entries(icon).forEach(([key, val]) => {\r\n        if (typeof val === 'undefined') {\r\n          delete (icon as any)[key];\r\n        }\r\n      });\r\n      if (typeof icon.icon.anchor.x === 'undefined' ||\r\n        typeof icon.icon.anchor.y === 'undefined') {\r\n          delete icon.icon.anchor;\r\n        }\r\n    });\r\n    return icons;\r\n  }\r\n\r\n  addPolyline(line: AgmPolyline) {\r\n    const polylinePromise = this._mapsWrapper.getNativeMap()\r\n    .then(() => [ PolylineManager._convertPoints(line),\r\n                  PolylineManager._convertIcons(line)])\r\n    .then(([path, icons]: [LatLngLiteral[], IconSequence[]]) =>\r\n      this._mapsWrapper.createPolyline({\r\n        clickable: line.clickable,\r\n        draggable: line.draggable,\r\n        editable: line.editable,\r\n        geodesic: line.geodesic,\r\n        strokeColor: line.strokeColor,\r\n        strokeOpacity: line.strokeOpacity,\r\n        strokeWeight: line.strokeWeight,\r\n        visible: line.visible,\r\n        zIndex: line.zIndex,\r\n        path: path,\r\n        icons: icons,\r\n    }));\r\n    this._polylines.set(line, polylinePromise);\r\n  }\r\n\r\n  updatePolylinePoints(line: AgmPolyline): Promise<void> {\r\n    const path = PolylineManager._convertPoints(line);\r\n    const m = this._polylines.get(line);\r\n    if (m == null) {\r\n      return Promise.resolve();\r\n    }\r\n    return m.then((l: Polyline) => { return this._zone.run(() => { l.setPath(path); }); });\r\n  }\r\n\r\n  async updateIconSequences(line: AgmPolyline): Promise<void> {\r\n    await this._mapsWrapper.getNativeMap();\r\n    const icons = PolylineManager._convertIcons(line);\r\n    const m = this._polylines.get(line);\r\n    if (m == null) {\r\n      return;\r\n    }\r\n    return m.then(l => this._zone.run(() => l.setOptions({icons: icons}) ) );\r\n  }\r\n\r\n  setPolylineOptions(line: AgmPolyline, options: {[propName: string]: any}):\r\n      Promise<void> {\r\n    return this._polylines.get(line).then((l: Polyline) => { l.setOptions(options); });\r\n  }\r\n\r\n  deletePolyline(line: AgmPolyline): Promise<void> {\r\n    const m = this._polylines.get(line);\r\n    if (m == null) {\r\n      return Promise.resolve();\r\n    }\r\n    return m.then((l: Polyline) => {\r\n      return this._zone.run(() => {\r\n        l.setMap(null);\r\n        this._polylines.delete(line);\r\n      });\r\n    });\r\n  }\r\n\r\n  private async getMVCPath(agmPolyline: AgmPolyline): Promise<MVCArray<LatLng>> {\r\n    const polyline = await this._polylines.get(agmPolyline);\r\n    return polyline.getPath();\r\n  }\r\n\r\n  async getPath(agmPolyline: AgmPolyline): Promise<Array<LatLng>> {\r\n    return (await this.getMVCPath(agmPolyline)).getArray();\r\n  }\r\n\r\n  createEventObservable<T>(eventName: string, line: AgmPolyline): Observable<T> {\r\n    return new Observable((observer: Observer<T>) => {\r\n      this._polylines.get(line).then((l: Polyline) => {\r\n        l.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n    });\r\n  }\r\n\r\n  async createPathEventObservable(line: AgmPolyline): Promise<Observable<PathEvent>> {\r\n    const mvcPath = await this.getMVCPath(line);\r\n    return createMVCEventObservable(mvcPath);\r\n  }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\n\r\nimport { Observable, Observer } from 'rxjs';\r\n\r\nimport { AgmRectangle } from '../../directives/rectangle';\r\nimport { GoogleMapsAPIWrapper } from '../google-maps-api-wrapper';\r\nimport * as mapTypes from '../google-maps-types';\r\n\r\n@Injectable()\r\nexport class RectangleManager {\r\n  private _rectangles: Map<AgmRectangle, Promise<mapTypes.Rectangle>> =\r\n      new Map<AgmRectangle, Promise<mapTypes.Rectangle>>();\r\n\r\n  constructor(private _apiWrapper: GoogleMapsAPIWrapper, private _zone: NgZone) {}\r\n\r\n  addRectangle(rectangle: AgmRectangle) {\r\n    this._rectangles.set(rectangle, this._apiWrapper.createRectangle({\r\n      bounds: {\r\n        north: rectangle.north,\r\n        east: rectangle.east,\r\n        south: rectangle.south,\r\n        west: rectangle.west,\r\n      },\r\n      clickable: rectangle.clickable,\r\n      draggable: rectangle.draggable,\r\n      editable: rectangle.editable,\r\n      fillColor: rectangle.fillColor,\r\n      fillOpacity: rectangle.fillOpacity,\r\n      strokeColor: rectangle.strokeColor,\r\n      strokeOpacity: rectangle.strokeOpacity,\r\n      strokePosition: rectangle.strokePosition,\r\n      strokeWeight: rectangle.strokeWeight,\r\n      visible: rectangle.visible,\r\n      zIndex: rectangle.zIndex,\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Removes the given rectangle from the map.\r\n   */\r\n  removeRectangle(rectangle: AgmRectangle): Promise<void> {\r\n    return this._rectangles.get(rectangle).then((r) => {\r\n      r.setMap(null);\r\n      this._rectangles.delete(rectangle);\r\n    });\r\n  }\r\n\r\n  setOptions(rectangle: AgmRectangle, options: mapTypes.RectangleOptions): Promise<void> {\r\n    return this._rectangles.get(rectangle).then((r) => r.setOptions(options));\r\n  }\r\n\r\n  getBounds(rectangle: AgmRectangle): Promise<mapTypes.LatLngBounds> {\r\n    return this._rectangles.get(rectangle).then((r) => r.getBounds());\r\n  }\r\n\r\n  setBounds(rectangle: AgmRectangle): Promise<void> {\r\n    return this._rectangles.get(rectangle).then((r) => {\r\n      return r.setBounds({\r\n        north: rectangle.north,\r\n        east: rectangle.east,\r\n        south: rectangle.south,\r\n        west: rectangle.west,\r\n      });\r\n    });\r\n  }\r\n\r\n  setEditable(rectangle: AgmRectangle): Promise<void> {\r\n    return this._rectangles.get(rectangle).then((r) => {\r\n      return r.setEditable(rectangle.editable);\r\n    });\r\n  }\r\n\r\n  setDraggable(rectangle: AgmRectangle): Promise<void> {\r\n    return this._rectangles.get(rectangle).then((r) => {\r\n      return r.setDraggable(rectangle.draggable);\r\n    });\r\n  }\r\n\r\n  setVisible(rectangle: AgmRectangle): Promise<void> {\r\n    return this._rectangles.get(rectangle).then((r) => {\r\n      return r.setVisible(rectangle.visible);\r\n    });\r\n  }\r\n\r\n  createEventObservable<T>(eventName: string, rectangle: AgmRectangle): Observable<T> {\r\n    return Observable.create((observer: Observer<T>) => {\r\n      let listener: mapTypes.MapsEventListener = null;\r\n      this._rectangles.get(rectangle).then((r) => {\r\n        listener = r.addListener(eventName, (e: T) => this._zone.run(() => observer.next(e)));\r\n      });\r\n\r\n      return () => {\r\n        if (listener !== null) {\r\n          listener.remove();\r\n        }\r\n      };\r\n    });\r\n  }\r\n}\r\n","import { isPlatformServer } from '@angular/common';\r\nimport { Component, ElementRef, EventEmitter, Inject, Input, NgZone, OnChanges, OnDestroy, OnInit, Output, PLATFORM_ID, SimpleChanges } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { MouseEvent } from '../map-types';\r\nimport { FitBoundsService } from '../services/fit-bounds';\r\nimport { GoogleMapsAPIWrapper } from '../services/google-maps-api-wrapper';\r\nimport {\r\n  FullscreenControlOptions, LatLng, LatLngBounds, LatLngBoundsLiteral, LatLngLiteral,\r\n  MapRestriction, MapTypeControlOptions, MapTypeId, MapTypeStyle, Padding, PanControlOptions,\r\n  RotateControlOptions, ScaleControlOptions, StreetViewControlOptions, ZoomControlOptions,\r\n} from '../services/google-maps-types';\r\nimport { CircleManager } from '../services/managers/circle-manager';\r\nimport { InfoWindowManager } from '../services/managers/info-window-manager';\r\nimport { LayerManager } from '../services/managers/layer-manager';\r\nimport { MarkerManager } from '../services/managers/marker-manager';\r\nimport { PolygonManager } from '../services/managers/polygon-manager';\r\nimport { PolylineManager } from '../services/managers/polyline-manager';\r\nimport { RectangleManager } from '../services/managers/rectangle-manager';\r\nimport { DataLayerManager } from './../services/managers/data-layer-manager';\r\nimport { KmlLayerManager } from './../services/managers/kml-layer-manager';\r\n\r\ndeclare var google: any;\r\n\r\n/**\r\n * AgmMap renders a Google Map.\r\n * **Important note**: To be able see a map in the browser, you have to define a height for the\r\n * element `agm-map`.\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import { Component } from '@angular/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  styles: [`\r\n *    agm-map {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n *    <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *    </agm-map>\r\n *  `\r\n * })\r\n * ```\r\n */\r\n@Component({\r\n  selector: 'agm-map',\r\n  providers: [\r\n    CircleManager,\r\n    DataLayerManager,\r\n    DataLayerManager,\r\n    FitBoundsService,\r\n    GoogleMapsAPIWrapper,\r\n    InfoWindowManager,\r\n    KmlLayerManager,\r\n    LayerManager,\r\n    MarkerManager,\r\n    PolygonManager,\r\n    PolylineManager,\r\n    RectangleManager,\r\n  ],\r\n  host: {\r\n    // todo: deprecated - we will remove it with the next version\r\n    '[class.sebm-google-map-container]': 'true',\r\n  },\r\n  styles: [`\r\n    .agm-map-container-inner {\r\n      width: inherit;\r\n      height: inherit;\r\n    }\r\n    .agm-map-content {\r\n      display:none;\r\n    }\r\n  `],\r\n  template: `\r\n              <div class='agm-map-container-inner sebm-google-map-container-inner'></div>\r\n              <div class='agm-map-content'>\r\n                <ng-content></ng-content>\r\n              </div>\r\n  `,\r\n})\r\nexport class AgmMap implements OnChanges, OnInit, OnDestroy {\r\n  /**\r\n   * The longitude that defines the center of the map.\r\n   */\r\n  @Input() longitude = 0;\r\n\r\n  /**\r\n   * The latitude that defines the center of the map.\r\n   */\r\n  @Input() latitude = 0;\r\n\r\n  /**\r\n   * The zoom level of the map. The default zoom level is 8.\r\n   */\r\n  @Input() zoom = 8;\r\n\r\n  /**\r\n   * The minimal zoom level of the map allowed. When not provided, no restrictions to the zoom level\r\n   * are enforced.\r\n   */\r\n  @Input() minZoom: number;\r\n\r\n  /**\r\n   * The maximal zoom level of the map allowed. When not provided, no restrictions to the zoom level\r\n   * are enforced.\r\n   */\r\n  @Input() maxZoom: number;\r\n\r\n  /**\r\n   * The control size for the default map controls. Only governs the controls made by the Maps API itself\r\n   */\r\n  @Input() controlSize: number;\r\n\r\n  /**\r\n   * Enables/disables if map is draggable.\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('mapDraggable') draggable = true;\r\n\r\n  /**\r\n   * Enables/disables zoom and center on double click. Enabled by default.\r\n   */\r\n  @Input() disableDoubleClickZoom = false;\r\n\r\n  /**\r\n   * Enables/disables all default UI of the Google map. Please note: When the map is created, this\r\n   * value cannot get updated.\r\n   */\r\n  @Input() disableDefaultUI = false;\r\n\r\n  /**\r\n   * If false, disables scrollwheel zooming on the map. The scrollwheel is enabled by default.\r\n   */\r\n  @Input() scrollwheel = true;\r\n\r\n  /**\r\n   * Color used for the background of the Map div. This color will be visible when tiles have not\r\n   * yet loaded as the user pans. This option can only be set when the map is initialized.\r\n   */\r\n  @Input() backgroundColor: string;\r\n\r\n  /**\r\n   * The name or url of the cursor to display when mousing over a draggable map. This property uses\r\n   * the css  * cursor attribute to change the icon. As with the css property, you must specify at\r\n   * least one fallback cursor that is not a URL. For example:\r\n   * [draggableCursor]=\"'url(http://www.example.com/icon.png), auto;'\"\r\n   */\r\n  @Input() draggableCursor: string;\r\n\r\n  /**\r\n   * The name or url of the cursor to display when the map is being dragged. This property uses the\r\n   * css cursor attribute to change the icon. As with the css property, you must specify at least\r\n   * one fallback cursor that is not a URL. For example:\r\n   * [draggingCursor]=\"'url(http://www.example.com/icon.png), auto;'\"\r\n   */\r\n  @Input() draggingCursor: string;\r\n\r\n  /**\r\n   * If false, prevents the map from being controlled by the keyboard. Keyboard shortcuts are\r\n   * enabled by default.\r\n   */\r\n  @Input() keyboardShortcuts = true;\r\n\r\n  /**\r\n   * The enabled/disabled state of the Zoom control.\r\n   */\r\n  @Input() zoomControl: boolean;\r\n\r\n  /**\r\n   * Options for the Zoom control.\r\n   */\r\n  @Input() zoomControlOptions: ZoomControlOptions;\r\n\r\n  /**\r\n   * Styles to apply to each of the default map types. Note that for Satellite/Hybrid and Terrain\r\n   * modes, these styles will only apply to labels and geometry.\r\n   */\r\n  @Input() styles: MapTypeStyle[] = [];\r\n\r\n  /**\r\n   * When true and the latitude and/or longitude values changes, the Google Maps panTo method is\r\n   * used to\r\n   * center the map. See: https://developers.google.com/maps/documentation/javascript/reference#Map\r\n   */\r\n  @Input() usePanning = false;\r\n\r\n  /**\r\n   * The initial enabled/disabled state of the Street View Pegman control.\r\n   * This control is part of the default UI, and should be set to false when displaying a map type\r\n   * on which the Street View road overlay should not appear (e.g. a non-Earth map type).\r\n   */\r\n  @Input() streetViewControl: boolean;\r\n\r\n  /**\r\n   * Options for the Street View control.\r\n   */\r\n  @Input() streetViewControlOptions: StreetViewControlOptions;\r\n\r\n  /**\r\n   * Sets the viewport to contain the given bounds.\r\n   * If this option to `true`, the bounds get automatically computed from all elements that use the {@link AgmFitBounds} directive.\r\n   */\r\n  @Input() fitBounds: LatLngBoundsLiteral | LatLngBounds | boolean = false;\r\n\r\n  /**\r\n   * Padding amount for the bounds.\r\n   */\r\n  @Input() fitBoundsPadding: number | Padding;\r\n\r\n  /**\r\n   * The initial enabled/disabled state of the Scale control. This is disabled by default.\r\n   */\r\n  @Input() scaleControl = false;\r\n\r\n  /**\r\n   * Options for the scale control.\r\n   */\r\n  @Input() scaleControlOptions: ScaleControlOptions;\r\n\r\n  /**\r\n   * The initial enabled/disabled state of the Map type control.\r\n   */\r\n  @Input() mapTypeControl = false;\r\n\r\n  /**\r\n   * Options for the Map type control.\r\n   */\r\n  @Input() mapTypeControlOptions: MapTypeControlOptions;\r\n\r\n  /**\r\n   * The initial enabled/disabled state of the Pan control.\r\n   */\r\n  @Input() panControl  = false;\r\n\r\n  /**\r\n   * Options for the Pan control.\r\n   */\r\n  @Input() panControlOptions: PanControlOptions;\r\n\r\n  /**\r\n   * The initial enabled/disabled state of the Rotate control.\r\n   */\r\n  @Input() rotateControl = false;\r\n\r\n  /**\r\n   * Options for the Rotate control.\r\n   */\r\n  @Input() rotateControlOptions: RotateControlOptions;\r\n\r\n  /**\r\n   * The initial enabled/disabled state of the Fullscreen control.\r\n   */\r\n  @Input() fullscreenControl  = false;\r\n\r\n  /**\r\n   * Options for the Fullscreen control.\r\n   */\r\n  @Input() fullscreenControlOptions: FullscreenControlOptions;\r\n\r\n  /**\r\n   * The map mapTypeId. Defaults to 'roadmap'.\r\n   */\r\n  @Input() mapTypeId: 'roadmap' | 'hybrid' | 'satellite' | 'terrain' | string = 'roadmap';\r\n\r\n  /**\r\n   * When false, map icons are not clickable. A map icon represents a point of interest,\r\n   * also known as a POI. By default map icons are clickable.\r\n   */\r\n  @Input() clickableIcons = true;\r\n\r\n  /**\r\n   * A map icon represents a point of interest, also known as a POI.\r\n   * When map icons are clickable by default, an info window is displayed.\r\n   * When this property is set to false, the info window will not be shown but the click event\r\n   * will still fire\r\n   */\r\n  @Input() showDefaultInfoWindow = true;\r\n\r\n  /**\r\n   * This setting controls how gestures on the map are handled.\r\n   * Allowed values:\r\n   * - 'cooperative' (Two-finger touch gestures pan and zoom the map. One-finger touch gestures are not handled by the map.)\r\n   * - 'greedy'      (All touch gestures pan or zoom the map.)\r\n   * - 'none'        (The map cannot be panned or zoomed by user gestures.)\r\n   * - 'auto'        [default] (Gesture handling is either cooperative or greedy, depending on whether the page is scrollable or not.\r\n   */\r\n  @Input() gestureHandling: 'cooperative' | 'greedy' | 'none' | 'auto' = 'auto';\r\n\r\n    /**\r\n     * Controls the automatic switching behavior for the angle of incidence of\r\n     * the map. The only allowed values are 0 and 45. The value 0 causes the map\r\n     * to always use a 0 overhead view regardless of the zoom level and\r\n     * viewport. The value 45 causes the tilt angle to automatically switch to\r\n     * 45 whenever 45 imagery is available for the current zoom level and\r\n     * viewport, and switch back to 0 whenever 45 imagery is not available\r\n     * (this is the default behavior). 45 imagery is only available for\r\n     * satellite and hybrid map types, within some locations, and at some zoom\r\n     * levels. Note: getTilt returns the current tilt angle, not the value\r\n     * specified by this option. Because getTilt and this option refer to\r\n     * different things, do not bind() the tilt property; doing so may yield\r\n     * unpredictable effects. (Default of AGM is 0 (disabled). Enable it with value 45.)\r\n     */\r\n  @Input() tilt = 0;\r\n\r\n  /**\r\n   * Options for restricting the bounds of the map.\r\n   * User cannot pan or zoom away from restricted area.\r\n   */\r\n  @Input() restriction: MapRestriction;\r\n  /**\r\n   * Map option attributes that can change over time\r\n   */\r\n  private static _mapOptionsAttributes: string[] = [\r\n    'disableDoubleClickZoom', 'scrollwheel', 'draggable', 'draggableCursor', 'draggingCursor',\r\n    'keyboardShortcuts', 'zoomControl', 'zoomControlOptions', 'styles', 'streetViewControl',\r\n    'streetViewControlOptions', 'zoom', 'mapTypeControl', 'mapTypeControlOptions', 'minZoom',\r\n    'maxZoom', 'panControl', 'panControlOptions', 'rotateControl', 'rotateControlOptions',\r\n    'fullscreenControl', 'fullscreenControlOptions', 'scaleControl', 'scaleControlOptions',\r\n    'mapTypeId', 'clickableIcons', 'gestureHandling', 'tilt', 'restriction',\r\n  ];\r\n\r\n  private _observableSubscriptions: Subscription[] = [];\r\n  private _fitBoundsSubscription: Subscription;\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the map (but not when they click on a\r\n   * marker or infoWindow).\r\n   */\r\n  @Output() mapClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user right-clicks on the map (but not when they click\r\n   * on a marker or infoWindow).\r\n   */\r\n  @Output() mapRightClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user double-clicks on the map (but not when they click\r\n   * on a marker or infoWindow).\r\n   */\r\n  @Output() mapDblClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event emitter is fired when the map center changes.\r\n   */\r\n  @Output() centerChange: EventEmitter<LatLngLiteral> = new EventEmitter<LatLngLiteral>();\r\n\r\n  /**\r\n   * This event is fired when the viewport bounds have changed.\r\n   */\r\n  @Output() boundsChange: EventEmitter<LatLngBounds> = new EventEmitter<LatLngBounds>();\r\n\r\n  /**\r\n   * This event is fired when the mapTypeId property changes.\r\n   */\r\n  @Output() mapTypeIdChange: EventEmitter<MapTypeId> = new EventEmitter<MapTypeId>();\r\n\r\n  /**\r\n   * This event is fired when the map becomes idle after panning or zooming.\r\n   */\r\n  @Output() idle: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  /**\r\n   * This event is fired when the zoom level has changed.\r\n   */\r\n  @Output() zoomChange: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n  /**\r\n   * This event is fired when the google map is fully initialized.\r\n   * You get the google.maps.Map instance as a result of this EventEmitter.\r\n   */\r\n  @Output() mapReady: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  /**\r\n   * This event is fired when the visible tiles have finished loading.\r\n   */\r\n  @Output() tilesLoaded: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  constructor(\r\n    private _elem: ElementRef,\r\n    private _mapsWrapper: GoogleMapsAPIWrapper,\r\n    @Inject(PLATFORM_ID) private _platformId: Object,\r\n    protected _fitBoundsService: FitBoundsService,\r\n    private _zone: NgZone\r\n  ) {}\r\n\r\n  /** @internal */\r\n  ngOnInit() {\r\n    if (isPlatformServer(this._platformId)) {\r\n      // The code is running on the server, do nothing\r\n      return;\r\n    }\r\n    // todo: this should be solved with a new component and a viewChild decorator\r\n    const container = this._elem.nativeElement.querySelector('.agm-map-container-inner');\r\n    this._initMapInstance(container);\r\n  }\r\n\r\n  private _initMapInstance(el: HTMLElement) {\r\n    this._mapsWrapper.createMap(el, {\r\n      center: {lat: this.latitude || 0, lng: this.longitude || 0},\r\n      zoom: this.zoom,\r\n      minZoom: this.minZoom,\r\n      maxZoom: this.maxZoom,\r\n      controlSize: this.controlSize,\r\n      disableDefaultUI: this.disableDefaultUI,\r\n      disableDoubleClickZoom: this.disableDoubleClickZoom,\r\n      scrollwheel: this.scrollwheel,\r\n      backgroundColor: this.backgroundColor,\r\n      draggable: this.draggable,\r\n      draggableCursor: this.draggableCursor,\r\n      draggingCursor: this.draggingCursor,\r\n      keyboardShortcuts: this.keyboardShortcuts,\r\n      styles: this.styles,\r\n      zoomControl: this.zoomControl,\r\n      zoomControlOptions: this.zoomControlOptions,\r\n      streetViewControl: this.streetViewControl,\r\n      streetViewControlOptions: this.streetViewControlOptions,\r\n      scaleControl: this.scaleControl,\r\n      scaleControlOptions: this.scaleControlOptions,\r\n      mapTypeControl: this.mapTypeControl,\r\n      mapTypeControlOptions: this.mapTypeControlOptions,\r\n      panControl: this.panControl,\r\n      panControlOptions: this.panControlOptions,\r\n      rotateControl: this.rotateControl,\r\n      rotateControlOptions: this.rotateControlOptions,\r\n      fullscreenControl: this.fullscreenControl,\r\n      fullscreenControlOptions: this.fullscreenControlOptions,\r\n      mapTypeId: this.mapTypeId,\r\n      clickableIcons: this.clickableIcons,\r\n      gestureHandling: this.gestureHandling,\r\n      tilt: this.tilt,\r\n      restriction: this.restriction,\r\n    })\r\n      .then(() => this._mapsWrapper.getNativeMap())\r\n      .then(map => this.mapReady.emit(map));\r\n\r\n    // register event listeners\r\n    this._handleMapCenterChange();\r\n    this._handleMapZoomChange();\r\n    this._handleMapMouseEvents();\r\n    this._handleBoundsChange();\r\n    this._handleMapTypeIdChange();\r\n    this._handleTilesLoadedEvent();\r\n    this._handleIdleEvent();\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    // unsubscribe all registered observable subscriptions\r\n    this._observableSubscriptions.forEach((s) => s.unsubscribe());\r\n\r\n    // remove all listeners from the map instance\r\n    this._mapsWrapper.clearInstanceListeners();\r\n    if (this._fitBoundsSubscription) {\r\n      this._fitBoundsSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  /* @internal */\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    this._updateMapOptionsChanges(changes);\r\n    this._updatePosition(changes);\r\n  }\r\n\r\n  private _updateMapOptionsChanges(changes: SimpleChanges) {\r\n    let options: {[propName: string]: any} = {};\r\n    let optionKeys =\r\n      Object.keys(changes).filter(k => AgmMap._mapOptionsAttributes.indexOf(k) !== -1);\r\n    optionKeys.forEach((k) => { options[k] = changes[k].currentValue; });\r\n    this._mapsWrapper.setMapOptions(options);\r\n  }\r\n\r\n  /**\r\n   * Triggers a resize event on the google map instance.\r\n   * When recenter is true, the of the google map gets called with the current lat/lng values or fitBounds value to recenter the map.\r\n   * Returns a promise that gets resolved after the event was triggered.\r\n   */\r\n  triggerResize(recenter: boolean = true): Promise<void> {\r\n    // Note: When we would trigger the resize event and show the map in the same turn (which is a\r\n    // common case for triggering a resize event), then the resize event would not\r\n    // work (to show the map), so we trigger the event in a timeout.\r\n    return new Promise<void>((resolve) => {\r\n      setTimeout(() => {\r\n        return this._mapsWrapper.triggerMapEvent('resize').then(() => {\r\n          if (recenter) {\r\n            this.fitBounds != null ? this._fitBounds() : this._setCenter();\r\n          }\r\n          resolve();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  private _updatePosition(changes: SimpleChanges) {\r\n    if (changes['latitude'] == null && changes['longitude'] == null &&\r\n        !changes['fitBounds']) {\r\n      // no position update needed\r\n      return;\r\n    }\r\n\r\n    // we prefer fitBounds in changes\r\n    if ('fitBounds' in changes) {\r\n      this._fitBounds();\r\n      return;\r\n    }\r\n\r\n    if (typeof this.latitude !== 'number' || typeof this.longitude !== 'number') {\r\n      return;\r\n    }\r\n    this._setCenter();\r\n  }\r\n\r\n  private _setCenter() {\r\n    let newCenter = {\r\n      lat: this.latitude,\r\n      lng: this.longitude,\r\n    };\r\n    if (this.usePanning) {\r\n      this._mapsWrapper.panTo(newCenter);\r\n    } else {\r\n      this._mapsWrapper.setCenter(newCenter);\r\n    }\r\n  }\r\n\r\n  private _fitBounds() {\r\n    switch (this.fitBounds) {\r\n      case true:\r\n        this._subscribeToFitBoundsUpdates();\r\n        break;\r\n      case false:\r\n        if (this._fitBoundsSubscription) {\r\n          this._fitBoundsSubscription.unsubscribe();\r\n        }\r\n        break;\r\n      default:\r\n        this._updateBounds(this.fitBounds, this.fitBoundsPadding);\r\n    }\r\n  }\r\n\r\n  private _subscribeToFitBoundsUpdates() {\r\n    this._zone.runOutsideAngular(() => {\r\n      this._fitBoundsSubscription = this._fitBoundsService.getBounds$().subscribe(b => {\r\n        this._zone.run(() => this._updateBounds(b, this.fitBoundsPadding));\r\n      });\r\n    });\r\n  }\r\n\r\n  protected _updateBounds(bounds: LatLngBounds | LatLngBoundsLiteral, padding?: number | Padding) {\r\n    if (!bounds) {\r\n      return;\r\n    }\r\n    if (this._isLatLngBoundsLiteral(bounds) && typeof google !== 'undefined' && google && google.maps && google.maps.LatLngBounds) {\r\n      const newBounds = new google.maps.LatLngBounds();\r\n      newBounds.union(bounds);\r\n      bounds = newBounds;\r\n    }\r\n    if (this.usePanning) {\r\n      this._mapsWrapper.panToBounds(bounds, padding);\r\n      return;\r\n    }\r\n    this._mapsWrapper.fitBounds(bounds, padding);\r\n  }\r\n\r\n  private _isLatLngBoundsLiteral(bounds: LatLngBounds | LatLngBoundsLiteral): bounds is LatLngBoundsLiteral {\r\n    return bounds != null && (bounds as any).extend === undefined;\r\n  }\r\n\r\n  private _handleMapCenterChange() {\r\n    const s = this._mapsWrapper.subscribeToMapEvent<void>('center_changed').subscribe(() => {\r\n      this._mapsWrapper.getCenter().then((center: LatLng) => {\r\n        this.latitude = center.lat();\r\n        this.longitude = center.lng();\r\n        this.centerChange.emit({lat: this.latitude, lng: this.longitude} as LatLngLiteral);\r\n      });\r\n    });\r\n    this._observableSubscriptions.push(s);\r\n  }\r\n\r\n  private _handleBoundsChange() {\r\n    const s = this._mapsWrapper.subscribeToMapEvent<void>('bounds_changed').subscribe(() => {\r\n      this._mapsWrapper.getBounds().then(\r\n        (bounds: LatLngBounds) => { this.boundsChange.emit(bounds); });\r\n    });\r\n    this._observableSubscriptions.push(s);\r\n  }\r\n\r\n  private _handleMapTypeIdChange() {\r\n    const s = this._mapsWrapper.subscribeToMapEvent<void>('maptypeid_changed').subscribe(() => {\r\n      this._mapsWrapper.getMapTypeId().then(\r\n        (mapTypeId: MapTypeId) => { this.mapTypeIdChange.emit(mapTypeId); });\r\n    });\r\n    this._observableSubscriptions.push(s);\r\n  }\r\n\r\n  private _handleMapZoomChange() {\r\n    const s = this._mapsWrapper.subscribeToMapEvent<void>('zoom_changed').subscribe(() => {\r\n      this._mapsWrapper.getZoom().then((z: number) => {\r\n        this.zoom = z;\r\n        this.zoomChange.emit(z);\r\n      });\r\n    });\r\n    this._observableSubscriptions.push(s);\r\n  }\r\n\r\n  private _handleIdleEvent() {\r\n    const s = this._mapsWrapper.subscribeToMapEvent<void>('idle').subscribe(\r\n      () => { this.idle.emit(void 0); });\r\n    this._observableSubscriptions.push(s);\r\n  }\r\n\r\n  private _handleTilesLoadedEvent() {\r\n    const s = this._mapsWrapper.subscribeToMapEvent<void>('tilesloaded').subscribe(\r\n      () => this.tilesLoaded.emit(void 0),\r\n    );\r\n    this._observableSubscriptions.push(s);\r\n  }\r\n\r\n  private _handleMapMouseEvents() {\r\n    interface Emitter {\r\n      emit(value: any): void;\r\n    }\r\n\r\n    type Event = { name: string, emitter: Emitter };\r\n\r\n    const events: Event[] = [\r\n      {name: 'click', emitter: this.mapClick},\r\n      {name: 'rightclick', emitter: this.mapRightClick},\r\n      {name: 'dblclick', emitter: this.mapDblClick},\r\n    ];\r\n\r\n    events.forEach((e: Event) => {\r\n      const s = this._mapsWrapper.subscribeToMapEvent<{latLng: LatLng}>(e.name).subscribe(\r\n        (event: {latLng: LatLng}) => {\r\n          let value: MouseEvent = {\r\n            coords: {\r\n              lat: event.latLng.lat(),\r\n              lng: event.latLng.lng(),\r\n            },\r\n            placeId: (event as {latLng: LatLng, placeId: string}).placeId,\r\n          };\r\n          // the placeId will be undefined in case the event was not an IconMouseEvent (google types)\r\n          if (value.placeId && !this.showDefaultInfoWindow) {\r\n            (event as any).stop();\r\n          }\r\n          e.emitter.emit(value);\r\n        });\r\n      this._observableSubscriptions.push(s);\r\n    });\r\n  }\r\n}\r\n","import { AfterContentInit, ContentChildren, Directive, EventEmitter, forwardRef, Input, OnChanges, OnDestroy, Output, QueryList, SimpleChange } from '@angular/core';\r\nimport { Observable, ReplaySubject, Subscription } from 'rxjs';\r\nimport { MouseEvent } from '../map-types';\r\nimport { FitBoundsAccessor, FitBoundsDetails } from '../services/fit-bounds';\r\nimport * as mapTypes from '../services/google-maps-types';\r\nimport { MarkerManager } from '../services/managers/marker-manager';\r\nimport { AgmInfoWindow } from './info-window';\r\n\r\nlet markerId = 0;\r\n\r\n/**\r\n * AgmMarker renders a map marker inside a {@link AgmMap}.\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import { Component } from '@angular/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  styles: [`\r\n *    .agm-map-container {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n *    <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *      <agm-marker [latitude]=\"lat\" [longitude]=\"lng\" [label]=\"'M'\">\r\n *      </agm-marker>\r\n *    </agm-map>\r\n *  `\r\n * })\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'agm-marker',\r\n  providers: [\r\n    { provide: FitBoundsAccessor, useExisting: forwardRef(() => AgmMarker) },\r\n  ],\r\n  inputs: [\r\n    'latitude', 'longitude', 'title', 'label', 'draggable: markerDraggable', 'iconUrl',\r\n    'openInfoWindow', 'opacity', 'visible', 'zIndex', 'animation',\r\n  ],\r\n  outputs: ['markerClick', 'dragStart', 'drag', 'dragEnd', 'mouseOver', 'mouseOut'],\r\n})\r\nexport class AgmMarker implements OnDestroy, OnChanges, AfterContentInit, FitBoundsAccessor {\r\n  /**\r\n   * The latitude position of the marker.\r\n   */\r\n  @Input() latitude: number;\r\n\r\n  /**\r\n   * The longitude position of the marker.\r\n   */\r\n  @Input() longitude: number;\r\n\r\n  /**\r\n   * The title of the marker.\r\n   */\r\n  @Input() title: string;\r\n\r\n  /**\r\n   * The label (a single uppercase character) for the marker.\r\n   */\r\n  @Input() label: string | mapTypes.MarkerLabel;\r\n\r\n  /**\r\n   * If true, the marker can be dragged. Default value is false.\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('markerDraggable') draggable = false;\r\n\r\n  /**\r\n   * Icon (the URL of the image) for the foreground.\r\n   */\r\n  @Input() iconUrl: string;\r\n\r\n  /**\r\n   * If true, the marker is visible\r\n   */\r\n  @Input() visible = true;\r\n\r\n  /**\r\n   * Whether to automatically open the child info window when the marker is clicked.\r\n   */\r\n  @Input() openInfoWindow = true;\r\n\r\n  /**\r\n   * The marker's opacity between 0.0 and 1.0.\r\n   */\r\n  @Input() opacity = 1;\r\n\r\n  /**\r\n   * All markers are displayed on the map in order of their zIndex, with higher values displaying in\r\n   * front of markers with lower values. By default, markers are displayed according to their\r\n   * vertical position on screen, with lower markers appearing in front of markers further up the\r\n   * screen.\r\n   */\r\n  @Input() zIndex = 1;\r\n\r\n  /**\r\n   * If true, the marker can be clicked. Default value is true.\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('markerClickable') clickable = true;\r\n\r\n  /**\r\n   * Which animation to play when marker is added to a map.\r\n   * This can be 'BOUNCE' or 'DROP'\r\n   */\r\n  @Input() animation: Animation;\r\n\r\n  /**\r\n   * This event is fired when the marker's animation property changes.\r\n   *\r\n   * @memberof AgmMarker\r\n   */\r\n  @Output() animationChange = new EventEmitter<Animation>();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the marker.\r\n   */\r\n  @Output() markerClick: EventEmitter<AgmMarker> = new EventEmitter<AgmMarker>();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks twice on the marker.\r\n   */\r\n  @Output() markerDblClick: EventEmitter<AgmMarker> = new EventEmitter<AgmMarker>();\r\n\r\n  /**\r\n   * This event is fired when the user rightclicks on the marker.\r\n   */\r\n  @Output() markerRightClick: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  /**\r\n   * This event is fired when the user starts dragging the marker.\r\n   */\r\n  @Output() dragStart: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is repeatedly fired while the user drags the marker.\r\n   */\r\n  @Output() drag: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user stops dragging the marker.\r\n   */\r\n  @Output() dragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user mouses over the marker.\r\n   */\r\n  @Output() mouseOver: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user mouses outside the marker.\r\n   */\r\n  @Output() mouseOut: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /** @internal */\r\n  @ContentChildren(AgmInfoWindow) infoWindow: QueryList<AgmInfoWindow> = new QueryList<AgmInfoWindow>();\r\n\r\n  private _markerAddedToManger = false;\r\n  private _id: string;\r\n  private _observableSubscriptions: Subscription[] = [];\r\n\r\n  protected readonly _fitBoundsDetails$: ReplaySubject<FitBoundsDetails> = new ReplaySubject<FitBoundsDetails>(1);\r\n\r\n  constructor(private _markerManager: MarkerManager) { this._id = (markerId++).toString(); }\r\n\r\n  /* @internal */\r\n  ngAfterContentInit() {\r\n    this.handleInfoWindowUpdate();\r\n    this.infoWindow.changes.subscribe(() => this.handleInfoWindowUpdate());\r\n  }\r\n\r\n  private handleInfoWindowUpdate() {\r\n    if (this.infoWindow.length > 1) {\r\n      throw new Error('Expected no more than one info window.');\r\n    }\r\n    this.infoWindow.forEach(marker => {\r\n      marker.hostMarker = this;\r\n    });\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnChanges(changes: { [key: string]: SimpleChange }) {\r\n    if (typeof this.latitude === 'string') {\r\n      this.latitude = Number(this.latitude);\r\n    }\r\n    if (typeof this.longitude === 'string') {\r\n      this.longitude = Number(this.longitude);\r\n    }\r\n    if (typeof this.latitude !== 'number' || typeof this.longitude !== 'number') {\r\n      return;\r\n    }\r\n    if (!this._markerAddedToManger) {\r\n      this._markerManager.addMarker(this);\r\n      this._updateFitBoundsDetails();\r\n      this._markerAddedToManger = true;\r\n      this._addEventListeners();\r\n      return;\r\n    }\r\n    if (changes['latitude'] || changes['longitude']) {\r\n      this._markerManager.updateMarkerPosition(this);\r\n      this._updateFitBoundsDetails();\r\n    }\r\n    if (changes['title']) {\r\n      this._markerManager.updateTitle(this);\r\n    }\r\n    if (changes['label']) {\r\n      this._markerManager.updateLabel(this);\r\n    }\r\n    if (changes['draggable']) {\r\n      this._markerManager.updateDraggable(this);\r\n    }\r\n    if (changes['iconUrl']) {\r\n      this._markerManager.updateIcon(this);\r\n    }\r\n    if (changes['opacity']) {\r\n      this._markerManager.updateOpacity(this);\r\n    }\r\n    if (changes['visible']) {\r\n      this._markerManager.updateVisible(this);\r\n    }\r\n    if (changes['zIndex']) {\r\n      this._markerManager.updateZIndex(this);\r\n    }\r\n    if (changes['clickable']) {\r\n      this._markerManager.updateClickable(this);\r\n    }\r\n    if (changes['animation']) {\r\n      this._markerManager.updateAnimation(this);\r\n    }\r\n  }\r\n\r\n  /** @internal */\r\n  getFitBoundsDetails$(): Observable<FitBoundsDetails> {\r\n    return this._fitBoundsDetails$.asObservable();\r\n  }\r\n\r\n  protected _updateFitBoundsDetails() {\r\n    this._fitBoundsDetails$.next({ latLng: { lat: this.latitude, lng: this.longitude } });\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    const cs = this._markerManager.createEventObservable('click', this).subscribe(() => {\r\n      if (this.openInfoWindow) {\r\n        this.infoWindow.forEach(infoWindow => infoWindow.open());\r\n      }\r\n      this.markerClick.emit(this);\r\n    });\r\n    this._observableSubscriptions.push(cs);\r\n\r\n    const dcs = this._markerManager.createEventObservable('dblclick', this).subscribe(() => {\r\n      this.markerDblClick.emit(null);\r\n    });\r\n    this._observableSubscriptions.push(dcs);\r\n\r\n    const rc = this._markerManager.createEventObservable('rightclick', this).subscribe(() => {\r\n      this.markerRightClick.emit(null);\r\n    });\r\n    this._observableSubscriptions.push(rc);\r\n\r\n    const ds =\r\n      this._markerManager.createEventObservable<mapTypes.MouseEvent>('dragstart', this)\r\n        .subscribe((e: mapTypes.MouseEvent) => {\r\n          this.dragStart.emit({ coords: { lat: e.latLng.lat(), lng: e.latLng.lng() } } as MouseEvent);\r\n        });\r\n    this._observableSubscriptions.push(ds);\r\n\r\n    const d =\r\n      this._markerManager.createEventObservable<mapTypes.MouseEvent>('drag', this)\r\n        .subscribe((e: mapTypes.MouseEvent) => {\r\n          this.drag.emit({ coords: { lat: e.latLng.lat(), lng: e.latLng.lng() } } as MouseEvent);\r\n        });\r\n    this._observableSubscriptions.push(d);\r\n\r\n    const de =\r\n      this._markerManager.createEventObservable<mapTypes.MouseEvent>('dragend', this)\r\n        .subscribe((e: mapTypes.MouseEvent) => {\r\n          this.dragEnd.emit({ coords: { lat: e.latLng.lat(), lng: e.latLng.lng() } } as MouseEvent);\r\n        });\r\n    this._observableSubscriptions.push(de);\r\n\r\n    const mover =\r\n      this._markerManager.createEventObservable<mapTypes.MouseEvent>('mouseover', this)\r\n        .subscribe((e: mapTypes.MouseEvent) => {\r\n          this.mouseOver.emit({ coords: { lat: e.latLng.lat(), lng: e.latLng.lng() } } as MouseEvent);\r\n        });\r\n    this._observableSubscriptions.push(mover);\r\n\r\n    const mout =\r\n      this._markerManager.createEventObservable<mapTypes.MouseEvent>('mouseout', this)\r\n        .subscribe((e: mapTypes.MouseEvent) => {\r\n          this.mouseOut.emit({ coords: { lat: e.latLng.lat(), lng: e.latLng.lng() } } as MouseEvent);\r\n        });\r\n    this._observableSubscriptions.push(mout);\r\n\r\n    const anChng =\r\n      this._markerManager.createEventObservable<void>('animation_changed', this)\r\n        .subscribe(() => {\r\n          this.animationChange.emit(this.animation);\r\n        });\r\n    this._observableSubscriptions.push(anChng);\r\n  }\r\n\r\n  /** @internal */\r\n  id(): string { return this._id; }\r\n\r\n  /** @internal */\r\n  toString(): string { return 'AgmMarker-' + this._id.toString(); }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._markerManager.deleteMarker(this);\r\n    // unsubscribe all registered observable subscriptions\r\n    this._observableSubscriptions.forEach((s) => s.unsubscribe());\r\n  }\r\n}\r\n\r\nexport type Animation = 'BOUNCE' | 'DROP' | null;\r\n","import { AfterContentInit, Directive, EventEmitter, Input, OnChanges, OnDestroy, Output, SimpleChanges } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { LatLng, LatLngLiteral, PolygonOptions, PolyMouseEvent } from '../services/google-maps-types';\r\nimport { PolygonManager } from '../services/managers/polygon-manager';\r\nimport { MvcEventType } from '../utils/mvcarray-utils';\r\n\r\n/**\r\n * AgmPolygon renders a polygon on a {@link AgmMap}\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import { Component } from '@angular/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  styles: [`\r\n *    agm-map {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n *    <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *      <agm-polygon [paths]=\"paths\">\r\n *      </agm-polygon>\r\n *    </agm-map>\r\n *  `\r\n * })\r\n * export class MyMapCmp {\r\n *   lat: number = 0;\r\n *   lng: number = 0;\r\n *   zoom: number = 10;\r\n *   paths: Array<LatLngLiteral> = [\r\n *     { lat: 0,  lng: 10 },\r\n *     { lat: 0,  lng: 20 },\r\n *     { lat: 10, lng: 20 },\r\n *     { lat: 10, lng: 10 },\r\n *     { lat: 0,  lng: 10 }\r\n *   ]\r\n *   // Nesting paths will create a hole where they overlap;\r\n *   nestedPaths: Array<Array<LatLngLiteral>> = [[\r\n *     { lat: 0,  lng: 10 },\r\n *     { lat: 0,  lng: 20 },\r\n *     { lat: 10, lng: 20 },\r\n *     { lat: 10, lng: 10 },\r\n *     { lat: 0,  lng: 10 }\r\n *   ], [\r\n *     { lat: 0, lng: 15 },\r\n *     { lat: 0, lng: 20 },\r\n *     { lat: 5, lng: 20 },\r\n *     { lat: 5, lng: 15 },\r\n *     { lat: 0, lng: 15 }\r\n *   ]]\r\n * }\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'agm-polygon',\r\n})\r\nexport class AgmPolygon implements OnDestroy, OnChanges, AfterContentInit {\r\n  /**\r\n   * Indicates whether this Polygon handles mouse events. Defaults to true.\r\n   */\r\n  @Input() clickable = true;\r\n\r\n  /**\r\n   * If set to true, the user can drag this shape over the map. The geodesic\r\n   * property defines the mode of dragging. Defaults to false.\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('polyDraggable') draggable = false;\r\n\r\n  /**\r\n   * If set to true, the user can edit this shape by dragging the control\r\n   * points shown at the vertices and on each segment. Defaults to false.\r\n   */\r\n  @Input() editable = false;\r\n\r\n  /**\r\n   * The fill color. All CSS3 colors are supported except for extended\r\n   * named colors.\r\n   */\r\n  @Input() fillColor: string;\r\n\r\n  /**\r\n   * The fill opacity between 0.0 and 1.0\r\n   */\r\n  @Input() fillOpacity: number;\r\n\r\n  /**\r\n   * When true, edges of the polygon are interpreted as geodesic and will\r\n   * follow the curvature of the Earth. When false, edges of the polygon are\r\n   * rendered as straight lines in screen space. Note that the shape of a\r\n   * geodesic polygon may appear to change when dragged, as the dimensions\r\n   * are maintained relative to the surface of the earth. Defaults to false.\r\n   */\r\n  @Input() geodesic = false;\r\n\r\n  /**\r\n   * The ordered sequence of coordinates that designates a closed loop.\r\n   * Unlike polylines, a polygon may consist of one or more paths.\r\n   *  As a result, the paths property may specify one or more arrays of\r\n   * LatLng coordinates. Paths are closed automatically; do not repeat the\r\n   * first vertex of the path as the last vertex. Simple polygons may be\r\n   * defined using a single array of LatLngs. More complex polygons may\r\n   * specify an array of arrays. Any simple arrays are converted into Arrays.\r\n   * Inserting or removing LatLngs from the Array will automatically update\r\n   * the polygon on the map.\r\n   */\r\n  @Input() paths: Array<LatLng | LatLngLiteral> | Array<Array<LatLng | LatLngLiteral>> = [];\r\n\r\n  /**\r\n   * The stroke color. All CSS3 colors are supported except for extended\r\n   * named colors.\r\n   */\r\n  @Input() strokeColor: string;\r\n\r\n  /**\r\n   * The stroke opacity between 0.0 and 1.0\r\n   */\r\n  @Input() strokeOpacity: number;\r\n\r\n  /**\r\n   * The stroke width in pixels.\r\n   */\r\n  @Input() strokeWeight: number;\r\n\r\n  /**\r\n   * Whether this polygon is visible on the map. Defaults to true.\r\n   */\r\n  @Input() visible: boolean;\r\n\r\n  /**\r\n   * The zIndex compared to other polys.\r\n   */\r\n  @Input() zIndex: number;\r\n\r\n  /**\r\n   * This event is fired when the DOM click event is fired on the Polygon.\r\n   */\r\n  @Output() polyClick: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM dblclick event is fired on the Polygon.\r\n   */\r\n  @Output() polyDblClick: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is repeatedly fired while the user drags the polygon.\r\n   */\r\n  @Output() polyDrag: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user stops dragging the polygon.\r\n   */\r\n  @Output() polyDragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user starts dragging the polygon.\r\n   */\r\n  @Output() polyDragStart: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousedown event is fired on the Polygon.\r\n   */\r\n  @Output() polyMouseDown: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousemove event is fired on the Polygon.\r\n   */\r\n  @Output() polyMouseMove: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on Polygon mouseout.\r\n   */\r\n  @Output() polyMouseOut: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on Polygon mouseover.\r\n   */\r\n  @Output() polyMouseOver: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired whe the DOM mouseup event is fired on the Polygon\r\n   */\r\n  @Output() polyMouseUp: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the Polygon is right-clicked on.\r\n   */\r\n  @Output() polyRightClick: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired after Polygon first path changes.\r\n   */\r\n  @Output() polyPathsChange = new EventEmitter<PolygonPathEvent<any>>();\r\n\r\n  private static _polygonOptionsAttributes: Array<string> = [\r\n    'clickable', 'draggable', 'editable', 'fillColor', 'fillOpacity', 'geodesic', 'icon', 'map',\r\n    'paths', 'strokeColor', 'strokeOpacity', 'strokeWeight', 'visible', 'zIndex', 'draggable',\r\n    'editable', 'visible',\r\n  ];\r\n\r\n  private _id: string;\r\n  private _polygonAddedToManager = false;\r\n  private _subscriptions: Subscription[] = [];\r\n\r\n  constructor(private _polygonManager: PolygonManager) { }\r\n\r\n  /** @internal */\r\n  ngAfterContentInit() {\r\n    if (!this._polygonAddedToManager) {\r\n      this._init();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): any {\r\n    if (!this._polygonAddedToManager) {\r\n      this._init();\r\n      return;\r\n    }\r\n\r\n    this._polygonManager.setPolygonOptions(this, this._updatePolygonOptions(changes));\r\n  }\r\n\r\n  private _init() {\r\n    this._polygonManager.addPolygon(this);\r\n    this._polygonAddedToManager = true;\r\n    this._addEventListeners();\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    const handlers = [\r\n      { name: 'click', handler: (ev: PolyMouseEvent) => this.polyClick.emit(ev) },\r\n      { name: 'dblclick', handler: (ev: PolyMouseEvent) => this.polyDblClick.emit(ev) },\r\n      { name: 'drag', handler: (ev: MouseEvent) => this.polyDrag.emit(ev) },\r\n      { name: 'dragend', handler: (ev: MouseEvent) => this.polyDragEnd.emit(ev) },\r\n      { name: 'dragstart', handler: (ev: MouseEvent) => this.polyDragStart.emit(ev) },\r\n      { name: 'mousedown', handler: (ev: PolyMouseEvent) => this.polyMouseDown.emit(ev) },\r\n      { name: 'mousemove', handler: (ev: PolyMouseEvent) => this.polyMouseMove.emit(ev) },\r\n      { name: 'mouseout', handler: (ev: PolyMouseEvent) => this.polyMouseOut.emit(ev) },\r\n      { name: 'mouseover', handler: (ev: PolyMouseEvent) => this.polyMouseOver.emit(ev) },\r\n      { name: 'mouseup', handler: (ev: PolyMouseEvent) => this.polyMouseUp.emit(ev) },\r\n      { name: 'rightclick', handler: (ev: PolyMouseEvent) => this.polyRightClick.emit(ev) },\r\n    ];\r\n    handlers.forEach((obj) => {\r\n      const os = this._polygonManager.createEventObservable(obj.name, this).subscribe(obj.handler);\r\n      this._subscriptions.push(os);\r\n    });\r\n\r\n    this._polygonManager.createPathEventObservable(this)\r\n    .then(paths$ => {\r\n      const os = paths$.subscribe(pathEvent => this.polyPathsChange.emit(pathEvent));\r\n      this._subscriptions.push(os);\r\n    });\r\n  }\r\n\r\n  private _updatePolygonOptions(changes: SimpleChanges): PolygonOptions {\r\n    return Object.keys(changes)\r\n      .filter(k => AgmPolygon._polygonOptionsAttributes.indexOf(k) !== -1)\r\n      .reduce((obj: any, k: string) => {\r\n        obj[k] = changes[k].currentValue;\r\n        return obj;\r\n      }, {});\r\n  }\r\n\r\n  /** @internal */\r\n  id(): string { return this._id; }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._polygonManager.deletePolygon(this);\r\n    // unsubscribe all registered observable subscriptions\r\n    this._subscriptions.forEach((s) => s.unsubscribe());\r\n  }\r\n\r\n  getPath(): Promise<Array<LatLng>> {\r\n    return this._polygonManager.getPath(this);\r\n  }\r\n\r\n  getPaths(): Promise<Array<Array<LatLng>>> {\r\n    return this._polygonManager.getPaths(this);\r\n  }\r\n}\r\n\r\nexport interface PolygonPathEvent<T extends (LatLng | Array<LatLng>)> {\r\n  newArr: LatLng[][];\r\n  eventName: MvcEventType;\r\n  index: number;\r\n  previous?: T;\r\n}\r\n\r\nexport interface PathCollectionChangePolygonPathEvent extends PolygonPathEvent <Array<LatLng>>{\r\n}\r\n\r\nexport interface PathChangePolygonPathEvent extends PolygonPathEvent<LatLng> {\r\n  pathIndex: number;\r\n}\r\n","import { Directive, Input, OnInit } from '@angular/core';\r\n\r\n/**\r\n * AgmPolylineIcon enables to add polyline sequences to add arrows, circle,\r\n * or custom icons either along the entire line, or in a specific part of it.\r\n * See https://developers.google.com/maps/documentation/javascript/shapes#polyline_customize\r\n *\r\n * ### Example\r\n * ```html\r\n *    <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *      <agm-polyline>\r\n *          <agm-icon-sequence [fixedRotation]=\"true\" [path]=\"'FORWARD_OPEN_ARROW'\">\r\n *          </agm-icon-sequence>\r\n *      </agm-polyline>\r\n *    </agm-map>\r\n * ```\r\n *\r\n * @export\r\n * @class AgmPolylineIcon\r\n */\r\n@Directive({selector: 'agm-polyline agm-icon-sequence'})\r\nexport class AgmPolylineIcon implements OnInit{\r\n\r\n  /**\r\n   * If `true`, each icon in the sequence has the same fixed rotation regardless of the\r\n   * angle of the edge on which it lies. Defaults to `false`, in which case each icon\r\n   * in the sequence is rotated to align with its edge.\r\n   *\r\n   * @type {boolean}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() fixedRotation: boolean;\r\n\r\n  /**\r\n   * The distance from the start of the line at which an icon is to be rendered. This\r\n   * distance may be expressed as a percentage of line's length (e.g. '50%') or in pixels\r\n   * (e.g. '50px'). Defaults to '100%'.\r\n   *\r\n   * @type {string}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() offset: string;\r\n\r\n  /**\r\n   * The distance between consecutive icons on the line. This distance may be expressed as\r\n   * a percentage of the line's length (e.g. '50%') or in pixels (e.g. '50px'). To disable\r\n   * repeating of the icon, specify '0'. Defaults to '0'.\r\n   *\r\n   * @type {string}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() repeat: string;\r\n\r\n  /**\r\n   * The x coordinate of the position of the symbol relative to the polyline. The coordinate\r\n   * of the symbol's path is translated _left_ by the anchor's x coordinate. By default, a\r\n   * symbol is anchored at (0, 0). The position is expressed in the same coordinate system as the\r\n   * symbol's path.\r\n   *\r\n   * @type {number}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() anchorX: number;\r\n\r\n  /**\r\n   * The y coordinate of the position of the symbol relative to the polyline. The coordinate\r\n   * of the symbol's path is translated _up_ by the anchor's y coordinate. By default, a\r\n   * symbol is anchored at (0, 0). The position is expressed in the same coordinate system as the\r\n   * symbol's path.\r\n   *\r\n   * @type {number}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() anchorY: number;\r\n\r\n  /**\r\n   * The symbol's fill color. All CSS3 colors are supported except for extended named\r\n   * colors. Defaults to the stroke color of the corresponding polyline.\r\n   *\r\n   * @type {string}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() fillColor: string;\r\n\r\n  /**\r\n   * The symbol's fill opacity. Defaults to 0.\r\n   */\r\n  @Input() fillOpacity: number;\r\n\r\n  /**\r\n   * The symbol's path, which is a built-in symbol path, or a custom path expressed using\r\n   * SVG path notation. Required.\r\n   *\r\n   * @type {SymbolPath}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() path: 'CIRCLE' | 'BACKWARD_CLOSED_ARROW' | 'BACKWARD_OPEN_ARROW' | 'FORWARD_CLOSED_ARROW' |\r\n        'FORWARD_OPEN_ARROW' | string;\r\n\r\n  /**\r\n   * The angle by which to rotate the symbol, expressed clockwise in degrees.\r\n   * Defaults to 0. A symbol where `fixedRotation` is `false` is rotated relative to\r\n   * the angle of the edge on which it lies.\r\n   *\r\n   * @type {number}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() rotation: number;\r\n\r\n  /**\r\n   * The amount by which the symbol is scaled in size. Defaults to the stroke weight\r\n   * of the polyline; after scaling, the symbol must lie inside a square 22 pixels in\r\n   * size centered at the symbol's anchor.\r\n   *\r\n   * @type {number}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() scale: number;\r\n\r\n  /**\r\n   * The symbol's stroke color. All CSS3 colors are supported except for extended named\r\n   * colors. Defaults to the stroke color of the polyline.\r\n   *\r\n   * @type {string}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() strokeColor: string;\r\n\r\n  /**\r\n   * The symbol's stroke opacity. Defaults to the stroke opacity of the polyline.\r\n   *\r\n   * @type {number}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() strokeOpacity: number;\r\n\r\n  /**\r\n   * The symbol's stroke weight. Defaults to the scale of the symbol.\r\n   *\r\n   * @type {number}\r\n   * @memberof AgmPolylineIcon\r\n   */\r\n  @Input() strokeWeight: number;\r\n\r\n  ngOnInit(): void {\r\n    if (this.path == null) {\r\n      throw new Error('Icon Sequence path is required');\r\n    }\r\n  }\r\n}\r\n","import { Directive, EventEmitter, forwardRef, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map, startWith } from 'rxjs/operators';\r\nimport { LatLngLiteral } from '../../core/services/google-maps-types';\r\nimport { FitBoundsAccessor, FitBoundsDetails } from '../services/fit-bounds';\r\n\r\n/**\r\n * AgmPolylinePoint represents one element of a polyline within a  {@link\r\n * AgmPolyline}\r\n */\r\n@Directive({\r\n  selector: 'agm-polyline-point',\r\n  providers: [\r\n    {provide: FitBoundsAccessor, useExisting: forwardRef(() => AgmPolylinePoint)},\r\n  ],\r\n})\r\nexport class AgmPolylinePoint implements OnChanges, FitBoundsAccessor {\r\n  /**\r\n   * The latitude position of the point.\r\n   */\r\n  @Input() public latitude: number;\r\n\r\n  /**\r\n   * The longitude position of the point;\r\n   */\r\n  @Input() public longitude: number;\r\n\r\n  /**\r\n   * This event emitter gets emitted when the position of the point changed.\r\n   */\r\n  @Output() positionChanged: EventEmitter<LatLngLiteral> = new EventEmitter<LatLngLiteral>();\r\n\r\n  constructor() {}\r\n\r\n  ngOnChanges(changes: SimpleChanges): any {\r\n    if (changes['latitude'] || changes['longitude']) {\r\n      const position: LatLngLiteral = {\r\n        lat: changes['latitude'] ? changes['latitude'].currentValue : this.latitude,\r\n        lng: changes['longitude'] ? changes['longitude'].currentValue : this.longitude,\r\n      } as LatLngLiteral;\r\n      this.positionChanged.emit(position);\r\n    }\r\n  }\r\n\r\n  /** @internal */\r\n  getFitBoundsDetails$(): Observable<FitBoundsDetails> {\r\n    return this.positionChanged.pipe(\r\n      startWith({lat: this.latitude, lng: this.longitude}),\r\n      map(position => ({latLng: position}))\r\n    );\r\n  }\r\n}\r\n","import { AfterContentInit, ContentChildren, Directive, EventEmitter, Input, OnChanges, OnDestroy, Output, QueryList, SimpleChanges } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { LatLng, PolyMouseEvent } from '../services/google-maps-types';\r\nimport { PolylineManager } from '../services/managers/polyline-manager';\r\nimport { AgmPolylineIcon } from './polyline-icon';\r\nimport { AgmPolylinePoint } from './polyline-point';\r\n\r\nlet polylineId = 0;\r\n/**\r\n * AgmPolyline renders a polyline on a {@link AgmMap}\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import { Component } from '@angular/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  styles: [`\r\n *    .agm-map-container {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n *    <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *      <agm-polyline>\r\n *          <agm-polyline-point [latitude]=\"latA\" [longitude]=\"lngA\">\r\n *          </agm-polyline-point>\r\n *          <agm-polyline-point [latitude]=\"latB\" [longitude]=\"lngB\">\r\n *          </agm-polyline-point>\r\n *      </agm-polyline>\r\n *    </agm-map>\r\n *  `\r\n * })\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'agm-polyline',\r\n})\r\nexport class AgmPolyline implements OnDestroy, OnChanges, AfterContentInit {\r\n  /**\r\n   * Indicates whether this Polyline handles mouse events. Defaults to true.\r\n   */\r\n  @Input() clickable = true;\r\n\r\n  /**\r\n   * If set to true, the user can drag this shape over the map. The geodesic property defines the\r\n   * mode of dragging. Defaults to false.\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('polylineDraggable') draggable = false;\r\n\r\n  /**\r\n   * If set to true, the user can edit this shape by dragging the control points shown at the\r\n   * vertices and on each segment. Defaults to false.\r\n   */\r\n  @Input() editable = false;\r\n\r\n  /**\r\n   * When true, edges of the polygon are interpreted as geodesic and will follow the curvature of\r\n   * the Earth. When false, edges of the polygon are rendered as straight lines in screen space.\r\n   * Note that the shape of a geodesic polygon may appear to change when dragged, as the dimensions\r\n   * are maintained relative to the surface of the earth. Defaults to false.\r\n   */\r\n  @Input() geodesic = false;\r\n\r\n  /**\r\n   * The stroke color. All CSS3 colors are supported except for extended named colors.\r\n   */\r\n  @Input() strokeColor: string;\r\n\r\n  /**\r\n   * The stroke opacity between 0.0 and 1.0.\r\n   */\r\n  @Input() strokeOpacity: number;\r\n\r\n  /**\r\n   * The stroke width in pixels.\r\n   */\r\n  @Input() strokeWeight: number;\r\n\r\n  /**\r\n   * Whether this polyline is visible on the map. Defaults to true.\r\n   */\r\n  @Input() visible = true;\r\n\r\n  /**\r\n   * The zIndex compared to other polys.\r\n   */\r\n  @Input() zIndex: number;\r\n\r\n  /**\r\n   * This event is fired when the DOM click event is fired on the Polyline.\r\n   */\r\n  @Output() lineClick: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM dblclick event is fired on the Polyline.\r\n   */\r\n  @Output() lineDblClick: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is repeatedly fired while the user drags the polyline.\r\n   */\r\n  @Output() lineDrag: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user stops dragging the polyline.\r\n   */\r\n  @Output() lineDragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user starts dragging the polyline.\r\n   */\r\n  @Output() lineDragStart: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousedown event is fired on the Polyline.\r\n   */\r\n  @Output() lineMouseDown: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousemove event is fired on the Polyline.\r\n   */\r\n  @Output() lineMouseMove: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on Polyline mouseout.\r\n   */\r\n  @Output() lineMouseOut: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on Polyline mouseover.\r\n   */\r\n  @Output() lineMouseOver: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired whe the DOM mouseup event is fired on the Polyline\r\n   */\r\n  @Output() lineMouseUp: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the Polyline is right-clicked on.\r\n   */\r\n  @Output() lineRightClick: EventEmitter<PolyMouseEvent> = new EventEmitter<PolyMouseEvent>();\r\n\r\n  /**\r\n   * This event is fired after Polyline's path changes.\r\n   */\r\n  @Output() polyPathChange = new EventEmitter<PathEvent>();\r\n\r\n  /**\r\n   * @internal\r\n   */\r\n  @ContentChildren(AgmPolylinePoint) points: QueryList<AgmPolylinePoint>;\r\n\r\n  @ContentChildren(AgmPolylineIcon) iconSequences: QueryList<AgmPolylineIcon>;\r\n\r\n  private static _polylineOptionsAttributes: Array<string> = [\r\n    'draggable', 'editable', 'visible', 'geodesic', 'strokeColor', 'strokeOpacity', 'strokeWeight',\r\n    'zIndex',\r\n  ];\r\n\r\n  private _id: string;\r\n  private _polylineAddedToManager = false;\r\n  private _subscriptions: Subscription[] = [];\r\n\r\n  constructor(private _polylineManager: PolylineManager) { this._id = (polylineId++).toString(); }\r\n\r\n  /** @internal */\r\n  ngAfterContentInit() {\r\n    if (this.points.length) {\r\n      this.points.forEach((point: AgmPolylinePoint) => {\r\n        const s = point.positionChanged.subscribe(\r\n            () => { this._polylineManager.updatePolylinePoints(this); });\r\n        this._subscriptions.push(s);\r\n      });\r\n    }\r\n    if (!this._polylineAddedToManager) {\r\n      this._init();\r\n    }\r\n    const pointSub = this.points.changes.subscribe(() => this._polylineManager.updatePolylinePoints(this));\r\n    this._subscriptions.push(pointSub);\r\n    this._polylineManager.updatePolylinePoints(this);\r\n\r\n    const iconSub = this.iconSequences.changes.subscribe(() => this._polylineManager.updateIconSequences(this));\r\n    this._subscriptions.push(iconSub);\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): any {\r\n    if (!this._polylineAddedToManager) {\r\n      this._init();\r\n      return;\r\n    }\r\n\r\n    let options: {[propName: string]: any} = {};\r\n    const optionKeys = Object.keys(changes).filter(\r\n        k => AgmPolyline._polylineOptionsAttributes.indexOf(k) !== -1);\r\n    optionKeys.forEach(k => options[k] = changes[k].currentValue);\r\n    this._polylineManager.setPolylineOptions(this, options);\r\n  }\r\n\r\n  getPath(): Promise<Array<LatLng>> {\r\n    return this._polylineManager.getPath(this);\r\n  }\r\n\r\n  private _init() {\r\n    this._polylineManager.addPolyline(this);\r\n    this._polylineAddedToManager = true;\r\n    this._addEventListeners();\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    const handlers = [\r\n      {name: 'click', handler: (ev: PolyMouseEvent) => this.lineClick.emit(ev)},\r\n      {name: 'dblclick', handler: (ev: PolyMouseEvent) => this.lineDblClick.emit(ev)},\r\n      {name: 'drag', handler: (ev: MouseEvent) => this.lineDrag.emit(ev)},\r\n      {name: 'dragend', handler: (ev: MouseEvent) => this.lineDragEnd.emit(ev)},\r\n      {name: 'dragstart', handler: (ev: MouseEvent) => this.lineDragStart.emit(ev)},\r\n      {name: 'mousedown', handler: (ev: PolyMouseEvent) => this.lineMouseDown.emit(ev)},\r\n      {name: 'mousemove', handler: (ev: PolyMouseEvent) => this.lineMouseMove.emit(ev)},\r\n      {name: 'mouseout', handler: (ev: PolyMouseEvent) => this.lineMouseOut.emit(ev)},\r\n      {name: 'mouseover', handler: (ev: PolyMouseEvent) => this.lineMouseOver.emit(ev)},\r\n      {name: 'mouseup', handler: (ev: PolyMouseEvent) => this.lineMouseUp.emit(ev)},\r\n      {name: 'rightclick', handler: (ev: PolyMouseEvent) => this.lineRightClick.emit(ev)},\r\n    ];\r\n    handlers.forEach((obj) => {\r\n      const os = this._polylineManager.createEventObservable(obj.name, this).subscribe(obj.handler);\r\n      this._subscriptions.push(os);\r\n    });\r\n\r\n    this._polylineManager.createPathEventObservable(this).then((ob$) => {\r\n      const os = ob$.subscribe(pathEvent => this.polyPathChange.emit(pathEvent));\r\n      this._subscriptions.push(os);\r\n    });\r\n  }\r\n\r\n  /** @internal */\r\n  _getPoints(): Array<AgmPolylinePoint> {\r\n    if (this.points) {\r\n      return this.points.toArray();\r\n    }\r\n    return [];\r\n  }\r\n\r\n  _getIcons(): Array<AgmPolylineIcon> {\r\n    if (this.iconSequences) {\r\n      return this.iconSequences.toArray();\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /** @internal */\r\n  id(): string { return this._id; }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._polylineManager.deletePolyline(this);\r\n    // unsubscribe all registered observable subscriptions\r\n    this._subscriptions.forEach((s) => s.unsubscribe());\r\n  }\r\n}\r\n\r\nexport interface PathEvent {\r\n  newArr: LatLng[];\r\n  evName: 'insert_at' | 'remove_at' | 'set_at';\r\n  index: number;\r\n  previous?: LatLng;\r\n}\r\n","import {\r\n  Directive,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChange,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { MouseEvent } from '../map-types';\r\nimport {\r\n  LatLngBounds,\r\n  LatLngBoundsLiteral,\r\n  MouseEvent as MapMouseEvent,\r\n} from '../services/google-maps-types';\r\nimport { RectangleManager } from '../services/managers/rectangle-manager';\r\n\r\n@Directive({\r\n  selector: 'agm-rectangle',\r\n})\r\nexport class AgmRectangle implements OnInit, OnChanges, OnDestroy {\r\n  /**\r\n   * The north position of the rectangle (required).\r\n   */\r\n  @Input() north: number;\r\n\r\n  /**\r\n   * The east position of the rectangle (required).\r\n   */\r\n  @Input() east: number;\r\n\r\n  /**\r\n   * The south position of the rectangle (required).\r\n   */\r\n  @Input() south: number;\r\n\r\n  /**\r\n   * The west position of the rectangle (required).\r\n   */\r\n  @Input() west: number;\r\n\r\n  /**\r\n   * Indicates whether this Rectangle handles mouse events. Defaults to true.\r\n   */\r\n  @Input() clickable = true;\r\n\r\n  /**\r\n   * If set to true, the user can drag this rectangle over the map. Defaults to false.\r\n   */\r\n  // tslint:disable-next-line:no-input-rename\r\n  @Input('rectangleDraggable') draggable = false;\r\n\r\n  /**\r\n   * If set to true, the user can edit this rectangle by dragging the control points shown at\r\n   * the center and around the circumference of the rectangle. Defaults to false.\r\n   */\r\n  @Input() editable = false;\r\n\r\n  /**\r\n   * The fill color. All CSS3 colors are supported except for extended named colors.\r\n   */\r\n  @Input() fillColor: string;\r\n\r\n  /**\r\n   * The fill opacity between 0.0 and 1.0.\r\n   */\r\n  @Input() fillOpacity: number;\r\n\r\n  /**\r\n   * The stroke color. All CSS3 colors are supported except for extended named colors.\r\n   */\r\n  @Input() strokeColor: string;\r\n\r\n  /**\r\n   * The stroke opacity between 0.0 and 1.0\r\n   */\r\n  @Input() strokeOpacity: number;\r\n\r\n  /**\r\n   * The stroke position. Defaults to CENTER.\r\n   * This property is not supported on Internet Explorer 8 and earlier.\r\n   */\r\n  @Input() strokePosition: 'CENTER' | 'INSIDE' | 'OUTSIDE' = 'CENTER';\r\n\r\n  /**\r\n   * The stroke width in pixels.\r\n   */\r\n  @Input() strokeWeight = 0;\r\n\r\n  /**\r\n   * Whether this rectangle is visible on the map. Defaults to true.\r\n   */\r\n  @Input() visible = true;\r\n\r\n  /**\r\n   * The zIndex compared to other polys.\r\n   */\r\n  @Input() zIndex: number;\r\n\r\n  /**\r\n   * This event is fired when the rectangle's is changed.\r\n   */\r\n  @Output()\r\n  boundsChange: EventEmitter<LatLngBoundsLiteral> = new EventEmitter<\r\n    LatLngBoundsLiteral\r\n  >();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the rectangle.\r\n   */\r\n  @Output()\r\n  rectangleClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the rectangle.\r\n   */\r\n  @Output()\r\n  rectangleDblClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is repeatedly fired while the user drags the rectangle.\r\n   */\r\n  @Output() drag: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user stops dragging the rectangle.\r\n   */\r\n  @Output() dragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the user starts dragging the rectangle.\r\n   */\r\n  @Output()\r\n  dragStart: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousedown event is fired on the rectangle.\r\n   */\r\n  @Output()\r\n  mouseDown: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mousemove event is fired on the rectangle.\r\n   */\r\n  @Output()\r\n  mouseMove: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on rectangle mouseout.\r\n   */\r\n  @Output() mouseOut: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired on rectangle mouseover.\r\n   */\r\n  @Output()\r\n  mouseOver: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the DOM mouseup event is fired on the rectangle.\r\n   */\r\n  @Output() mouseUp: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  /**\r\n   * This event is fired when the rectangle is right-clicked on.\r\n   */\r\n  @Output()\r\n  rightClick: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  private _rectangleAddedToManager = false;\r\n\r\n  private static _mapOptions: string[] = [\r\n    'fillColor',\r\n    'fillOpacity',\r\n    'strokeColor',\r\n    'strokeOpacity',\r\n    'strokePosition',\r\n    'strokeWeight',\r\n    'visible',\r\n    'zIndex',\r\n    'clickable',\r\n  ];\r\n\r\n  private _eventSubscriptions: Subscription[] = [];\r\n\r\n  constructor(private _manager: RectangleManager) {}\r\n\r\n  /** @internal */\r\n  ngOnInit() {\r\n    this._manager.addRectangle(this);\r\n    this._rectangleAddedToManager = true;\r\n    this._registerEventListeners();\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnChanges(changes: { [key: string]: SimpleChange }) {\r\n    if (!this._rectangleAddedToManager) {\r\n      return;\r\n    }\r\n    if (\r\n      changes['north'] ||\r\n      changes['east'] ||\r\n      changes['south'] ||\r\n      changes['west']\r\n    ) {\r\n      this._manager.setBounds(this);\r\n    }\r\n    if (changes['editable']) {\r\n      this._manager.setEditable(this);\r\n    }\r\n    if (changes['draggable']) {\r\n      this._manager.setDraggable(this);\r\n    }\r\n    if (changes['visible']) {\r\n      this._manager.setVisible(this);\r\n    }\r\n    this._updateRectangleOptionsChanges(changes);\r\n  }\r\n\r\n  private _updateRectangleOptionsChanges(changes: {\r\n    [propName: string]: SimpleChange;\r\n  }) {\r\n    let options: { [propName: string]: any } = {};\r\n    let optionKeys = Object.keys(changes).filter(\r\n      k => AgmRectangle._mapOptions.indexOf(k) !== -1,\r\n    );\r\n    optionKeys.forEach(k => {\r\n      options[k] = changes[k].currentValue;\r\n    });\r\n    if (optionKeys.length > 0) {\r\n      this._manager.setOptions(this, options);\r\n    }\r\n  }\r\n\r\n  private _registerEventListeners() {\r\n    let events: Map<string, EventEmitter<any>> = new Map<\r\n      string,\r\n      EventEmitter<any>\r\n    >();\r\n    events.set('bounds_changed', this.boundsChange);\r\n    events.set('click', this.rectangleClick);\r\n    events.set('dblclick', this.rectangleDblClick);\r\n    events.set('drag', this.drag);\r\n    events.set('dragend', this.dragEnd);\r\n    events.set('dragStart', this.dragStart);\r\n    events.set('mousedown', this.mouseDown);\r\n    events.set('mousemove', this.mouseMove);\r\n    events.set('mouseout', this.mouseOut);\r\n    events.set('mouseover', this.mouseOver);\r\n    events.set('mouseup', this.mouseUp);\r\n    events.set('rightclick', this.rightClick);\r\n\r\n    events.forEach((eventEmitter, eventName) => {\r\n      this._eventSubscriptions.push(\r\n        this._manager\r\n          .createEventObservable<MapMouseEvent>(eventName, this)\r\n          .subscribe(value => {\r\n            switch (eventName) {\r\n              case 'bounds_changed':\r\n                this._manager.getBounds(this).then(bounds =>\r\n                  eventEmitter.emit({\r\n                    north: bounds.getNorthEast().lat(),\r\n                    east: bounds.getNorthEast().lng(),\r\n                    south: bounds.getSouthWest().lat(),\r\n                    west: bounds.getSouthWest().lng(),\r\n                  } as LatLngBoundsLiteral),\r\n                );\r\n                break;\r\n              default:\r\n                eventEmitter.emit({\r\n                  coords: { lat: value.latLng.lat(), lng: value.latLng.lng() },\r\n                } as MouseEvent);\r\n            }\r\n          }),\r\n      );\r\n    });\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._eventSubscriptions.forEach(function(s: Subscription) {\r\n      s.unsubscribe();\r\n    });\r\n    this._eventSubscriptions = null;\r\n    this._manager.removeRectangle(this);\r\n  }\r\n\r\n  /**\r\n   * Gets the LatLngBounds of this Rectangle.\r\n   */\r\n  getBounds(): Promise<LatLngBounds> {\r\n    return this._manager.getBounds(this);\r\n  }\r\n}\r\n","import { Directive, Input, OnChanges, OnDestroy, OnInit, SimpleChanges } from '@angular/core';\r\nimport { LayerManager } from '../services/managers/layer-manager';\r\n\r\nlet layerId = 0;\r\n\r\n/*\r\n * This directive adds a transit layer to a google map instance\r\n * <agm-transit-layer [visible]=\"true|false\"> <agm-transit-layer>\r\n * */\r\n@Directive({\r\n    selector: 'agm-transit-layer',\r\n})\r\n\r\nexport class AgmTransitLayer implements OnInit, OnChanges, OnDestroy{\r\n    private _addedToManager = false;\r\n    private _id: string = (layerId++).toString();\r\n\r\n    /**\r\n     * Hide/show transit layer\r\n     */\r\n    @Input() visible = true;\r\n\r\n    constructor( private _manager: LayerManager ) {}\r\n\r\n    ngOnInit() {\r\n        if (this._addedToManager) {\r\n            return;\r\n        }\r\n        this._manager.addTransitLayer(this, {visible: this.visible});\r\n        this._addedToManager = true;\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (!this._addedToManager) {\r\n            return;\r\n        }\r\n        if (changes['visible'] != null) {\r\n            this._manager.toggleLayerVisibility(this, {visible: changes['visible'].currentValue});\r\n        }\r\n    }\r\n\r\n    /** @internal */\r\n    id(): string { return this._id; }\r\n\r\n    /** @internal */\r\n    toString(): string { return `AgmTransitLayer-${this._id.toString()}`; }\r\n\r\n    /** @internal */\r\n    ngOnDestroy() {\r\n        this._manager.deleteLayer(this);\r\n    }\r\n\r\n}\r\n","import { Inject, Injectable, InjectionToken, LOCALE_ID, Optional } from '@angular/core';\r\n\r\nimport { DocumentRef, WindowRef } from '../../utils/browser-globals';\r\n\r\nimport { MapsAPILoader } from './maps-api-loader';\r\n\r\nexport enum GoogleMapsScriptProtocol {\r\n  HTTP = 1,\r\n  HTTPS = 2,\r\n  AUTO = 3,\r\n}\r\n\r\n/**\r\n * Token for the config of the LazyMapsAPILoader. Please provide an object of type {@link\r\n * LazyMapsAPILoaderConfig}.\r\n */\r\nexport const LAZY_MAPS_API_CONFIG = new InjectionToken<LazyMapsAPILoaderConfigLiteral>('angular-google-maps LAZY_MAPS_API_CONFIG');\r\n\r\n/**\r\n * Configuration for the {@link LazyMapsAPILoader}.\r\n */\r\nexport interface LazyMapsAPILoaderConfigLiteral {\r\n  /**\r\n   * The Google Maps API Key (see:\r\n   * https://developers.google.com/maps/documentation/javascript/get-api-key)\r\n   */\r\n  apiKey?: string;\r\n\r\n  /**\r\n   * The Google Maps client ID (for premium plans).\r\n   * When you have a Google Maps APIs Premium Plan license, you must authenticate\r\n   * your application with either an API key or a client ID.\r\n   * The Google Maps API will fail to load if both a client ID and an API key are included.\r\n   */\r\n  clientId?: string;\r\n\r\n  /**\r\n   * The Google Maps channel name (for premium plans).\r\n   * A channel parameter is an optional parameter that allows you to track usage under your client\r\n   * ID by assigning a distinct channel to each of your applications.\r\n   */\r\n  channel?: string;\r\n\r\n  /**\r\n   * Google Maps API version.\r\n   */\r\n  apiVersion?: string;\r\n\r\n  /**\r\n   * Host and Path used for the `<script>` tag.\r\n   */\r\n  hostAndPath?: string;\r\n\r\n  /**\r\n   * Protocol used for the `<script>` tag.\r\n   */\r\n  protocol?: GoogleMapsScriptProtocol;\r\n\r\n  /**\r\n   * Defines which Google Maps libraries should get loaded.\r\n   */\r\n  libraries?: string[];\r\n\r\n  /**\r\n   * The default bias for the map behavior is US.\r\n   * If you wish to alter your application to serve different map tiles or bias the\r\n   * application, you can overwrite the default behavior (US) by defining a `region`.\r\n   * See https://developers.google.com/maps/documentation/javascript/basics#Region\r\n   */\r\n  region?: string;\r\n\r\n  /**\r\n   * The Google Maps API uses the browser's preferred language when displaying\r\n   * textual information. If you wish to overwrite this behavior and force the API\r\n   * to use a given language, you can use this setting.\r\n   * See https://developers.google.com/maps/documentation/javascript/basics#Language\r\n   */\r\n  language?: string;\r\n}\r\n\r\n@Injectable()\r\nexport class LazyMapsAPILoader extends MapsAPILoader {\r\n  protected _scriptLoadingPromise: Promise<void>;\r\n  protected _config: LazyMapsAPILoaderConfigLiteral;\r\n  protected _windowRef: WindowRef;\r\n  protected _documentRef: DocumentRef;\r\n  protected readonly _SCRIPT_ID: string = 'agmGoogleMapsApiScript';\r\n  protected readonly callbackName: string = `agmLazyMapsAPILoader`;\r\n\r\n  constructor(@Optional() @Inject(LAZY_MAPS_API_CONFIG) config: any = null, w: WindowRef, d: DocumentRef,\r\n   @Inject(LOCALE_ID) private localeId: string) {\r\n    super();\r\n    this._config = config || {};\r\n    this._windowRef = w;\r\n    this._documentRef = d;\r\n  }\r\n\r\n  load(): Promise<void> {\r\n    const window = this._windowRef.getNativeWindow() as any;\r\n    if (window.google && window.google.maps) {\r\n      // Google maps already loaded on the page.\r\n      return Promise.resolve();\r\n    }\r\n\r\n    if (this._scriptLoadingPromise) {\r\n      return this._scriptLoadingPromise;\r\n    }\r\n\r\n    // this can happen in HMR situations or Stackblitz.io editors.\r\n    const scriptOnPage = this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);\r\n    if (scriptOnPage) {\r\n      this._assignScriptLoadingPromise(scriptOnPage);\r\n      return this._scriptLoadingPromise;\r\n    }\r\n\r\n    const script = this._documentRef.getNativeDocument().createElement('script');\r\n    script.type = 'text/javascript';\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.id = this._SCRIPT_ID;\r\n    script.src = this._getScriptSrc(this.callbackName);\r\n    this._assignScriptLoadingPromise(script);\r\n    this._documentRef.getNativeDocument().body.appendChild(script);\r\n    return this._scriptLoadingPromise;\r\n  }\r\n\r\n  private _assignScriptLoadingPromise(scriptElem: HTMLElement) {\r\n    this._scriptLoadingPromise = new Promise<void>((resolve: Function, reject: Function) => {\r\n      (this._windowRef.getNativeWindow() as any)[this.callbackName] = () => {\r\n        resolve();\r\n      };\r\n\r\n      scriptElem.onerror = (error: Event) => {\r\n        reject(error);\r\n      };\r\n    });\r\n  }\r\n\r\n  protected _getScriptSrc(callbackName: string): string {\r\n    let protocolType: GoogleMapsScriptProtocol =\r\n        (this._config && this._config.protocol) || GoogleMapsScriptProtocol.HTTPS;\r\n    let protocol: string;\r\n\r\n    switch (protocolType) {\r\n      case GoogleMapsScriptProtocol.AUTO:\r\n        protocol = '';\r\n        break;\r\n      case GoogleMapsScriptProtocol.HTTP:\r\n        protocol = 'http:';\r\n        break;\r\n      case GoogleMapsScriptProtocol.HTTPS:\r\n        protocol = 'https:';\r\n        break;\r\n    }\r\n\r\n    const hostAndPath: string = this._config.hostAndPath || 'maps.googleapis.com/maps/api/js';\r\n    const queryParams: {[key: string]: string | Array<string>} = {\r\n      v: this._config.apiVersion || 'quarterly',\r\n      callback: callbackName,\r\n      key: this._config.apiKey,\r\n      client: this._config.clientId,\r\n      channel: this._config.channel,\r\n      libraries: this._config.libraries,\r\n      region: this._config.region,\r\n      language: this._config.language || (this.localeId !== 'en-US' ? this.localeId : null),\r\n    };\r\n    const params: string = Object.keys(queryParams)\r\n                               .filter((k: string) => queryParams[k] != null)\r\n                               .filter((k: string) => {\r\n                                 // remove empty arrays\r\n                                 return !Array.isArray(queryParams[k]) ||\r\n                                     (Array.isArray(queryParams[k]) && queryParams[k].length > 0);\r\n                               })\r\n                               .map((k: string) => {\r\n                                 // join arrays as comma seperated strings\r\n                                 let i = queryParams[k];\r\n                                 if (Array.isArray(i)) {\r\n                                   return {key: k, value: i.join(',')};\r\n                                 }\r\n                                 return {key: k, value: queryParams[k]};\r\n                               })\r\n                               .map((entry: {key: string, value: string}) => {\r\n                                 return `${entry.key}=${entry.value}`;\r\n                               })\r\n                               .join('&');\r\n    return `${protocol}//${hostAndPath}?${params}`;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { bindCallback, ConnectableObservable, Observable, of, ReplaySubject, throwError } from 'rxjs';\r\nimport { map, multicast, switchMap } from 'rxjs/operators';\r\nimport { Geocoder, GeocoderRequest, GeocoderResult, GeocoderStatus } from './google-maps-types';\r\nimport { MapsAPILoader } from './maps-api-loader/maps-api-loader';\r\n\r\ndeclare var google: any;\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AgmGeocoder {\r\n  protected readonly geocoder$: Observable<Geocoder>;\r\n\r\n  constructor(loader: MapsAPILoader) {\r\n    const connectableGeocoder$ = new Observable(subscriber => {\r\n      loader.load().then(() => subscriber.next());\r\n    })\r\n      .pipe(\r\n        map(() => this._createGeocoder()),\r\n        multicast(new ReplaySubject(1)),\r\n      ) as ConnectableObservable<Geocoder>;\r\n\r\n    connectableGeocoder$.connect(); // ignore the subscription\r\n    // since we will remain subscribed till application exits\r\n\r\n    this.geocoder$ = connectableGeocoder$;\r\n  }\r\n\r\n  geocode(request: GeocoderRequest): Observable<GeocoderResult[]> {\r\n    return this.geocoder$.pipe(\r\n      switchMap((geocoder) => this._getGoogleResults(geocoder, request))\r\n    );\r\n  }\r\n\r\n  private _getGoogleResults(geocoder: Geocoder, request: GeocoderRequest): Observable<GeocoderResult[]> {\r\n    const geocodeObservable = bindCallback(geocoder.geocode);\r\n    return geocodeObservable(request).pipe(\r\n      switchMap(([results, status]) => {\r\n        if (status === GeocoderStatus.OK) {\r\n          return of(results);\r\n        }\r\n\r\n        return throwError(status);\r\n      })\r\n    );\r\n  }\r\n\r\n  private _createGeocoder(): Geocoder {\r\n    return new google.maps.Geocoder() as Geocoder;\r\n  }\r\n}\r\n","import { Provider } from '@angular/core';\r\n\r\nexport class WindowRef {\r\n  getNativeWindow(): any { return window; }\r\n}\r\n\r\nexport class DocumentRef {\r\n  getNativeDocument(): any { return document; }\r\n}\r\n\r\nexport const BROWSER_GLOBALS_PROVIDERS: Provider[] = [WindowRef, DocumentRef];\r\n","import { MapsAPILoader } from './maps-api-loader';\r\n\r\n/**\r\n * When using the NoOpMapsAPILoader, the Google Maps API must be added to the page via a `<script>`\r\n * Tag.\r\n * It's important that the Google Maps API script gets loaded first on the page.\r\n */\r\nexport class NoOpMapsAPILoader implements MapsAPILoader {\r\n  load(): Promise<void> {\r\n    if (!(window as any).google || !(window as any).google.maps) {\r\n      throw new Error(\r\n          'Google Maps API not loaded on page. Make sure window.google.maps is available!');\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n}\r\n","import { ModuleWithProviders, NgModule } from '@angular/core';\r\n\r\nimport { AgmBicyclingLayer } from './directives/bicycling-layer';\r\nimport { AgmCircle } from './directives/circle';\r\nimport { AgmDataLayer } from './directives/data-layer';\r\nimport { AgmFitBounds } from './directives/fit-bounds';\r\nimport { AgmInfoWindow } from './directives/info-window';\r\nimport { AgmKmlLayer } from './directives/kml-layer';\r\nimport { AgmMap } from './directives/map';\r\nimport { AgmMarker } from './directives/marker';\r\nimport { AgmPolygon } from './directives/polygon';\r\nimport { AgmPolyline } from './directives/polyline';\r\nimport { AgmPolylineIcon } from './directives/polyline-icon';\r\nimport { AgmPolylinePoint } from './directives/polyline-point';\r\nimport { AgmRectangle } from './directives/rectangle';\r\nimport { AgmTransitLayer } from './directives/transit-layer';\r\n\r\nimport { LAZY_MAPS_API_CONFIG, LazyMapsAPILoader, LazyMapsAPILoaderConfigLiteral } from './services/maps-api-loader/lazy-maps-api-loader';\r\nimport { MapsAPILoader } from './services/maps-api-loader/maps-api-loader';\r\n\r\nimport { BROWSER_GLOBALS_PROVIDERS } from './utils/browser-globals';\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function coreDirectives() {\r\n  return [\r\n    AgmBicyclingLayer,\r\n    AgmCircle,\r\n    AgmDataLayer,\r\n    AgmFitBounds,\r\n    AgmInfoWindow,\r\n    AgmKmlLayer,\r\n    AgmMap,\r\n    AgmMarker,\r\n    AgmPolygon,\r\n    AgmPolyline,\r\n    AgmPolylineIcon,\r\n    AgmPolylinePoint,\r\n    AgmRectangle,\r\n    AgmTransitLayer,\r\n  ];\r\n}\r\n\r\n/**\r\n * The angular-google-maps core module. Contains all Directives/Services/Pipes\r\n * of the core module. Please use `AgmCoreModule.forRoot()` in your app module.\r\n */\r\n@NgModule({declarations: coreDirectives(), exports: coreDirectives()})\r\nexport class AgmCoreModule {\r\n  /**\r\n   * Please use this method when you register the module at the root level.\r\n   */\r\n  static forRoot(lazyMapsAPILoaderConfig?: LazyMapsAPILoaderConfigLiteral): ModuleWithProviders {\r\n    return {\r\n      ngModule: AgmCoreModule,\r\n      providers: [\r\n        ...BROWSER_GLOBALS_PROVIDERS, {provide: MapsAPILoader, useClass: LazyMapsAPILoader},\r\n        {provide: LAZY_MAPS_API_CONFIG, useValue: lazyMapsAPILoaderConfig},\r\n      ],\r\n    };\r\n  }\r\n}\r\n"]}